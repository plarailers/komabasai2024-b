parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"RsyN":[function(require,module,exports) {
"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractVersion=o,exports.wrapPeerConnectionEvent=i,exports.disableLog=s,exports.disableWarnings=a,exports.log=p,exports.deprecated=u,exports.detectBrowser=c,exports.compactObject=f,exports.walkStats=l,exports.filterStats=v;var n=!0,r=!0;function o(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function i(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,o=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return o.apply(this,arguments);var i=function(e){var t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,i),o.apply(this,[e,i])};var i=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return i.apply(this,arguments);if(!this._eventMap[t].has(n))return i.apply(this,arguments);var r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,i.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function s(e){return"boolean"!=typeof e?new Error("Argument type: "+t(e)+". Please use a boolean."):(n=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function a(e){return"boolean"!=typeof e?new Error("Argument type: "+t(e)+". Please use a boolean."):(r=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function p(){if("object"===("undefined"==typeof window?"undefined":t(window))){if(n)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function u(e,t){r&&console.warn(e+" is deprecated, please use "+t+" instead.")}function c(e){var t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;var{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=o(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=o(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=o(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=o(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}function d(e){return"[object Object]"===Object.prototype.toString.call(e)}function f(t){return d(t)?Object.keys(t).reduce(function(n,r){var o=d(t[r]),i=o?f(t[r]):t[r],s=o&&!Object.keys(i).length;return void 0===i||s?n:Object.assign(n,e({},r,i))},{}):t}function l(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach(function(r){r.endsWith("Id")?l(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(function(t){l(e,e.get(t),n)})}))}function v(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",o=new Map;if(null===t)return o;var i=[];return e.forEach(function(e){"track"===e.type&&e.trackIdentifier===t.id&&i.push(e)}),i.forEach(function(t){e.forEach(function(n){n.type===r&&n.trackId===t.id&&l(e,n,o)})}),o}
},{}],"RmTL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetUserMedia=i;var e=t(require("../utils.js"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function t(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}return o.default=e,t&&t.set(e,o),o}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=e.log;function i(r){var t=r&&r.navigator;if(t.mediaDevices){var i=e.detectBrowser(r),a=function(e){if("object"!==o(e)||e.mandatory||e.optional)return e;var r={};return Object.keys(e).forEach(function(t){if("require"!==t&&"advanced"!==t&&"mediaSource"!==t){var n="object"===o(e[t])?e[t]:{ideal:e[t]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);var i=function(e,r){return e?e+r.charAt(0).toUpperCase()+r.slice(1):"deviceId"===r?"sourceId":r};if(void 0!==n.ideal){r.optional=r.optional||[];var a={};"number"==typeof n.ideal?(a[i("min",t)]=n.ideal,r.optional.push(a),(a={})[i("max",t)]=n.ideal,r.optional.push(a)):(a[i("",t)]=n.ideal,r.optional.push(a))}void 0!==n.exact&&"number"!=typeof n.exact?(r.mandatory=r.mandatory||{},r.mandatory[i("",t)]=n.exact):["min","max"].forEach(function(e){void 0!==n[e]&&(r.mandatory=r.mandatory||{},r.mandatory[i(e,t)]=n[e])})}}),e.advanced&&(r.optional=(r.optional||[]).concat(e.advanced)),r},c=function(e,r){if(i.version>=61)return r(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===o(e.audio)){var c=function(e,r,t){r in e&&!(t in e)&&(e[t]=e[r],delete e[r])};c((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),c(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=a(e.audio)}if(e&&"object"===o(e.video)){var d=e.video.facingMode;d=d&&("object"===o(d)?d:{ideal:d});var u,s=i.version<66;if(d&&("user"===d.exact||"environment"===d.exact||"user"===d.ideal||"environment"===d.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||s))if(delete e.video.facingMode,"environment"===d.exact||"environment"===d.ideal?u=["back","rear"]:"user"!==d.exact&&"user"!==d.ideal||(u=["front"]),u)return t.mediaDevices.enumerateDevices().then(function(t){var o=(t=t.filter(function(e){return"videoinput"===e.kind})).find(function(e){return u.some(function(r){return e.label.toLowerCase().includes(r)})});return!o&&t.length&&u.includes("back")&&(o=t[t.length-1]),o&&(e.video.deviceId=d.exact?{exact:o.deviceId}:{ideal:o.deviceId}),e.video=a(e.video),n("chrome: "+JSON.stringify(e)),r(e)});e.video=a(e.video)}return n("chrome: "+JSON.stringify(e)),r(e)},d=function(e){return i.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(t.getUserMedia=function(e,r,o){c(e,function(e){t.webkitGetUserMedia(e,r,function(e){o&&o(d(e))})})}.bind(t),t.mediaDevices.getUserMedia){var u=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return c(e,function(e){return u(e).then(function(r){if(e.audio&&!r.getAudioTracks().length||e.video&&!r.getVideoTracks().length)throw r.getTracks().forEach(function(e){e.stop()}),new DOMException("","NotFoundError");return r},function(e){return Promise.reject(d(e))})})}}}}
},{"../utils.js":"RsyN"}],"yjjI":[function(require,module,exports) {
"use strict";function e(e,i){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof i?e.navigator.mediaDevices.getDisplayMedia=function(a){return i(a).then(function(i){var t=a.video&&a.video.width,o=a.video&&a.video.height,d=a.video&&a.video.frameRate;return a.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:d||3}},t&&(a.video.mandatory.maxWidth=t),o&&(a.video.mandatory.maxHeight=o),e.navigator.mediaDevices.getUserMedia(a)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetDisplayMedia=e;
},{}],"RNlo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimMediaStream=a,exports.shimOnTrack=c,exports.shimGetSendersWithDtmf=p,exports.shimGetStats=d,exports.shimSenderReceiverGetStats=h,exports.shimAddTrackRemoveTrackWithNative=f,exports.shimAddTrackRemoveTrack=m,exports.shimPeerConnection=u,exports.fixNegotiationNeeded=l,Object.defineProperty(exports,"shimGetUserMedia",{enumerable:!0,get:function(){return t.shimGetUserMedia}}),Object.defineProperty(exports,"shimGetDisplayMedia",{enumerable:!0,get:function(){return r.shimGetDisplayMedia}});var e=i(require("../utils.js")),t=require("./getusermedia"),r=require("./getdisplaymedia");function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function c(t){if("object"!==s(t)||!t.RTCPeerConnection||"ontrack"in t.RTCPeerConnection.prototype)e.wrapPeerConnectionEvent(t,"track",function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e});else{Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var r=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._ontrackpoly||(this._ontrackpoly=function(r){r.stream.addEventListener("addtrack",function(n){var i;i=t.RTCPeerConnection.prototype.getReceivers?e.getReceivers().find(function(e){return e.track&&e.track.id===n.track.id}):{track:n.track};var o=new Event("track");o.track=n.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[r.stream],e.dispatchEvent(o)}),r.stream.getTracks().forEach(function(n){var i;i=t.RTCPeerConnection.prototype.getReceivers?e.getReceivers().find(function(e){return e.track&&e.track.id===n.id}):{track:n};var o=new Event("track");o.track=n,o.receiver=i,o.transceiver={receiver:i},o.streams=[r.stream],e.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),r.apply(this,arguments)}}}function p(e){if("object"===s(e)&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){var i=r.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){n.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach(function(e){r._senders.push(t(r,e))})};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach(function(e){var r=t._senders.find(function(t){return t.track===e});r&&t._senders.splice(t._senders.indexOf(r),1)})}}else if("object"===s(e)&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function d(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,[r,n,i]=arguments;if(arguments.length>0&&"function"==typeof r)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof r))return t.apply(this,[]);var o=function(e){var t={};return e.result().forEach(function(e){var r={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(function(t){r[t]=e.stat(t)}),t[r.id]=r}),t},s=function(e){return new Map(Object.keys(e).map(function(t){return[t,e[t]]}))};if(arguments.length>=2){return t.apply(this,[function(e){n(s(o(e)))},r])}return new Promise(function(r,n){t.apply(e,[function(e){r(s(o(e)))},n])}).then(n,i)}}}function h(t){if("object"===s(t)&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver){if(!("getStats"in t.RTCRtpSender.prototype)){var r=t.RTCPeerConnection.prototype.getSenders;r&&(t.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=r.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t});var n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),t.RTCRtpSender.prototype.getStats=function(){var t=this;return this._pc.getStats().then(function(r){return e.filterStats(r,t.track,!0)})}}if(!("getStats"in t.RTCRtpReceiver.prototype)){var i=t.RTCPeerConnection.prototype.getReceivers;i&&(t.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=i.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t}),e.wrapPeerConnectionEvent(t,"track",function(e){return e.receiver._pc=e.srcElement,e}),t.RTCRtpReceiver.prototype.getStats=function(){var t=this;return this._pc.getStats().then(function(r){return e.filterStats(r,t.track,!1)})}}if("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype){var o=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){var e,r,n,i=arguments[0];return this.getSenders().forEach(function(t){t.track===i&&(e?n=!0:e=t)}),this.getReceivers().forEach(function(e){return e.track===i&&(r?n=!0:r=e),e.track===i}),n||e&&r?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):e?e.getStats():r?r.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return o.apply(this,arguments)}}}}function f(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(t){return e._shimmedLocalStreams[t][0]})};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){if(!r)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var n=t.apply(this,arguments);return this._shimmedLocalStreams[r.id]?-1===this._shimmedLocalStreams[r.id].indexOf(n)&&this._shimmedLocalStreams[r.id].push(n):this._shimmedLocalStreams[r.id]=[r,n],n};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(function(e){if(t.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")});var n=this.getSenders();r.apply(this,arguments);var i=this.getSenders().filter(function(e){return-1===n.indexOf(e)});this._shimmedLocalStreams[e.id]=[e].concat(i)};var n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],n.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(function(r){var n=t._shimmedLocalStreams[r].indexOf(e);-1!==n&&t._shimmedLocalStreams[r].splice(n,1),1===t._shimmedLocalStreams[r].length&&delete t._shimmedLocalStreams[r]}),i.apply(this,arguments)}}function m(t){if(t.RTCPeerConnection){var r=e.detectBrowser(t);if(t.RTCPeerConnection.prototype.addTrack&&r.version>=65)return f(t);var n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=n.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map(function(t){return e._reverseStreams[t.id]})};var i=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(e){var r=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},e.getTracks().forEach(function(e){if(r.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[e.id]){var n=new t.MediaStream(e.getTracks());this._streams[e.id]=n,this._reverseStreams[n.id]=e,e=n}i.apply(this,[e])};var s=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},s.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},t.RTCPeerConnection.prototype.addTrack=function(e,r){var n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find(function(t){return t===e}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var o=this._streams[r.id];if(o)o.addTrack(e),Promise.resolve().then(function(){n.dispatchEvent(new Event("negotiationneeded"))});else{var s=new t.MediaStream([e]);this._streams[r.id]=s,this._reverseStreams[s.id]=r,this.addStream(s)}return this.getSenders().find(function(t){return t.track===e})},["createOffer","createAnswer"].forEach(function(e){var r=t.RTCPeerConnection.prototype[e],n=o({},e,function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?r.apply(this,[function(r){var n=p(e,r);t[0].apply(null,[n])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):r.apply(this,arguments).then(function(t){return p(e,t)})});t.RTCPeerConnection.prototype[e]=n[e]});var a=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=(e=this,t=arguments[0],r=t.sdp,Object.keys(e._reverseStreams||[]).forEach(function(t){var n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(new RegExp(n.id,"g"),i.id)}),new RTCSessionDescription({type:t.type,sdp:r})),a.apply(this,arguments)):a.apply(this,arguments);var e,t,r};var c=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=c.get.apply(this);return""===e.type?e:p(this,e)}}),t.RTCPeerConnection.prototype.removeTrack=function(e){var t,r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},Object.keys(this._streams).forEach(function(n){r._streams[n].getTracks().find(function(t){return e.track===t})&&(t=r._streams[n])}),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function p(e,t){var r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(function(t){var n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(new RegExp(i.id,"g"),n.id)}),new RTCSessionDescription({type:t.type,sdp:r})}}function u(t){var r=e.detectBrowser(t);if(!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection){var n=0===t.RTCPeerConnection.prototype.addIceCandidate.length;r.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var r=t.RTCPeerConnection.prototype[e],n=o({},e,function(){return arguments[0]=new("addIceCandidate"===e?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)});t.RTCPeerConnection.prototype[e]=n[e]});var i=t.RTCPeerConnection.prototype.addIceCandidate;t.RTCPeerConnection.prototype.addIceCandidate=function(){return n||arguments[0]?r.version<78&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}}function l(t){var r=e.detectBrowser(t);e.wrapPeerConnectionEvent(t,"negotiationneeded",function(e){var t=e.target;if(!(r.version<72||t.getConfiguration&&"plan-b"===t.getConfiguration().sdpSemantics)||"stable"===t.signalingState)return e})}
},{"../utils.js":"RsyN","./getusermedia":"RmTL","./getdisplaymedia":"yjjI"}],"uuCd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.filterIceServers=n;var r=t(require("../utils"));function e(){if("function"!=typeof WeakMap)return null;var r=new WeakMap;return e=function(){return r},r}function t(r){if(r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var t=e();if(t&&t.has(r))return t.get(r);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){var f=u?Object.getOwnPropertyDescriptor(r,i):null;f&&(f.get||f.set)?Object.defineProperty(n,i,f):n[i]=r[i]}return n.default=r,t&&t.set(r,n),n}function n(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&r.deprecated("RTCIceServer.url","RTCIceServer.urls");var u="string"==typeof t;return u&&(t=[t]),t=t.filter(function(r){if(0===r.indexOf("stun:"))return!1;var e=r.startsWith("turn")&&!r.startsWith("turn:[")&&r.includes("transport=udp");return e&&!n?(n=!0,!0):e&&!n}),delete e.url,e.urls=u?t[0]:t,!!t.length}})}
},{"../utils":"RsyN"}],"jIWI":[function(require,module,exports) {
"use strict";var r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(r){return r.trim().split("\n").map(function(r){return r.trim()})},r.splitSections=function(r){return r.split("\nm=").map(function(r,e){return(e>0?"m="+r:r).trim()+"\r\n"})},r.getDescription=function(e){var t=r.splitSections(e);return t&&t[0]},r.getMediaSections=function(e){var t=r.splitSections(e);return t.shift(),t},r.matchPrefix=function(e,t){return r.splitLines(e).filter(function(r){return 0===r.indexOf(t)})},r.parseCandidate=function(r){for(var e,t={foundation:(e=0===r.indexOf("a=candidate:")?r.substring(12).split(" "):r.substring(10).split(" "))[0],component:parseInt(e[1],10),protocol:e[2].toLowerCase(),priority:parseInt(e[3],10),ip:e[4],address:e[4],port:parseInt(e[5],10),type:e[7]},a=8;a<e.length;a+=2)switch(e[a]){case"raddr":t.relatedAddress=e[a+1];break;case"rport":t.relatedPort=parseInt(e[a+1],10);break;case"tcptype":t.tcpType=e[a+1];break;case"ufrag":t.ufrag=e[a+1],t.usernameFragment=e[a+1];break;default:t[e[a]]=e[a+1]}return t},r.writeCandidate=function(r){var e=[];e.push(r.foundation),e.push(r.component),e.push(r.protocol.toUpperCase()),e.push(r.priority),e.push(r.address||r.ip),e.push(r.port);var t=r.type;return e.push("typ"),e.push(t),"host"!==t&&r.relatedAddress&&r.relatedPort&&(e.push("raddr"),e.push(r.relatedAddress),e.push("rport"),e.push(r.relatedPort)),r.tcpType&&"tcp"===r.protocol.toLowerCase()&&(e.push("tcptype"),e.push(r.tcpType)),(r.usernameFragment||r.ufrag)&&(e.push("ufrag"),e.push(r.usernameFragment||r.ufrag)),"candidate:"+e.join(" ")},r.parseIceOptions=function(r){return r.substr(14).split(" ")},r.parseRtpMap=function(r){var e=r.substr(9).split(" "),t={payloadType:parseInt(e.shift(),10)};return e=e[0].split("/"),t.name=e[0],t.clockRate=parseInt(e[1],10),t.channels=3===e.length?parseInt(e[2],10):1,t.numChannels=t.channels,t},r.writeRtpMap=function(r){var e=r.payloadType;void 0!==r.preferredPayloadType&&(e=r.preferredPayloadType);var t=r.channels||r.numChannels||1;return"a=rtpmap:"+e+" "+r.name+"/"+r.clockRate+(1!==t?"/"+t:"")+"\r\n"},r.parseExtmap=function(r){var e=r.substr(9).split(" ");return{id:parseInt(e[0],10),direction:e[0].indexOf("/")>0?e[0].split("/")[1]:"sendrecv",uri:e[1]}},r.writeExtmap=function(r){return"a=extmap:"+(r.id||r.preferredId)+(r.direction&&"sendrecv"!==r.direction?"/"+r.direction:"")+" "+r.uri+"\r\n"},r.parseFmtp=function(r){for(var e,t={},a=r.substr(r.indexOf(" ")+1).split(";"),n=0;n<a.length;n++)t[(e=a[n].trim().split("="))[0].trim()]=e[1];return t},r.writeFmtp=function(r){var e="",t=r.payloadType;if(void 0!==r.preferredPayloadType&&(t=r.preferredPayloadType),r.parameters&&Object.keys(r.parameters).length){var a=[];Object.keys(r.parameters).forEach(function(e){r.parameters[e]?a.push(e+"="+r.parameters[e]):a.push(e)}),e+="a=fmtp:"+t+" "+a.join(";")+"\r\n"}return e},r.parseRtcpFb=function(r){var e=r.substr(r.indexOf(" ")+1).split(" ");return{type:e.shift(),parameter:e.join(" ")}},r.writeRtcpFb=function(r){var e="",t=r.payloadType;return void 0!==r.preferredPayloadType&&(t=r.preferredPayloadType),r.rtcpFeedback&&r.rtcpFeedback.length&&r.rtcpFeedback.forEach(function(r){e+="a=rtcp-fb:"+t+" "+r.type+(r.parameter&&r.parameter.length?" "+r.parameter:"")+"\r\n"}),e},r.parseSsrcMedia=function(r){var e=r.indexOf(" "),t={ssrc:parseInt(r.substr(7,e-7),10)},a=r.indexOf(":",e);return a>-1?(t.attribute=r.substr(e+1,a-e-1),t.value=r.substr(a+1)):t.attribute=r.substr(e+1),t},r.parseSsrcGroup=function(r){var e=r.substr(13).split(" ");return{semantics:e.shift(),ssrcs:e.map(function(r){return parseInt(r,10)})}},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(r){var e=r.substr(14).split(" ");return{algorithm:e[0].toLowerCase(),value:e[1]}},r.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:r.matchPrefix(e+t,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(r,e){var t="a=setup:"+e+"\r\n";return r.fingerprints.forEach(function(r){t+="a=fingerprint:"+r.algorithm+" "+r.value+"\r\n"}),t},r.parseCryptoLine=function(r){var e=r.substr(9).split(" ");return{tag:parseInt(e[0],10),cryptoSuite:e[1],keyParams:e[2],sessionParams:e.slice(3)}},r.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?r.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},r.parseCryptoKeyParams=function(r){if(0!==r.indexOf("inline:"))return null;var e=r.substr(7).split("|");return{keyMethod:"inline",keySalt:e[0],lifeTime:e[1],mkiValue:e[2]?e[2].split(":")[0]:void 0,mkiLength:e[2]?e[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(r){return r.keyMethod+":"+r.keySalt+(r.lifeTime?"|"+r.lifeTime:"")+(r.mkiValue&&r.mkiLength?"|"+r.mkiValue+":"+r.mkiLength:"")},r.getCryptoParameters=function(e,t){return r.matchPrefix(e+t,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(e,t){var a=r.matchPrefix(e+t,"a=ice-ufrag:")[0],n=r.matchPrefix(e+t,"a=ice-pwd:")[0];return a&&n?{usernameFragment:a.substr(12),password:n.substr(10)}:null},r.writeIceParameters=function(r){return"a=ice-ufrag:"+r.usernameFragment+"\r\na=ice-pwd:"+r.password+"\r\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},a=r.splitLines(e)[0].split(" "),n=3;n<a.length;n++){var s=a[n],i=r.matchPrefix(e,"a=rtpmap:"+s+" ")[0];if(i){var p=r.parseRtpMap(i),c=r.matchPrefix(e,"a=fmtp:"+s+" ");switch(p.parameters=c.length?r.parseFmtp(c[0]):{},p.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+s+" ").map(r.parseRtcpFb),t.codecs.push(p),p.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(p.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(r.parseExtmap(e))}),t},r.writeRtpDescription=function(e,t){var a="";a+="m="+e+" ",a+=t.codecs.length>0?"9":"0",a+=" UDP/TLS/RTP/SAVPF ",a+=t.codecs.map(function(r){return void 0!==r.preferredPayloadType?r.preferredPayloadType:r.payloadType}).join(" ")+"\r\n",a+="c=IN IP4 0.0.0.0\r\n",a+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){a+=r.writeRtpMap(e),a+=r.writeFmtp(e),a+=r.writeRtcpFb(e)});var n=0;return t.codecs.forEach(function(r){r.maxptime>n&&(n=r.maxptime)}),n>0&&(a+="a=maxptime:"+n+"\r\n"),a+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach(function(e){a+=r.writeExtmap(e)}),a},r.parseRtpEncodingParameters=function(e){var t,a=[],n=r.parseRtpParameters(e),s=-1!==n.fecMechanisms.indexOf("RED"),i=-1!==n.fecMechanisms.indexOf("ULPFEC"),p=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(r){return"cname"===r.attribute}),c=p.length>0&&p[0].ssrc,o=r.matchPrefix(e,"a=ssrc-group:FID").map(function(r){return r.substr(17).split(" ").map(function(r){return parseInt(r,10)})});o.length>0&&o[0].length>1&&o[0][0]===c&&(t=o[0][1]),n.codecs.forEach(function(r){if("RTX"===r.name.toUpperCase()&&r.parameters.apt){var e={ssrc:c,codecPayloadType:parseInt(r.parameters.apt,10)};c&&t&&(e.rtx={ssrc:t}),a.push(e),s&&((e=JSON.parse(JSON.stringify(e))).fec={ssrc:c,mechanism:i?"red+ulpfec":"red"},a.push(e))}}),0===a.length&&c&&a.push({ssrc:c});var u=r.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substr(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substr(5),10)*.95-16e3:void 0,a.forEach(function(r){r.maxBitrate=u})),a},r.parseRtcpParameters=function(e){var t={},a=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(r){return"cname"===r.attribute})[0];a&&(t.cname=a.value,t.ssrc=a.ssrc);var n=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=n.length>0,t.compound=0===n.length;var s=r.matchPrefix(e,"a=rtcp-mux");return t.mux=s.length>0,t},r.parseMsid=function(e){var t,a=r.matchPrefix(e,"a=msid:");if(1===a.length)return{stream:(t=a[0].substr(7).split(" "))[0],track:t[1]};var n=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(r){return"msid"===r.attribute});return n.length>0?{stream:(t=n[0].value.split(" "))[0],track:t[1]}:void 0},r.parseSctpDescription=function(e){var t,a=r.parseMLine(e),n=r.matchPrefix(e,"a=max-message-size:");n.length>0&&(t=parseInt(n[0].substr(19),10)),isNaN(t)&&(t=65536);var s=r.matchPrefix(e,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substr(12),10),protocol:a.fmt,maxMessageSize:t};if(r.matchPrefix(e,"a=sctpmap:").length>0){var i=r.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(i[0],10),protocol:i[1],maxMessageSize:t}}},r.writeSctpDescription=function(r,e){var t=[];return t="DTLS/SCTP"!==r.protocol?["m="+r.kind+" 9 "+r.protocol+" "+e.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+e.port+"\r\n"]:["m="+r.kind+" 9 "+r.protocol+" "+e.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+e.port+" "+e.protocol+" 65535\r\n"],void 0!==e.maxMessageSize&&t.push("a=max-message-size:"+e.maxMessageSize+"\r\n"),t.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(e,t,a){var n=void 0!==t?t:2;return"v=0\r\no="+(a||"thisisadapterortc")+" "+(e||r.generateSessionId())+" "+n+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(e,t,a,n){var s=r.writeRtpDescription(e.kind,t);if(s+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),s+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===a?"actpass":"active"),s+="a=mid:"+e.mid+"\r\n",e.direction?s+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?s+="a=sendrecv\r\n":e.rtpSender?s+="a=sendonly\r\n":e.rtpReceiver?s+="a=recvonly\r\n":s+="a=inactive\r\n",e.rtpSender){var i="msid:"+n.id+" "+e.rtpSender.track.id+"\r\n";s+="a="+i,s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+i,e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+i,s+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),s},r.getDirection=function(e,t){for(var a=r.splitLines(e),n=0;n<a.length;n++)switch(a[n]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return a[n].substr(2)}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){return r.splitLines(e)[0].split(" ")[0].substr(2)},r.isRejected=function(r){return"0"===r.split(" ",2)[1]},r.parseMLine=function(e){var t=r.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},r.parseOLine=function(e){var t=r.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},r.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=r.splitLines(e),a=0;a<t.length;a++)if(t[a].length<2||"="!==t[a].charAt(1))return!1;return!0},"object"==typeof module&&(module.exports=r);
},{}],"heG5":[function(require,module,exports) {
"use strict";var e=require("sdp");function t(e){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type}function r(t,r,n,a,i){var s=e.writeRtpDescription(t.kind,r);if(s+=e.writeIceParameters(t.iceGatherer.getLocalParameters()),s+=e.writeDtlsParameters(t.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":i||"active"),s+="a=mid:"+t.mid+"\r\n",t.rtpSender&&t.rtpReceiver?s+="a=sendrecv\r\n":t.rtpSender?s+="a=sendonly\r\n":t.rtpReceiver?s+="a=recvonly\r\n":s+="a=inactive\r\n",t.rtpSender){var o=t.rtpSender._initialTrackId||t.rtpSender.track.id;t.rtpSender._initialTrackId=o;var c="msid:"+(a?a.id:"-")+" "+o+"\r\n";s+="a="+c,s+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" "+c,t.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" "+c,s+="a=ssrc-group:FID "+t.sendEncodingParameters[0].ssrc+" "+t.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" cname:"+e.localCName+"\r\n",t.rtpSender&&t.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" cname:"+e.localCName+"\r\n"),s}function n(e,t){var r=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var n=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var a="string"==typeof n;return a&&(n=[n]),n=n.filter(function(e){return 0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")&&!r?(r=!0,!0):0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp")}),delete e.url,e.urls=a?n[0]:n,!!n.length}})}function a(e,t){var r={codecs:[],headerExtensions:[],fecMechanisms:[]},n=function(e,t){e=parseInt(e,10);for(var r=0;r<t.length;r++)if(t[r].payloadType===e||t[r].preferredPayloadType===e)return t[r]},a=function(e,t,r,a){var i=n(e.parameters.apt,r),s=n(t.parameters.apt,a);return i&&s&&i.name.toLowerCase()===s.name.toLowerCase()};return e.codecs.forEach(function(n){for(var i=0;i<t.codecs.length;i++){var s=t.codecs[i];if(n.name.toLowerCase()===s.name.toLowerCase()&&n.clockRate===s.clockRate){if("rtx"===n.name.toLowerCase()&&n.parameters&&s.parameters.apt&&!a(n,s,e.codecs,t.codecs))continue;(s=JSON.parse(JSON.stringify(s))).numChannels=Math.min(n.numChannels,s.numChannels),r.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter(function(e){for(var t=0;t<n.rtcpFeedback.length;t++)if(n.rtcpFeedback[t].type===e.type&&n.rtcpFeedback[t].parameter===e.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(e){for(var n=0;n<t.headerExtensions.length;n++){var a=t.headerExtensions[n];if(e.uri===a.uri){r.headerExtensions.push(a);break}}}),r}function i(e,t,r){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(r)}function s(e,t){var r=e.getRemoteCandidates().find(function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type});return r||e.addRemoteCandidate(t),!r}function o(e,t){var r=new Error(t);return r.name=e,r.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],r}module.exports=function(c,d){function p(e,t){t.addTrack(e),t.dispatchEvent(new c.MediaStreamTrackEvent("addtrack",{track:e}))}function l(e,t,r,n){var a=new Event("track");a.track=t,a.receiver=r,a.transceiver={receiver:r},a.streams=n,c.setTimeout(function(){e._dispatchEvent("track",a)})}var f=function(t){var r=this,a=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){r[e]=a[e].bind(a)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",t=JSON.parse(JSON.stringify(t||{})),this.usingBundle="max-bundle"===t.bundlePolicy,"negotiate"===t.rtcpMuxPolicy)throw o("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(t.rtcpMuxPolicy||(t.rtcpMuxPolicy="require"),t.iceTransportPolicy){case"all":case"relay":break;default:t.iceTransportPolicy="all"}switch(t.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:t.bundlePolicy="balanced"}if(t.iceServers=n(t.iceServers||[],d),this._iceGatherers=[],t.iceCandidatePoolSize)for(var i=t.iceCandidatePoolSize;i>0;i--)this._iceGatherers.push(new c.RTCIceGatherer({iceServers:t.iceServers,gatherPolicy:t.iceTransportPolicy}));else t.iceCandidatePoolSize=0;this._config=t,this.transceivers=[],this._sdpSessionId=e.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(f.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(f.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),f.prototype.onicecandidate=null,f.prototype.onaddstream=null,f.prototype.ontrack=null,f.prototype.onremovestream=null,f.prototype.onsignalingstatechange=null,f.prototype.oniceconnectionstatechange=null,f.prototype.onconnectionstatechange=null,f.prototype.onicegatheringstatechange=null,f.prototype.onnegotiationneeded=null,f.prototype.ondatachannel=null,f.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},f.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},f.prototype.getConfiguration=function(){return this._config},f.prototype.getLocalStreams=function(){return this.localStreams},f.prototype.getRemoteStreams=function(){return this.remoteStreams},f.prototype._createTransceiver=function(e,t){var r=this.transceivers.length>0,n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&r)n.iceTransport=this.transceivers[0].iceTransport,n.dtlsTransport=this.transceivers[0].dtlsTransport;else{var a=this._createIceAndDtlsTransports();n.iceTransport=a.iceTransport,n.dtlsTransport=a.dtlsTransport}return t||this.transceivers.push(n),n},f.prototype.addTrack=function(e,t){if(this._isClosed)throw o("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find(function(t){return t.track===e}))throw o("InvalidAccessError","Track already exists.");for(var n=0;n<this.transceivers.length;n++)this.transceivers[n].track||this.transceivers[n].kind!==e.kind||(r=this.transceivers[n]);return r||(r=this._createTransceiver(e.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(t)&&this.localStreams.push(t),r.track=e,r.stream=t,r.rtpSender=new c.RTCRtpSender(e,r.dtlsTransport),r.rtpSender},f.prototype.addStream=function(e){var t=this;if(d>=15025)e.getTracks().forEach(function(r){t.addTrack(r,e)});else{var r=e.clone();e.getTracks().forEach(function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",function(e){n.enabled=e.enabled})}),r.getTracks().forEach(function(e){t.addTrack(e,r)})}},f.prototype.removeTrack=function(e){if(this._isClosed)throw o("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(e instanceof c.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var t=this.transceivers.find(function(t){return t.rtpSender===e});if(!t)throw o("InvalidAccessError","Sender was not created by this connection.");var r=t.stream;t.rtpSender.stop(),t.rtpSender=null,t.track=null,t.stream=null,-1===this.transceivers.map(function(e){return e.stream}).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},f.prototype.removeStream=function(e){var t=this;e.getTracks().forEach(function(e){var r=t.getSenders().find(function(t){return t.track===e});r&&t.removeTrack(r)})},f.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},f.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},f.prototype._createIceGatherer=function(e,t){var r=this;if(t&&e>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var n=new c.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(n,"state",{value:"new",writable:!0}),this.transceivers[e].bufferedCandidateEvents=[],this.transceivers[e].bufferCandidates=function(t){var a=!t.candidate||0===Object.keys(t.candidate).length;n.state=a?"completed":"gathering",null!==r.transceivers[e].bufferedCandidateEvents&&r.transceivers[e].bufferedCandidateEvents.push(t)},n.addEventListener("localcandidate",this.transceivers[e].bufferCandidates),n},f.prototype._gather=function(t,r){var n=this,a=this.transceivers[r].iceGatherer;if(!a.onlocalcandidate){var i=this.transceivers[r].bufferedCandidateEvents;this.transceivers[r].bufferedCandidateEvents=null,a.removeEventListener("localcandidate",this.transceivers[r].bufferCandidates),a.onlocalcandidate=function(i){if(!(n.usingBundle&&r>0)){var s=new Event("icecandidate");s.candidate={sdpMid:t,sdpMLineIndex:r};var o=i.candidate,c=!o||0===Object.keys(o).length;if(c)"new"!==a.state&&"gathering"!==a.state||(a.state="completed");else{"new"===a.state&&(a.state="gathering"),o.component=1,o.ufrag=a.getLocalParameters().usernameFragment;var d=e.writeCandidate(o);s.candidate=Object.assign(s.candidate,e.parseCandidate(d)),s.candidate.candidate=d,s.candidate.toJSON=function(){return{candidate:s.candidate.candidate,sdpMid:s.candidate.sdpMid,sdpMLineIndex:s.candidate.sdpMLineIndex,usernameFragment:s.candidate.usernameFragment}}}var p=e.getMediaSections(n._localDescription.sdp);p[s.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+s.candidate.candidate+"\r\n",n._localDescription.sdp=e.getDescription(n._localDescription.sdp)+p.join("");var l=n.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});"gathering"!==n.iceGatheringState&&(n.iceGatheringState="gathering",n._emitGatheringStateChange()),c||n._dispatchEvent("icecandidate",s),l&&(n._dispatchEvent("icecandidate",new Event("icecandidate")),n.iceGatheringState="complete",n._emitGatheringStateChange())}},c.setTimeout(function(){i.forEach(function(e){a.onlocalcandidate(e)})},0)}},f.prototype._createIceAndDtlsTransports=function(){var e=this,t=new c.RTCIceTransport(null);t.onicestatechange=function(){e._updateIceConnectionState(),e._updateConnectionState()};var r=new c.RTCDtlsTransport(t);return r.ondtlsstatechange=function(){e._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),e._updateConnectionState()},{iceTransport:t,dtlsTransport:r}},f.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var r=this.transceivers[e].iceTransport;r&&(delete r.onicestatechange,delete this.transceivers[e].iceTransport);var n=this.transceivers[e].dtlsTransport;n&&(delete n.ondtlsstatechange,delete n.onerror,delete this.transceivers[e].dtlsTransport)},f.prototype._transceive=function(t,r,n){var i=a(t.localCapabilities,t.remoteCapabilities);r&&t.rtpSender&&(i.encodings=t.sendEncodingParameters,i.rtcp={cname:e.localCName,compound:t.rtcpParameters.compound},t.recvEncodingParameters.length&&(i.rtcp.ssrc=t.recvEncodingParameters[0].ssrc),t.rtpSender.send(i)),n&&t.rtpReceiver&&i.codecs.length>0&&("video"===t.kind&&t.recvEncodingParameters&&d<15019&&t.recvEncodingParameters.forEach(function(e){delete e.rtx}),t.recvEncodingParameters.length?i.encodings=t.recvEncodingParameters:i.encodings=[{}],i.rtcp={compound:t.rtcpParameters.compound},t.rtcpParameters.cname&&(i.rtcp.cname=t.rtcpParameters.cname),t.sendEncodingParameters.length&&(i.rtcp.ssrc=t.sendEncodingParameters[0].ssrc),t.rtpReceiver.receive(i))},f.prototype.setLocalDescription=function(t){var r,n,s=this;if(-1===["offer","answer"].indexOf(t.type))return Promise.reject(o("TypeError",'Unsupported type "'+t.type+'"'));if(!i("setLocalDescription",t.type,s.signalingState)||s._isClosed)return Promise.reject(o("InvalidStateError","Can not set local "+t.type+" in state "+s.signalingState));if("offer"===t.type)r=e.splitSections(t.sdp),n=r.shift(),r.forEach(function(t,r){var n=e.parseRtpParameters(t);s.transceivers[r].localCapabilities=n}),s.transceivers.forEach(function(e,t){s._gather(e.mid,t)});else if("answer"===t.type){r=e.splitSections(s._remoteDescription.sdp),n=r.shift();var c=e.matchPrefix(n,"a=ice-lite").length>0;r.forEach(function(t,r){var i=s.transceivers[r],o=i.iceGatherer,d=i.iceTransport,p=i.dtlsTransport,l=i.localCapabilities,f=i.remoteCapabilities;if(!(e.isRejected(t)&&0===e.matchPrefix(t,"a=bundle-only").length)&&!i.rejected){var u=e.getIceParameters(t,n),v=e.getDtlsParameters(t,n);c&&(v.role="server"),s.usingBundle&&0!==r||(s._gather(i.mid,r),"new"===d.state&&d.start(o,u,c?"controlling":"controlled"),"new"===p.state&&p.start(v));var h=a(l,f);s._transceive(i,h.codecs.length>0,!1)}})}return s._localDescription={type:t.type,sdp:t.sdp},"offer"===t.type?s._updateSignalingState("have-local-offer"):s._updateSignalingState("stable"),Promise.resolve()},f.prototype.setRemoteDescription=function(t){var r=this;if(-1===["offer","answer"].indexOf(t.type))return Promise.reject(o("TypeError",'Unsupported type "'+t.type+'"'));if(!i("setRemoteDescription",t.type,r.signalingState)||r._isClosed)return Promise.reject(o("InvalidStateError","Can not set remote "+t.type+" in state "+r.signalingState));var n={};r.remoteStreams.forEach(function(e){n[e.id]=e});var f=[],u=e.splitSections(t.sdp),v=u.shift(),h=e.matchPrefix(v,"a=ice-lite").length>0,m=e.matchPrefix(v,"a=group:BUNDLE ").length>0;r.usingBundle=m;var g=e.matchPrefix(v,"a=ice-options:")[0];return r.canTrickleIceCandidates=!!g&&g.substr(14).split(" ").indexOf("trickle")>=0,u.forEach(function(i,o){var l=e.splitLines(i),u=e.getKind(i),g=e.isRejected(i)&&0===e.matchPrefix(i,"a=bundle-only").length,y=l[0].substr(2).split(" ")[2],S=e.getDirection(i,v),T=e.parseMsid(i),E=e.getMid(i)||e.generateIdentifier();if(g||"application"===u&&("DTLS/SCTP"===y||"UDP/DTLS/SCTP"===y))r.transceivers[o]={mid:E,kind:u,protocol:y,rejected:!0};else{var C,P,w,R,_,k,b,x,D;!g&&r.transceivers[o]&&r.transceivers[o].rejected&&(r.transceivers[o]=r._createTransceiver(u,!0));var I,L,M=e.parseRtpParameters(i);g||(I=e.getIceParameters(i,v),(L=e.getDtlsParameters(i,v)).role="client"),b=e.parseRtpEncodingParameters(i);var O=e.parseRtcpParameters(i),G=e.matchPrefix(i,"a=end-of-candidates",v).length>0,j=e.matchPrefix(i,"a=candidate:").map(function(t){return e.parseCandidate(t)}).filter(function(e){return 1===e.component});if(("offer"===t.type||"answer"===t.type)&&!g&&m&&o>0&&r.transceivers[o]&&(r._disposeIceAndDtlsTransports(o),r.transceivers[o].iceGatherer=r.transceivers[0].iceGatherer,r.transceivers[o].iceTransport=r.transceivers[0].iceTransport,r.transceivers[o].dtlsTransport=r.transceivers[0].dtlsTransport,r.transceivers[o].rtpSender&&r.transceivers[o].rtpSender.setTransport(r.transceivers[0].dtlsTransport),r.transceivers[o].rtpReceiver&&r.transceivers[o].rtpReceiver.setTransport(r.transceivers[0].dtlsTransport)),"offer"!==t.type||g){if("answer"===t.type&&!g){P=(C=r.transceivers[o]).iceGatherer,w=C.iceTransport,R=C.dtlsTransport,_=C.rtpReceiver,k=C.sendEncodingParameters,x=C.localCapabilities,r.transceivers[o].recvEncodingParameters=b,r.transceivers[o].remoteCapabilities=M,r.transceivers[o].rtcpParameters=O,j.length&&"new"===w.state&&(!h&&!G||m&&0!==o?j.forEach(function(e){s(C.iceTransport,e)}):w.setRemoteCandidates(j)),m&&0!==o||("new"===w.state&&w.start(P,I,"controlling"),"new"===R.state&&R.start(L)),!a(C.localCapabilities,C.remoteCapabilities).codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&C.sendEncodingParameters[0].rtx&&delete C.sendEncodingParameters[0].rtx,r._transceive(C,"sendrecv"===S||"recvonly"===S,"sendrecv"===S||"sendonly"===S),!_||"sendrecv"!==S&&"sendonly"!==S?delete C.rtpReceiver:(D=_.track,T?(n[T.stream]||(n[T.stream]=new c.MediaStream),p(D,n[T.stream]),f.push([D,_,n[T.stream]])):(n.default||(n.default=new c.MediaStream),p(D,n.default),f.push([D,_,n.default])))}}else{(C=r.transceivers[o]||r._createTransceiver(u)).mid=E,C.iceGatherer||(C.iceGatherer=r._createIceGatherer(o,m)),j.length&&"new"===C.iceTransport.state&&(!G||m&&0!==o?j.forEach(function(e){s(C.iceTransport,e)}):C.iceTransport.setRemoteCandidates(j)),x=c.RTCRtpReceiver.getCapabilities(u),d<15019&&(x.codecs=x.codecs.filter(function(e){return"rtx"!==e.name})),k=C.sendEncodingParameters||[{ssrc:1001*(2*o+2)}];var N,A=!1;if("sendrecv"===S||"sendonly"===S){if(A=!C.rtpReceiver,_=C.rtpReceiver||new c.RTCRtpReceiver(C.dtlsTransport,u),A)D=_.track,T&&"-"===T.stream||(T?(n[T.stream]||(n[T.stream]=new c.MediaStream,Object.defineProperty(n[T.stream],"id",{get:function(){return T.stream}})),Object.defineProperty(D,"id",{get:function(){return T.track}}),N=n[T.stream]):(n.default||(n.default=new c.MediaStream),N=n.default)),N&&(p(D,N),C.associatedRemoteMediaStreams.push(N)),f.push([D,_,N])}else C.rtpReceiver&&C.rtpReceiver.track&&(C.associatedRemoteMediaStreams.forEach(function(e){var t,r,n=e.getTracks().find(function(e){return e.id===C.rtpReceiver.track.id});n&&(t=n,(r=e).removeTrack(t),r.dispatchEvent(new c.MediaStreamTrackEvent("removetrack",{track:t})))}),C.associatedRemoteMediaStreams=[]);C.localCapabilities=x,C.remoteCapabilities=M,C.rtpReceiver=_,C.rtcpParameters=O,C.sendEncodingParameters=k,C.recvEncodingParameters=b,r._transceive(r.transceivers[o],!1,A)}}}),void 0===r._dtlsRole&&(r._dtlsRole="offer"===t.type?"active":"passive"),r._remoteDescription={type:t.type,sdp:t.sdp},"offer"===t.type?r._updateSignalingState("have-remote-offer"):r._updateSignalingState("stable"),Object.keys(n).forEach(function(e){var t=n[e];if(t.getTracks().length){if(-1===r.remoteStreams.indexOf(t)){r.remoteStreams.push(t);var a=new Event("addstream");a.stream=t,c.setTimeout(function(){r._dispatchEvent("addstream",a)})}f.forEach(function(e){var n=e[0],a=e[1];t.id===e[2].id&&l(r,n,a,[t])})}}),f.forEach(function(e){e[2]||l(r,e[0],e[1],[])}),c.setTimeout(function(){r&&r.transceivers&&r.transceivers.forEach(function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},f.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},f.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},f.prototype._maybeFireNegotiationNeeded=function(){var e=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,c.setTimeout(function(){if(e.needNegotiation){e.needNegotiation=!1;var t=new Event("negotiationneeded");e._dispatchEvent("negotiationneeded",t)}},0))},f.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++}),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",r)}},f.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)}),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var r=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",r)}},f.prototype.createOffer=function(){var t=this;if(t._isClosed)return Promise.reject(o("InvalidStateError","Can not call createOffer after close"));var n=t.transceivers.filter(function(e){return"audio"===e.kind}).length,a=t.transceivers.filter(function(e){return"video"===e.kind}).length,i=arguments[0];if(i){if(i.mandatory||i.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==i.offerToReceiveAudio&&(n=!0===i.offerToReceiveAudio?1:!1===i.offerToReceiveAudio?0:i.offerToReceiveAudio),void 0!==i.offerToReceiveVideo&&(a=!0===i.offerToReceiveVideo?1:!1===i.offerToReceiveVideo?0:i.offerToReceiveVideo)}for(t.transceivers.forEach(function(e){"audio"===e.kind?--n<0&&(e.wantReceive=!1):"video"===e.kind&&--a<0&&(e.wantReceive=!1)});n>0||a>0;)n>0&&(t._createTransceiver("audio"),n--),a>0&&(t._createTransceiver("video"),a--);var s=e.writeSessionBoilerplate(t._sdpSessionId,t._sdpSessionVersion++);t.transceivers.forEach(function(r,n){var a=r.track,i=r.kind,s=r.mid||e.generateIdentifier();r.mid=s,r.iceGatherer||(r.iceGatherer=t._createIceGatherer(n,t.usingBundle));var o=c.RTCRtpSender.getCapabilities(i);d<15019&&(o.codecs=o.codecs.filter(function(e){return"rtx"!==e.name})),o.codecs.forEach(function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),r.remoteCapabilities&&r.remoteCapabilities.codecs&&r.remoteCapabilities.codecs.forEach(function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)})}),o.headerExtensions.forEach(function(e){(r.remoteCapabilities&&r.remoteCapabilities.headerExtensions||[]).forEach(function(t){e.uri===t.uri&&(e.id=t.id)})});var p=r.sendEncodingParameters||[{ssrc:1001*(2*n+1)}];a&&d>=15019&&"video"===i&&!p[0].rtx&&(p[0].rtx={ssrc:p[0].ssrc+1}),r.wantReceive&&(r.rtpReceiver=new c.RTCRtpReceiver(r.dtlsTransport,i)),r.localCapabilities=o,r.sendEncodingParameters=p}),"max-compat"!==t._config.bundlePolicy&&(s+="a=group:BUNDLE "+t.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),s+="a=ice-options:trickle\r\n",t.transceivers.forEach(function(n,a){s+=r(n,n.localCapabilities,"offer",n.stream,t._dtlsRole),s+="a=rtcp-rsize\r\n",!n.iceGatherer||"new"===t.iceGatheringState||0!==a&&t.usingBundle||(n.iceGatherer.getLocalCandidates().forEach(function(t){t.component=1,s+="a="+e.writeCandidate(t)+"\r\n"}),"completed"===n.iceGatherer.state&&(s+="a=end-of-candidates\r\n"))});var p=new c.RTCSessionDescription({type:"offer",sdp:s});return Promise.resolve(p)},f.prototype.createAnswer=function(){var t=this;if(t._isClosed)return Promise.reject(o("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==t.signalingState&&"have-local-pranswer"!==t.signalingState)return Promise.reject(o("InvalidStateError","Can not call createAnswer in signalingState "+t.signalingState));var n=e.writeSessionBoilerplate(t._sdpSessionId,t._sdpSessionVersion++);t.usingBundle&&(n+="a=group:BUNDLE "+t.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),n+="a=ice-options:trickle\r\n";var i=e.getMediaSections(t._remoteDescription.sdp).length;t.transceivers.forEach(function(e,s){if(!(s+1>i)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?n+="m=application 0 DTLS/SCTP 5000\r\n":n+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?n+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(n+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(n+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var o;if(e.stream)"audio"===e.kind?o=e.stream.getAudioTracks()[0]:"video"===e.kind&&(o=e.stream.getVideoTracks()[0]),o&&d>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var c=a(e.localCapabilities,e.remoteCapabilities);!c.codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,n+=r(e,c,"answer",e.stream,t._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(n+="a=rtcp-rsize\r\n")}});var s=new c.RTCSessionDescription({type:"answer",sdp:n});return Promise.resolve(s)},f.prototype.addIceCandidate=function(t){var r,n=this;return t&&void 0===t.sdpMLineIndex&&!t.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(a,i){if(!n._remoteDescription)return i(o("InvalidStateError","Can not add ICE candidate without a remote description"));if(t&&""!==t.candidate){var c=t.sdpMLineIndex;if(t.sdpMid)for(var d=0;d<n.transceivers.length;d++)if(n.transceivers[d].mid===t.sdpMid){c=d;break}var p=n.transceivers[c];if(!p)return i(o("OperationError","Can not add ICE candidate"));if(p.rejected)return a();var l=Object.keys(t.candidate).length>0?e.parseCandidate(t.candidate):{};if("tcp"===l.protocol&&(0===l.port||9===l.port))return a();if(l.component&&1!==l.component)return a();if((0===c||c>0&&p.iceTransport!==n.transceivers[0].iceTransport)&&!s(p.iceTransport,l))return i(o("OperationError","Can not add ICE candidate"));var f=t.candidate.trim();0===f.indexOf("a=")&&(f=f.substr(2)),(r=e.getMediaSections(n._remoteDescription.sdp))[c]+="a="+(l.type?f:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=e.getDescription(n._remoteDescription.sdp)+r.join("")}else for(var u=0;u<n.transceivers.length&&(n.transceivers[u].rejected||(n.transceivers[u].iceTransport.addRemoteCandidate({}),(r=e.getMediaSections(n._remoteDescription.sdp))[u]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=e.getDescription(n._remoteDescription.sdp)+r.join(""),!n.usingBundle));u++);a()})},f.prototype.getStats=function(e){if(e&&e instanceof c.MediaStreamTrack){var t=null;if(this.transceivers.forEach(function(r){r.rtpSender&&r.rtpSender.track===e?t=r.rtpSender:r.rtpReceiver&&r.rtpReceiver.track===e&&(t=r.rtpReceiver)}),!t)throw o("InvalidAccessError","Invalid selector.");return t.getStats()}var r=[];return this.transceivers.forEach(function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(t){e[t]&&r.push(e[t].getStats())})}),Promise.all(r).then(function(e){var t=new Map;return e.forEach(function(e){e.forEach(function(e){t.set(e.id,e)})}),t})};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(e){var r=c[e];if(r&&r.prototype&&r.prototype.getStats){var n=r.prototype.getStats;r.prototype.getStats=function(){return n.apply(this).then(function(e){var r=new Map;return Object.keys(e).forEach(function(n){e[n].type=t(e[n]),r.set(n,e[n])}),r})}}});var u=["createOffer","createAnswer"];return u.forEach(function(e){var t=f.prototype[e];f.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then(function(t){"function"==typeof e[0]&&e[0].apply(null,[t])},function(t){"function"==typeof e[1]&&e[1].apply(null,[t])}):t.apply(this,arguments)}}),(u=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(e){var t=f.prototype[e];f.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)},function(t){"function"==typeof e[2]&&e[2].apply(null,[t])}):t.apply(this,arguments)}}),["getStats"].forEach(function(e){var t=f.prototype[e];f.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)}):t.apply(this,arguments)}}),f};
},{"sdp":"jIWI"}],"uWR5":[function(require,module,exports) {
"use strict";function e(e){var r=e&&e.navigator,t=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(e){return t(e).catch(function(e){return Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))})}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetUserMedia=e;
},{}],"zgJ4":[function(require,module,exports) {
"use strict";function e(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetDisplayMedia=e;
},{}],"F7IB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimPeerConnection=a,exports.shimReplaceTrack=p,Object.defineProperty(exports,"shimGetUserMedia",{enumerable:!0,get:function(){return n.shimGetUserMedia}}),Object.defineProperty(exports,"shimGetDisplayMedia",{enumerable:!0,get:function(){return i.shimGetDisplayMedia}});var e=s(require("../utils")),t=require("./filtericeservers"),r=o(require("rtcpeerconnection-shim")),n=require("./getusermedia"),i=require("./getdisplaymedia");function o(e){return e&&e.__esModule?e:{default:e}}function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function a(n){var i=e.detectBrowser(n);if(n.RTCIceGatherer&&(n.RTCIceCandidate||(n.RTCIceCandidate=function(e){return e}),n.RTCSessionDescription||(n.RTCSessionDescription=function(e){return e}),i.version<15025)){var o=Object.getOwnPropertyDescriptor(n.MediaStreamTrack.prototype,"enabled");Object.defineProperty(n.MediaStreamTrack.prototype,"enabled",{set:function(e){o.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}!n.RTCRtpSender||"dtmf"in n.RTCRtpSender.prototype||Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new n.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),n.RTCDtmfSender&&!n.RTCDTMFSender&&(n.RTCDTMFSender=n.RTCDtmfSender);var c=(0,r.default)(n,i.version);n.RTCPeerConnection=function(r){return r&&r.iceServers&&(r.iceServers=(0,t.filterIceServers)(r.iceServers,i.version),e.log("ICE servers after filtering:",r.iceServers)),new c(r)},n.RTCPeerConnection.prototype=c.prototype}function p(e){!e.RTCRtpSender||"replaceTrack"in e.RTCRtpSender.prototype||(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}
},{"../utils":"RsyN","./filtericeservers":"uuCd","rtcpeerconnection-shim":"heG5","./getusermedia":"uWR5","./getdisplaymedia":"zgJ4"}],"OQLX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetUserMedia=n;var e=o(require("../utils"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=t();if(o&&o.has(e))return o.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,o&&o.set(e,r),r}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(t){var o=e.detectBrowser(t),n=t&&t.navigator,i=t&&t.MediaStreamTrack;if(n.getUserMedia=function(t,o,r){e.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(t).then(o,r)},!(o.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var a=function(e,t,o){t in e&&!(o in e)&&(e[o]=e[t],delete e[t])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"===r(e)&&"object"===r(e.audio)&&(e=JSON.parse(JSON.stringify(e)),a(e.audio,"autoGainControl","mozAutoGainControl"),a(e.audio,"noiseSuppression","mozNoiseSuppression")),s(e)},i&&i.prototype.getSettings){var p=i.prototype.getSettings;i.prototype.getSettings=function(){var e=p.apply(this,arguments);return a(e,"mozAutoGainControl","autoGainControl"),a(e,"mozNoiseSuppression","noiseSuppression"),e}}if(i&&i.prototype.applyConstraints){var u=i.prototype.applyConstraints;i.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===r(e)&&(e=JSON.parse(JSON.stringify(e)),a(e,"autoGainControl","mozAutoGainControl"),a(e,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[e])}}}}
},{"../utils":"RsyN"}],"Hsc4":[function(require,module,exports) {
"use strict";function e(e,i){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(a){if(!a||!a.video){var t=new DOMException("getDisplayMedia without video constraints is undefined");return t.name="NotFoundError",t.code=8,Promise.reject(t)}return!0===a.video?a.video={mediaSource:i}:a.video.mediaSource=i,e.navigator.mediaDevices.getUserMedia(a)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetDisplayMedia=e;
},{}],"vPl0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimOnTrack=s,exports.shimPeerConnection=c,exports.shimSenderGetStats=p,exports.shimReceiverGetStats=u,exports.shimRemoveStream=d,exports.shimRTCDataChannel=f,exports.shimAddTransceiver=C,exports.shimGetParameters=y,exports.shimCreateOffer=l,exports.shimCreateAnswer=m,Object.defineProperty(exports,"shimGetUserMedia",{enumerable:!0,get:function(){return t.shimGetUserMedia}}),Object.defineProperty(exports,"shimGetDisplayMedia",{enumerable:!0,get:function(){return n.shimGetDisplayMedia}});var e=o(require("../utils")),t=require("./getusermedia"),n=require("./getdisplaymedia");function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){"object"===a(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function c(t){var n=e.detectBrowser(t);if("object"===a(t)&&(t.RTCPeerConnection||t.mozRTCPeerConnection)){if(!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),n.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var n=t.RTCPeerConnection.prototype[e],r=i({},e,function(){return arguments[0]=new("addIceCandidate"===e?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)});t.RTCPeerConnection.prototype[e]=r[e]}),n.version<68){var r=t.RTCPeerConnection.prototype.addIceCandidate;t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?arguments[0]&&""===arguments[0].candidate?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}var o={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},s=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){var[e,t,r]=arguments;return s.apply(this,[e||null]).then(function(e){if(n.version<53&&!t)try{e.forEach(function(e){e.type=o[e.type]||e.type})}catch(r){if("TypeError"!==r.name)throw r;e.forEach(function(t,n){e.set(n,Object.assign({},t,{type:o[t.type]||t.type}))})}return e}).then(t,r)}}}function p(e){if("object"===a(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&!(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach(function(t){return t._pc=e}),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function u(t){if("object"===a(t)&&t.RTCPeerConnection&&t.RTCRtpSender&&!(t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)){var n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=n.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t}),e.wrapPeerConnectionEvent(t,"track",function(e){return e.receiver._pc=e.srcElement,e}),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function d(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(t){var n=this;e.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(e){e.track&&t.getTracks().includes(e.track)&&n.removeTrack(e)})})}function f(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function C(e){if("object"===a(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach(function(e){if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});var r=t.apply(this,arguments);if(n){var{sender:o}=r,i=o.getParameters();"encodings"in i&&(1!==i.encodings.length||0!==Object.keys(i.encodings[0]).length)||(i.encodings=e.sendEncodings,o.sendEncodings=e.sendEncodings,this.setParametersPromises.push(o.setParameters(i).then(function(){delete o.sendEncodings}).catch(function(){delete o.sendEncodings})))}return r})}}function y(e){if("object"===a(e)&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}}function l(e){if("object"===a(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return t.apply(n,e)}).finally(function(){n.setParametersPromises=[]}):t.apply(this,arguments)}}}function m(e){if("object"===a(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return t.apply(n,e)}).finally(function(){n.setParametersPromises=[]}):t.apply(this,arguments)}}}
},{"../utils":"RsyN","./getusermedia":"OQLX","./getdisplaymedia":"Hsc4"}],"aXmZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimLocalStreamsAPI=n,exports.shimRemoteStreamsAPI=i,exports.shimCallbacksAPI=a,exports.shimGetUserMedia=c,exports.shimConstraints=s,exports.shimRTCIceServerUrls=d,exports.shimTrackEventTransceiver=f,exports.shimCreateOfferLegacy=p,exports.shimAudioContext=u;var e=r(require("../utils"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}return o.default=e,r&&r.set(e,o),o}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e){if("object"===o(e)&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach(function(o){return t.call(r,o,e)}),e.getVideoTracks().forEach(function(o){return t.call(r,o,e)})},e.RTCPeerConnection.prototype.addTrack=function(e){for(var r=this,o=arguments.length,n=new Array(o>1?o-1:0),i=1;i<o;i++)n[i-1]=arguments[i];return n&&n.forEach(function(e){r._localStreams?r._localStreams.includes(e)||r._localStreams.push(e):r._localStreams=[e]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var r=this._localStreams.indexOf(e);if(-1!==r){this._localStreams.splice(r,1);var o=e.getTracks();this.getSenders().forEach(function(e){o.includes(e.track)&&t.removeTrack(e)})}})}}function i(e){if("object"===o(e)&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach(function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var r=new Event("addstream");r.stream=e,t.dispatchEvent(r)}})})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var r=new Event("addstream");r.stream=t,e.dispatchEvent(r)}})}),t.apply(e,arguments)}}}function a(e){if("object"===o(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,r=t.createOffer,n=t.createAnswer,i=t.setLocalDescription,a=t.setRemoteDescription,c=t.addIceCandidate;t.createOffer=function(e,t){var o=arguments.length>=2?arguments[2]:arguments[0],n=r.apply(this,[o]);return t?(n.then(e,t),Promise.resolve()):n},t.createAnswer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],o=n.apply(this,[r]);return t?(o.then(e,t),Promise.resolve()):o};var s=function(e,t,r){var o=i.apply(this,[e]);return r?(o.then(t,r),Promise.resolve()):o};t.setLocalDescription=s,s=function(e,t,r){var o=a.apply(this,[e]);return r?(o.then(t,r),Promise.resolve()):o},t.setRemoteDescription=s,s=function(e,t,r){var o=c.apply(this,[e]);return r?(o.then(t,r),Promise.resolve()):o},t.addIceCandidate=s}}function c(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var r=t.mediaDevices,o=r.getUserMedia.bind(r);t.mediaDevices.getUserMedia=function(e){return o(s(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,r,o){t.mediaDevices.getUserMedia(e).then(r,o)}.bind(t))}function s(t){return t&&void 0!==t.video?Object.assign({},t,{video:e.compactObject(t.video)}):t}function d(t){if(t.RTCPeerConnection){var r=t.RTCPeerConnection;t.RTCPeerConnection=function(t,o){if(t&&t.iceServers){for(var n=[],i=0;i<t.iceServers.length;i++){var a=t.iceServers[i];!a.hasOwnProperty("urls")&&a.hasOwnProperty("url")?(e.deprecated("RTCIceServer.url","RTCIceServer.urls"),(a=JSON.parse(JSON.stringify(a))).urls=a.url,delete a.url,n.push(a)):n.push(t.iceServers[i])}t.iceServers=n}return new r(t,o)},t.RTCPeerConnection.prototype=r.prototype,"generateCertificate"in r&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get:function(){return r.generateCertificate}})}}function f(e){"object"===o(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function p(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var r=this.getTransceivers().find(function(e){return"audio"===e.receiver.track.kind});!1===e.offerToReceiveAudio&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveAudio||r||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var o=this.getTransceivers().find(function(e){return"video"===e.receiver.track.kind});!1===e.offerToReceiveVideo&&o?"sendrecv"===o.direction?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":"recvonly"===o.direction&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):!0!==e.offerToReceiveVideo||o||this.addTransceiver("video")}return t.apply(this,arguments)}}function u(e){"object"!==o(e)||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}
},{"../utils":"RsyN"}],"WlzA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimRTCIceCandidate=a,exports.shimMaxMessageSize=c,exports.shimSendThrowTypeError=s,exports.shimConnectionState=p,exports.removeAllowExtmapMixed=u;var e=r(require("sdp")),t=o(require("./utils"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}return o.default=e,t&&t.set(e,o),o}function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(n){if(n.RTCIceCandidate&&!(n.RTCIceCandidate&&"foundation"in n.RTCIceCandidate.prototype)){var o=n.RTCIceCandidate;n.RTCIceCandidate=function(t){if("object"===i(t)&&t.candidate&&0===t.candidate.indexOf("a=")&&((t=JSON.parse(JSON.stringify(t))).candidate=t.candidate.substr(2)),t.candidate&&t.candidate.length){var n=new o(t),r=e.default.parseCandidate(t.candidate),a=Object.assign(n,r);return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new o(t)},n.RTCIceCandidate.prototype=o.prototype,t.wrapPeerConnectionEvent(n,"icecandidate",function(e){return e.candidate&&Object.defineProperty(e,"candidate",{value:new n.RTCIceCandidate(e.candidate),writable:"false"}),e})}}function c(n){if(n.RTCPeerConnection){var o=t.detectBrowser(n);"sctp"in n.RTCPeerConnection.prototype||Object.defineProperty(n.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var r=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===o.browser&&o.version>=76){var{sdpSemantics:t}=this.getConfiguration();"plan-b"===t&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(t){if(!t||!t.sdp)return!1;var n=e.default.splitSections(t.sdp);return n.shift(),n.some(function(t){var n=e.default.parseMLine(t);return n&&"application"===n.kind&&-1!==n.protocol.indexOf("SCTP")})}(arguments[0])){var n,i=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!=n?-1:n}(arguments[0]),a=(p=i,u=65536,"firefox"===o.browser&&(u=o.version<57?-1===p?16384:2147483637:o.version<60?57===o.version?65535:65536:2147483637),u),c=function(t,n){var r=65536;"firefox"===o.browser&&57===o.version&&(r=65535);var i=e.default.matchPrefix(t.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===o.browser&&-1!==n&&(r=2147483637),r}(arguments[0],i);n=0===a&&0===c?Number.POSITIVE_INFINITY:0===a||0===c?Math.max(a,c):Math.min(a,c);var s={};Object.defineProperty(s,"maxMessageSize",{get:function(){return n}}),this._sctp=s}var p,u;return r.apply(this,arguments)}}}function s(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=n.apply(this,arguments);return o(e,this),e},t.wrapPeerConnectionEvent(e,"datachannel",function(e){return o(e.channel,e.target),e})}function o(e,t){var n=e.send;e.send=function(){var o=arguments[0],r=o.length||o.size||o.byteLength;if("open"===e.readyState&&t.sctp&&r>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}}function p(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}}function u(e){if(e.RTCPeerConnection){var n=t.detectBrowser(e);if(!("chrome"===n.browser&&n.version>=71||"safari"===n.browser&&n.version>=605)){var o=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){return e&&e.sdp&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")&&(e.sdp=e.sdp.split("\n").filter(function(e){return"a=extmap-allow-mixed"!==e.trim()}).join("\n")),o.apply(this,arguments)}}}}
},{"sdp":"jIWI","./utils":"RsyN"}],"elb5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.adapterFactory=o;var e=m(require("./utils")),r=m(require("./chrome/chrome_shim")),i=m(require("./edge/edge_shim")),s=m(require("./firefox/firefox_shim")),t=m(require("./safari/safari_shim")),a=m(require("./common_shim"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function m(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n();if(r&&r.has(e))return r.get(e);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var a=s?Object.getOwnPropertyDescriptor(e,t):null;a&&(a.get||a.set)?Object.defineProperty(i,t,a):i[t]=e[t]}return i.default=e,r&&r.set(e,i),i}function o(){var{window:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},o=e.log,h=e.detectBrowser(n),d={browserDetails:h,commonShim:a,extractVersion:e.extractVersion,disableLog:e.disableLog,disableWarnings:e.disableWarnings};switch(h.browser){case"chrome":if(!r||!r.shimPeerConnection||!m.shimChrome)return o("Chrome shim is not included in this adapter release."),d;if(null===h.version)return o("Chrome shim can not determine version, not shimming."),d;o("adapter.js shimming chrome."),d.browserShim=r,r.shimGetUserMedia(n),r.shimMediaStream(n),r.shimPeerConnection(n),r.shimOnTrack(n),r.shimAddTrackRemoveTrack(n),r.shimGetSendersWithDtmf(n),r.shimGetStats(n),r.shimSenderReceiverGetStats(n),r.fixNegotiationNeeded(n),a.shimRTCIceCandidate(n),a.shimConnectionState(n),a.shimMaxMessageSize(n),a.shimSendThrowTypeError(n),a.removeAllowExtmapMixed(n);break;case"firefox":if(!s||!s.shimPeerConnection||!m.shimFirefox)return o("Firefox shim is not included in this adapter release."),d;o("adapter.js shimming firefox."),d.browserShim=s,s.shimGetUserMedia(n),s.shimPeerConnection(n),s.shimOnTrack(n),s.shimRemoveStream(n),s.shimSenderGetStats(n),s.shimReceiverGetStats(n),s.shimRTCDataChannel(n),s.shimAddTransceiver(n),s.shimGetParameters(n),s.shimCreateOffer(n),s.shimCreateAnswer(n),a.shimRTCIceCandidate(n),a.shimConnectionState(n),a.shimMaxMessageSize(n),a.shimSendThrowTypeError(n);break;case"edge":if(!i||!i.shimPeerConnection||!m.shimEdge)return o("MS edge shim is not included in this adapter release."),d;o("adapter.js shimming edge."),d.browserShim=i,i.shimGetUserMedia(n),i.shimGetDisplayMedia(n),i.shimPeerConnection(n),i.shimReplaceTrack(n),a.shimMaxMessageSize(n),a.shimSendThrowTypeError(n);break;case"safari":if(!t||!m.shimSafari)return o("Safari shim is not included in this adapter release."),d;o("adapter.js shimming safari."),d.browserShim=t,t.shimRTCIceServerUrls(n),t.shimCreateOfferLegacy(n),t.shimCallbacksAPI(n),t.shimLocalStreamsAPI(n),t.shimRemoteStreamsAPI(n),t.shimTrackEventTransceiver(n),t.shimGetUserMedia(n),t.shimAudioContext(n),a.shimRTCIceCandidate(n),a.shimMaxMessageSize(n),a.shimSendThrowTypeError(n),a.removeAllowExtmapMixed(n);break;default:o("Unsupported browser!")}return d}
},{"./utils":"RsyN","./chrome/chrome_shim":"RNlo","./edge/edge_shim":"F7IB","./firefox/firefox_shim":"vPl0","./safari/safari_shim":"aXmZ","./common_shim":"WlzA"}],"WzOL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./adapter_factory.js"),t=(0,e.adapterFactory)({window:"undefined"==typeof window?void 0:window}),d=t;exports.default=d;
},{"./adapter_factory.js":"elb5"}],"K1mi":[function(require,module,exports) {
"use strict";var e,t="object"==typeof Reflect?Reflect:null,n=t&&"function"==typeof t.apply?t.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};function r(e){console&&console.warn&&console.warn(e)}e=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}module.exports=o,module.exports.once=m,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function f(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function v(e,t,n,i){var o,s,v;if(u(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),v=s[t]),void 0===v)v=s[t]=n,++e._eventsCount;else if("function"==typeof v?v=s[t]=i?[n,v]:[v,n]:i?v.unshift(n):v.push(n),(o=f(e))>0&&v.length>o&&!v.warned){v.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+v.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=v.length,r(l)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=l.bind(r);return i.listener=n,r.wrapFn=i,i}function a(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?d(i):p(i,i.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function y(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function d(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function m(e,t){return new Promise(function(n,r){function i(){void 0!==o&&e.removeListener("error",o),n([].slice.call(arguments))}var o;"error"!==t&&(o=function(n){e.removeListener(t,i),r(n)},e.once("error",o)),e.once(t,i)})}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return f(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var u=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw u.context=s,u}var f=o[e];if(void 0===f)return!1;if("function"==typeof f)n(f,this,t);else{var v=f.length,l=p(f,v);for(r=0;r<v;++r)n(l[r],this,t)}return!0},o.prototype.addListener=function(e,t){return v(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return v(this,e,t,!0)},o.prototype.once=function(e,t){return u(t),this.on(e,c(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,c(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,s;if(u(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():y(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return a(this,e,!0)},o.prototype.rawListeners=function(e){return a(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},o.prototype.listenerCount=h,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]};
},{}],"V8M7":[function(require,module,exports) {
var r=require("../util");function n(){}function t(r,n){if(n&&null!=r)switch(n.type){case"structure":return e(r,n);case"map":return i(r,n);case"list":return u(r,n);default:return a(r,n)}}function e(n,e){var u={};return r.each(n,function(r,n){var i=e.members[r];if(i){if("body"!==i.location)return;var a=i.isLocationName?i.name:r,o=t(n,i);void 0!==o&&(u[a]=o)}}),u}function u(n,e){var u=[];return r.arrayEach(n,function(r){var n=t(r,e.member);void 0!==n&&u.push(n)}),u}function i(n,e){var u={};return r.each(n,function(r,n){var i=t(n,e.value);void 0!==i&&(u[r]=i)}),u}function a(r,n){return n.toWireFormat(r)}n.prototype.build=function(r,n){return JSON.stringify(t(r,n))},module.exports=n;
},{"../util":"Srp3"}],"gAi9":[function(require,module,exports) {
var r=require("../util");function n(){}function e(r,n){if(n&&void 0!==r)switch(n.type){case"structure":return t(r,n);case"map":return a(r,n);case"list":return u(r,n);default:return i(r,n)}}function t(n,t){if(null!=n){var u={},a=t.members;return r.each(a,function(r,t){var a=t.isLocationName?t.name:r;if(Object.prototype.hasOwnProperty.call(n,a)){var i=e(n[a],t);void 0!==i&&(u[r]=i)}}),u}}function u(n,t){if(null!=n){var u=[];return r.arrayEach(n,function(r){var n=e(r,t.member);void 0===n?u.push(null):u.push(n)}),u}}function a(n,t){if(null!=n){var u={};return r.each(n,function(r,n){var a=e(n,t.value);u[r]=void 0===a?null:a}),u}}function i(r,n){return n.toType(r)}n.prototype.parse=function(r,n){return e(JSON.parse(r),n)},module.exports=n;
},{"../util":"Srp3"}],"SEae":[function(require,module,exports) {
var e=require("../util"),r=require("../core");function t(e){if(!e.service.config.hostPrefixEnabled)return e;var r=e.service.api.operations[e.operation];if(n(e))return e;if(r.endpoint&&r.endpoint.hostPrefix){var t=o(r.endpoint.hostPrefix,e.params,r.input);i(e.httpRequest.endpoint,t),a(e.httpRequest.endpoint.hostname)}return e}function n(r){var t=r.service.api,n=t.operations[r.operation],o=t.endpointOperation&&t.endpointOperation===e.string.lowerFirst(n.name);return"NULL"!==n.endpointDiscoveryRequired||!0===o}function o(r,t,n){return e.each(n.members,function(n,o){if(!0===o.hostLabel){if("string"!=typeof t[n]||""===t[n])throw e.error(new Error,{message:"Parameter "+n+" should be a non-empty string.",code:"InvalidParameter"});var i=new RegExp("\\{"+n+"\\}","g");r=r.replace(i,t[n])}}),r}function i(e,r){e.host&&(e.host=r+e.host),e.hostname&&(e.hostname=r+e.hostname)}function a(t){var n=t.split("."),o=/^[a-zA-Z0-9]{1}$|^[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9]$/;e.arrayEach(n,function(t){if(!t.length||t.length<1||t.length>63)throw e.error(new Error,{code:"ValidationError",message:"Hostname label length should be between 1 to 63 characters, inclusive."});if(!o.test(t))throw r.util.error(new Error,{code:"ValidationError",message:t+" is not hostname compatible."})})}module.exports={populateHostPrefix:t};
},{"../util":"Srp3","../core":"hd5g"}],"ko2o":[function(require,module,exports) {
var e=require("../util"),t=require("../json/builder"),r=require("../json/parser"),s=require("./helpers").populateHostPrefix;function o(e){var r=e.httpRequest,o=e.service.api,a=o.targetPrefix+"."+o.operations[e.operation].name,n=o.jsonVersion||"1.0",i=o.operations[e.operation].input,p=new t;1===n&&(n="1.0"),r.body=p.build(e.params||{},i),r.headers["Content-Type"]="application/x-amz-json-"+n,r.headers["X-Amz-Target"]=a,s(e)}function a(t){var r={},s=t.httpResponse;if(r.code=s.headers["x-amzn-errortype"]||"UnknownError","string"==typeof r.code&&(r.code=r.code.split(":")[0]),s.body.length>0)try{var o=JSON.parse(s.body.toString());(o.__type||o.code)&&(r.code=(o.__type||o.code).split("#").pop()),"RequestEntityTooLarge"===r.code?r.message="Request body must be less than 1 MB":r.message=o.message||o.Message||null}catch(o){r.statusCode=s.statusCode,r.message=s.statusMessage}else r.statusCode=s.statusCode,r.message=s.statusCode.toString();t.error=e.error(new Error,r)}function n(e){var t=e.httpResponse.body.toString()||"{}";if(!1===e.request.service.config.convertResponseTypes)e.data=JSON.parse(t);else{var s=e.request.service.api.operations[e.request.operation].output||{},o=new r;e.data=o.parse(t,s)}}module.exports={buildRequest:o,extractError:a,extractData:n};
},{"../util":"Srp3","../json/builder":"V8M7","../json/parser":"gAi9","./helpers":"SEae"}],"hEfR":[function(require,module,exports) {
var e=require("../util");function n(){}function t(e){return e.isQueryName||"ec2"!==e.api.protocol?e.name:e.name[0].toUpperCase()+e.name.substr(1)}function a(n,a,r,i){e.each(r.members,function(e,r){var u=a[e];if(null!=u){var l=t(r);o(l=n?n+"."+l:l,u,r,i)}})}function r(n,t,a,r){var i=1;e.each(t,function(e,t){var u=(a.flattened?".":".entry.")+i+++".",l=u+(a.key.name||"key"),c=u+(a.value.name||"value");o(n+l,e,a.key,r),o(n+c,t,a.value,r)})}function i(n,a,r,i){var u=r.member||{};0!==a.length?e.arrayEach(a,function(e,a){var l="."+(a+1);if("ec2"===r.api.protocol)l+="";else if(r.flattened){if(u.name){var c=n.split(".");c.pop(),c.push(t(u)),n=c.join(".")}}else l="."+(u.name?u.name:"member")+l;o(n+l,e,u,i)}):i.call(this,n,null)}function o(e,n,t,o){null!=n&&("structure"===t.type?a(e,n,t,o):"list"===t.type?i(e,n,t,o):"map"===t.type?r(e,n,t,o):o(e,t.toWireFormat(n).toString()))}n.prototype.serialize=function(e,n,t){a("",e,n,t)},module.exports=n;
},{"../util":"Srp3"}],"pQS9":[function(require,module,exports) {
var r=require("../util").memoizedProperty;function t(t,e,o,i){r(this,i(t),function(){return o(t,e)})}function e(r,e,o,i,n){i=i||String;for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(t.call(this,u,r[u],o,i),n&&n(u,r[u]))}module.exports=e;
},{"../util":"Srp3"}],"EeVB":[function(require,module,exports) {
var t=require("./collection"),e=require("../util");function i(t,i,s){null!=s&&e.property.apply(this,arguments)}function s(t,i){t.constructor.prototype[i]||e.memoizedProperty.apply(this,arguments)}function r(t,e,s){e=e||{},i(this,"shape",t.shape),i(this,"api",e.api,!1),i(this,"type",t.type),i(this,"enum",t.enum),i(this,"min",t.min),i(this,"max",t.max),i(this,"pattern",t.pattern),i(this,"location",t.location||this.location||"body"),i(this,"name",this.name||t.xmlName||t.queryName||t.locationName||s),i(this,"isStreaming",t.streaming||this.isStreaming||!1),i(this,"requiresLength",t.requiresLength,!1),i(this,"isComposite",t.isComposite||!1),i(this,"isShape",!0,!1),i(this,"isQueryName",Boolean(t.queryName),!1),i(this,"isLocationName",Boolean(t.locationName),!1),i(this,"isIdempotent",!0===t.idempotencyToken),i(this,"isJsonValue",!0===t.jsonvalue),i(this,"isSensitive",!0===t.sensitive||t.prototype&&!0===t.prototype.sensitive),i(this,"isEventStream",Boolean(t.eventstream),!1),i(this,"isEvent",Boolean(t.event),!1),i(this,"isEventPayload",Boolean(t.eventpayload),!1),i(this,"isEventHeader",Boolean(t.eventheader),!1),i(this,"isTimestampFormatSet",Boolean(t.timestampFormat)||t.prototype&&!0===t.prototype.isTimestampFormatSet,!1),i(this,"endpointDiscoveryId",Boolean(t.endpointdiscoveryid),!1),i(this,"hostLabel",Boolean(t.hostLabel),!1),e.documentation&&(i(this,"documentation",t.documentation),i(this,"documentationUrl",t.documentationUrl)),t.xmlAttribute&&i(this,"isXmlAttribute",t.xmlAttribute||!1),i(this,"defaultValue",null),this.toWireFormat=function(t){return null==t?"":t},this.toType=function(t){return t}}function n(t){r.apply(this,arguments),i(this,"isComposite",!0),t.flattened&&i(this,"flattened",t.flattened||!1)}function a(e,a){var o=this,m=null,p=!this.isShape;n.apply(this,arguments),p&&(i(this,"defaultValue",function(){return{}}),i(this,"members",{}),i(this,"memberNames",[]),i(this,"required",[]),i(this,"isRequired",function(){return!1})),e.members&&(i(this,"members",new t(e.members,a,function(t,e){return r.create(e,a,t)})),s(this,"memberNames",function(){return e.xmlOrder||Object.keys(e.members)}),e.event&&(s(this,"eventPayloadMemberName",function(){for(var t=o.members,e=o.memberNames,i=0,s=e.length;i<s;i++)if(t[e[i]].isEventPayload)return e[i]}),s(this,"eventHeaderMemberNames",function(){for(var t=o.members,e=o.memberNames,i=[],s=0,r=e.length;s<r;s++)t[e[s]].isEventHeader&&i.push(e[s]);return i}))),e.required&&(i(this,"required",e.required),i(this,"isRequired",function(t){if(!m){m={};for(var i=0;i<e.required.length;i++)m[e.required[i]]=!0}return m[t]},!1,!0)),i(this,"resultWrapper",e.resultWrapper||null),e.payload&&i(this,"payload",e.payload),"string"==typeof e.xmlNamespace?i(this,"xmlNamespaceUri",e.xmlNamespace):"object"==typeof e.xmlNamespace&&(i(this,"xmlNamespacePrefix",e.xmlNamespace.prefix),i(this,"xmlNamespaceUri",e.xmlNamespace.uri))}function o(t,e){var a=this,o=!this.isShape;if(n.apply(this,arguments),o&&i(this,"defaultValue",function(){return[]}),t.member&&s(this,"member",function(){return r.create(t.member,e)}),this.flattened){var m=this.name;s(this,"name",function(){return a.member.name||m})}}function m(t,e){var a=!this.isShape;n.apply(this,arguments),a&&(i(this,"defaultValue",function(){return{}}),i(this,"key",r.create({type:"string"},e)),i(this,"value",r.create({type:"string"},e))),t.key&&s(this,"key",function(){return r.create(t.key,e)}),t.value&&s(this,"value",function(){return r.create(t.value,e)})}function p(t){var s=this;if(r.apply(this,arguments),t.timestampFormat)i(this,"timestampFormat",t.timestampFormat);else if(s.isTimestampFormatSet&&this.timestampFormat)i(this,"timestampFormat",this.timestampFormat);else if("header"===this.location)i(this,"timestampFormat","rfc822");else if("querystring"===this.location)i(this,"timestampFormat","iso8601");else if(this.api)switch(this.api.protocol){case"json":case"rest-json":i(this,"timestampFormat","unixTimestamp");break;case"rest-xml":case"query":case"ec2":i(this,"timestampFormat","iso8601")}this.toType=function(t){return null==t?null:"function"==typeof t.toUTCString?t:"string"==typeof t||"number"==typeof t?e.date.parseTimestamp(t):null},this.toWireFormat=function(t){return e.date.format(t,s.timestampFormat)}}function u(){r.apply(this,arguments);var t=["rest-xml","query","ec2"];this.toType=function(e){return e=this.api&&t.indexOf(this.api.protocol)>-1?e||"":e,this.isJsonValue?JSON.parse(e):e&&"function"==typeof e.toString?e.toString():e},this.toWireFormat=function(t){return this.isJsonValue?JSON.stringify(t):t}}function h(){r.apply(this,arguments),this.toType=function(t){return null==t?null:parseFloat(t)},this.toWireFormat=this.toType}function l(){r.apply(this,arguments),this.toType=function(t){return null==t?null:parseInt(t,10)},this.toWireFormat=this.toType}function c(){r.apply(this,arguments),this.toType=function(t){var i=e.base64.decode(t);if(this.isSensitive&&e.isNode()&&"function"==typeof e.Buffer.alloc){var s=e.Buffer.alloc(i.length,i);i.fill(0),i=s}return i},this.toWireFormat=e.base64.encode}function f(){c.apply(this,arguments)}function y(){r.apply(this,arguments),this.toType=function(t){return"boolean"==typeof t?t:null==t?null:"true"===t}}r.normalizedTypes={character:"string",double:"float",long:"integer",short:"integer",biginteger:"integer",bigdecimal:"float",blob:"binary"},r.types={structure:a,list:o,map:m,boolean:y,timestamp:p,float:h,integer:l,string:u,base64:f,binary:c},r.resolve=function(t,e){if(t.shape){var i=e.api.shapes[t.shape];if(!i)throw new Error("Cannot find shape reference: "+t.shape);return i}return null},r.create=function(t,e,i){if(t.isShape)return t;var s=r.resolve(t,e);if(s){var n=Object.keys(t);e.documentation||(n=n.filter(function(t){return!t.match(/documentation/)}));var a=function(){s.constructor.call(this,t,e,i)};return a.prototype=s,new a}t.type||(t.members?t.type="structure":t.member?t.type="list":t.key?t.type="map":t.type="string");var o=t.type;if(r.normalizedTypes[t.type]&&(t.type=r.normalizedTypes[t.type]),r.types[t.type])return new r.types[t.type](t,e,i);throw new Error("Unrecognized shape type: "+o)},r.shapes={StructureShape:a,ListShape:o,MapShape:m,StringShape:u,BooleanShape:y,Base64Shape:f},module.exports=r;
},{"./collection":"pQS9","../util":"Srp3"}],"eJRP":[function(require,module,exports) {
var e=require("../core"),r=require("../util"),t=require("../query/query_param_serializer"),s=require("../model/shape"),a=require("./helpers").populateHostPrefix;function o(e){var s=e.service.api.operations[e.operation],o=e.httpRequest;o.headers["Content-Type"]="application/x-www-form-urlencoded; charset=utf-8",o.params={Version:e.service.api.apiVersion,Action:s.name},(new t).serialize(e.params,s.input,function(e,r){o.params[e]=r}),o.body=r.queryParamsToString(o.params),a(e)}function p(t){var s,a=t.httpResponse.body.toString();if(a.match("<UnknownOperationException"))s={Code:"UnknownOperation",Message:"Unknown operation "+t.request.operation};else try{s=(new e.XML.Parser).parse(a)}catch(o){s={Code:t.httpResponse.statusCode,Message:t.httpResponse.statusMessage}}s.requestId&&!t.requestId&&(t.requestId=s.requestId),s.Errors&&(s=s.Errors),s.Error&&(s=s.Error),s.Code?t.error=r.error(new Error,{code:s.Code,message:s.Message}):t.error=r.error(new Error,{code:t.httpResponse.statusCode,message:null})}function u(t){var a=t.request,o=a.service.api.operations[a.operation].output||{},p=o;if(p.resultWrapper){var u=s.create({type:"structure"});u.members[p.resultWrapper]=o,u.memberNames=[p.resultWrapper],r.property(o,"name",o.resultWrapper),o=u}var n=new e.XML.Parser;if(o&&o.members&&!o.members._XAMZRequestId){var i=s.create({type:"string"},{api:{protocol:"query"}},"requestId");o.members._XAMZRequestId=i}var d=n.parse(t.httpResponse.body.toString(),o);t.requestId=d._XAMZRequestId||d.requestId,d._XAMZRequestId&&delete d._XAMZRequestId,p.resultWrapper&&d[p.resultWrapper]&&(r.update(d,d[p.resultWrapper]),delete d[p.resultWrapper]),t.data=d}module.exports={buildRequest:o,extractError:p,extractData:u};
},{"../core":"hd5g","../util":"Srp3","../query/query_param_serializer":"hEfR","../model/shape":"EeVB","./helpers":"SEae"}],"xf3G":[function(require,module,exports) {
var e=require("../util"),t=require("./helpers").populateHostPrefix;function a(e){e.httpRequest.method=e.service.api.operations[e.operation].httpMethod}function r(t,a,r,n){var i=[t,a].join("/");i=i.replace(/\/+/g,"/");var o={},s=!1;if(e.each(r.members,function(t,a){var r=n[t];if(null!=r)if("uri"===a.location){var p=new RegExp("\\{"+a.name+"(\\+)?\\}");i=i.replace(p,function(t,a){return(a?e.uriEscapePath:e.uriEscape)(String(r))})}else"querystring"===a.location&&(s=!0,"list"===a.type?o[a.name]=r.map(function(t){return e.uriEscape(a.member.toWireFormat(t).toString())}):"map"===a.type?e.each(r,function(t,a){Array.isArray(a)?o[t]=a.map(function(t){return e.uriEscape(String(t))}):o[t]=e.uriEscape(String(a))}):o[a.name]=e.uriEscape(a.toWireFormat(r).toString()))}),s){i+=i.indexOf("?")>=0?"&":"?";var p=[];e.arrayEach(Object.keys(o).sort(),function(t){Array.isArray(o[t])||(o[t]=[o[t]]);for(var a=0;a<o[t].length;a++)p.push(e.uriEscape(String(t))+"="+o[t][a])}),i+=p.join("&")}return i}function n(e){var t=e.service.api.operations[e.operation],a=t.input,n=r(e.httpRequest.endpoint.path,t.httpPath,a,e.params);e.httpRequest.path=n}function i(t){var a=t.service.api.operations[t.operation];e.each(a.input.members,function(a,r){var n=t.params[a];null!=n&&("headers"===r.location&&"map"===r.type?e.each(n,function(e,a){t.httpRequest.headers[r.name+e]=a}):"header"===r.location&&(n=r.toWireFormat(n).toString(),r.isJsonValue&&(n=e.base64.encode(n)),t.httpRequest.headers[r.name]=n))})}function o(e){a(e),n(e),i(e),t(e)}function s(){}function p(t){var a=t.request,r={},n=t.httpResponse,i=a.service.api.operations[a.operation].output,o={};e.each(n.headers,function(e,t){o[e.toLowerCase()]=t}),e.each(i.members,function(t,a){var i=(a.name||t).toLowerCase();if("headers"===a.location&&"map"===a.type){r[t]={};var s=a.isLocationName?a.name:"",p=new RegExp("^"+s+"(.+)","i");e.each(n.headers,function(e,a){var n=e.match(p);null!==n&&(r[t][n[1]]=a)})}else if("header"===a.location){if(void 0!==o[i]){var u=a.isJsonValue?e.base64.decode(o[i]):o[i];r[t]=a.toType(u)}}else"statusCode"===a.location&&(r[t]=parseInt(n.statusCode,10))}),t.data=r}module.exports={buildRequest:o,extractError:s,extractData:p,generateURI:r};
},{"../util":"Srp3","./helpers":"SEae"}],"tywJ":[function(require,module,exports) {
var e=require("../util"),t=require("./rest"),a=require("./json"),r=require("../json/builder"),i=require("../json/parser");function o(e){var t=new r,a=e.service.api.operations[e.operation].input;if(a.payload){var i,o=a.members[a.payload];if(void 0===(i=e.params[a.payload]))return;"structure"===o.type?(e.httpRequest.body=t.build(i,o),p(e)):(e.httpRequest.body=i,("binary"===o.type||o.isStreaming)&&p(e,!0))}else{var s=t.build(e.params,a);"{}"===s&&"GET"===e.httpRequest.method||(e.httpRequest.body=s),p(e)}}function p(e,t){e.service.api.operations[e.operation].input;if(!e.httpRequest.headers["Content-Type"]){var a=t?"binary/octet-stream":"application/json";e.httpRequest.headers["Content-Type"]=a}}function s(e){t.buildRequest(e),["HEAD","DELETE"].indexOf(e.httpRequest.method)<0&&o(e)}function n(e){a.extractError(e)}function u(r){t.extractData(r);var o=r.request,p=o.service.api.operations[o.operation],s=o.service.api.operations[o.operation].output||{};p.hasEventOutput;if(s.payload){var n=s.members[s.payload],u=r.httpResponse.body;if(n.isEventStream)d=new i,r.data[payload]=e.createEventStream(2===AWS.HttpClient.streamsApiVersion?r.httpResponse.stream:u,d,n);else if("structure"===n.type||"list"===n.type){var d=new i;r.data[s.payload]=d.parse(u,n)}else"binary"===n.type||n.isStreaming?r.data[s.payload]=u:r.data[s.payload]=n.toType(u)}else{var y=r.data;a.extractData(r),r.data=e.merge(y,r.data)}}module.exports={buildRequest:s,extractError:n,extractData:u};
},{"../util":"Srp3","./rest":"xf3G","./json":"ko2o","../json/builder":"V8M7","../json/parser":"gAi9"}],"BPdO":[function(require,module,exports) {
var e=require("../core"),t=require("../util"),r=require("./rest");function s(r){var s=r.service.api.operations[r.operation].input,a=new e.XML.Builder,o=r.params,n=s.payload;if(n){var p=s.members[n];if(void 0===(o=o[n]))return;if("structure"===p.type){var i=p.name;r.httpRequest.body=a.toXML(o,p,i,!0)}else r.httpRequest.body=o}else r.httpRequest.body=a.toXML(o,s,s.name||s.shape||t.string.upperFirst(r.operation)+"Request")}function a(e){r.buildRequest(e),["GET","HEAD"].indexOf(e.httpRequest.method)<0&&s(e)}function o(s){var a;r.extractError(s);try{a=(new e.XML.Parser).parse(s.httpResponse.body.toString())}catch(o){a={Code:s.httpResponse.statusCode,Message:s.httpResponse.statusMessage}}a.Errors&&(a=a.Errors),a.Error&&(a=a.Error),a.Code?s.error=t.error(new Error,{code:a.Code,message:a.Message}):s.error=t.error(new Error,{code:s.httpResponse.statusCode,message:null})}function n(s){var a;r.extractData(s);var o=s.request,n=s.httpResponse.body,p=o.service.api.operations[o.operation],i=p.output,u=(p.hasEventOutput,i.payload);if(u){var d=i.members[u];d.isEventStream?(a=new e.XML.Parser,s.data[u]=t.createEventStream(2===e.HttpClient.streamsApiVersion?s.httpResponse.stream:s.httpResponse.body,a,d)):"structure"===d.type?(a=new e.XML.Parser,s.data[u]=a.parse(n.toString(),d)):"binary"===d.type||d.isStreaming?s.data[u]=n:s.data[u]=d.toType(n)}else if(n.length>0){var c=(a=new e.XML.Parser).parse(n.toString(),i);t.update(s.data,c)}}module.exports={buildRequest:a,extractError:o,extractData:n};
},{"../core":"hd5g","../util":"Srp3","./rest":"xf3G"}],"jWDF":[function(require,module,exports) {
function e(e){return e.replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}module.exports={escapeAttribute:e};
},{}],"Lycc":[function(require,module,exports) {
var t=require("./escape-attribute").escapeAttribute;function e(t,e){void 0===e&&(e=[]),this.name=t,this.children=e,this.attributes={}}e.prototype.addAttribute=function(t,e){return this.attributes[t]=e,this},e.prototype.addChildNode=function(t){return this.children.push(t),this},e.prototype.removeAttribute=function(t){return delete this.attributes[t],this},e.prototype.toString=function(){for(var e=Boolean(this.children.length),i="<"+this.name,r=this.attributes,n=0,o=Object.keys(r);n<o.length;n++){var s=o[n],u=r[s];null!=u&&(i+=" "+s+'="'+t(""+u)+'"')}return i+(e?">"+this.children.map(function(t){return t.toString()}).join("")+"</"+this.name+">":"/>")},module.exports={XmlNode:e};
},{"./escape-attribute":"jWDF"}],"f0sP":[function(require,module,exports) {
function e(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}module.exports={escapeElement:e};
},{}],"NGBk":[function(require,module,exports) {
var e=require("./escape-element").escapeElement;function t(e){this.value=e}t.prototype.toString=function(){return e(""+this.value)},module.exports={XmlText:t};
},{"./escape-element":"f0sP"}],"uCK8":[function(require,module,exports) {
var e=require("../util"),a=require("./xml-node").XmlNode,r=require("./xml-text").XmlText;function n(){}function t(e,a,r){switch(r.type){case"structure":return i(e,a,r);case"map":return m(e,a,r);case"list":return d(e,a,r);default:return l(e,a,r)}}function i(r,n,i){e.arrayEach(i.memberNames,function(e){var m=i.members[e];if("body"===m.location){var d=n[e],l=m.name;if(null!=d)if(m.isXmlAttribute)r.addAttribute(l,d);else if(m.flattened)t(r,d,m);else{var u=new a(l);r.addChildNode(u),o(u,m),t(u,d,m)}}})}function m(r,n,i){var m=i.key.name||"key",d=i.value.name||"value";e.each(n,function(e,n){var l=new a(i.flattened?i.name:"entry");r.addChildNode(l);var o=new a(m),u=new a(d);l.addChildNode(o),l.addChildNode(u),t(o,e,i.key),t(u,n,i.value)})}function d(r,n,i){i.flattened?e.arrayEach(n,function(e){var n=i.member.name||i.name,m=new a(n);r.addChildNode(m),t(m,e,i.member)}):e.arrayEach(n,function(e){var n=i.member.name||"member",m=new a(n);r.addChildNode(m),t(m,e,i.member)})}function l(e,a,n){e.addChildNode(new r(n.toWireFormat(a)))}function o(e,a,r){var n,t="xmlns";a.xmlNamespaceUri?(n=a.xmlNamespaceUri,a.xmlNamespacePrefix&&(t+=":"+a.xmlNamespacePrefix)):r&&a.api.xmlNamespaceUri&&(n=a.api.xmlNamespaceUri),n&&e.addAttribute(t,n)}n.prototype.toXML=function(e,r,n,i){var m=new a(n);return o(m,r,!0),t(m,e,r),m.children.length>0||i?m.toString():""},module.exports=n;
},{"../util":"Srp3","./xml-node":"Lycc","./xml-text":"NGBk"}],"TZKf":[function(require,module,exports) {
var t=require("./shape"),e=require("../util"),r=e.property,n=e.memoizedProperty;function i(e,i,o){var s=this;o=o||{},r(this,"name",i.name||e),r(this,"api",o.api,!1),i.http=i.http||{},r(this,"endpoint",i.endpoint),r(this,"httpMethod",i.http.method||"POST"),r(this,"httpPath",i.http.requestUri||"/"),r(this,"authtype",i.authtype||""),r(this,"endpointDiscoveryRequired",i.endpointdiscovery?i.endpointdiscovery.required?"REQUIRED":"OPTIONAL":"NULL"),n(this,"input",function(){return i.input?t.create(i.input,o):new t.create({type:"structure"},o)}),n(this,"output",function(){return i.output?t.create(i.output,o):new t.create({type:"structure"},o)}),n(this,"errors",function(){var e=[];if(!i.errors)return null;for(var r=0;r<i.errors.length;r++)e.push(t.create(i.errors[r],o));return e}),n(this,"paginator",function(){return o.api.paginators[e]}),o.documentation&&(r(this,"documentation",i.documentation),r(this,"documentationUrl",i.documentationUrl)),n(this,"idempotentMembers",function(){var t=[],e=s.input,r=e.members;if(!e.members)return t;for(var n in r)r.hasOwnProperty(n)&&!0===r[n].isIdempotent&&t.push(n);return t}),n(this,"hasEventOutput",function(){return u(s.output)})}function u(t){var e=t.members,r=t.payload;if(!t.members)return!1;if(r)return e[r].isEventStream;for(var n in e)if(!e.hasOwnProperty(n)&&!0===e[n].isEventStream)return!0;return!1}module.exports=i;
},{"./shape":"EeVB","../util":"Srp3"}],"ncgO":[function(require,module,exports) {
var t=require("../util").property;function e(e,i){t(this,"inputToken",i.input_token),t(this,"limitKey",i.limit_key),t(this,"moreResults",i.more_results),t(this,"outputToken",i.output_token),t(this,"resultKey",i.result_key)}module.exports=e;
},{"../util":"Srp3"}],"Z0eF":[function(require,module,exports) {
var t=require("../util"),i=t.property;function r(r,e,o){o=o||{},i(this,"name",r),i(this,"api",o.api,!1),e.operation&&i(this,"operation",t.string.lowerFirst(e.operation));var a=this;["type","description","delay","maxAttempts","acceptors"].forEach(function(t){var r=e[t];r&&i(a,t,r)})}module.exports=r;
},{"../util":"Srp3"}],"W1ma":[function(require,module,exports) {
module.exports={acm:{name:"ACM",cors:!0},apigateway:{name:"APIGateway",cors:!0},applicationautoscaling:{prefix:"application-autoscaling",name:"ApplicationAutoScaling",cors:!0},appstream:{name:"AppStream"},autoscaling:{name:"AutoScaling",cors:!0},batch:{name:"Batch"},budgets:{name:"Budgets"},clouddirectory:{name:"CloudDirectory",versions:["2016-05-10*"]},cloudformation:{name:"CloudFormation",cors:!0},cloudfront:{name:"CloudFront",versions:["2013-05-12*","2013-11-11*","2014-05-31*","2014-10-21*","2014-11-06*","2015-04-17*","2015-07-27*","2015-09-17*","2016-01-13*","2016-01-28*","2016-08-01*","2016-08-20*","2016-09-07*","2016-09-29*","2016-11-25*","2017-03-25*","2017-10-30*","2018-06-18*","2018-11-05*","2019-03-26*"],cors:!0},cloudhsm:{name:"CloudHSM",cors:!0},cloudsearch:{name:"CloudSearch"},cloudsearchdomain:{name:"CloudSearchDomain"},cloudtrail:{name:"CloudTrail",cors:!0},cloudwatch:{prefix:"monitoring",name:"CloudWatch",cors:!0},cloudwatchevents:{prefix:"events",name:"CloudWatchEvents",versions:["2014-02-03*"],cors:!0},cloudwatchlogs:{prefix:"logs",name:"CloudWatchLogs",cors:!0},codebuild:{name:"CodeBuild",cors:!0},codecommit:{name:"CodeCommit",cors:!0},codedeploy:{name:"CodeDeploy",cors:!0},codepipeline:{name:"CodePipeline",cors:!0},cognitoidentity:{prefix:"cognito-identity",name:"CognitoIdentity",cors:!0},cognitoidentityserviceprovider:{prefix:"cognito-idp",name:"CognitoIdentityServiceProvider",cors:!0},cognitosync:{prefix:"cognito-sync",name:"CognitoSync",cors:!0},configservice:{prefix:"config",name:"ConfigService",cors:!0},cur:{name:"CUR",cors:!0},datapipeline:{name:"DataPipeline"},devicefarm:{name:"DeviceFarm",cors:!0},directconnect:{name:"DirectConnect",cors:!0},directoryservice:{prefix:"ds",name:"DirectoryService"},discovery:{name:"Discovery"},dms:{name:"DMS"},dynamodb:{name:"DynamoDB",cors:!0},dynamodbstreams:{prefix:"streams.dynamodb",name:"DynamoDBStreams",cors:!0},ec2:{name:"EC2",versions:["2013-06-15*","2013-10-15*","2014-02-01*","2014-05-01*","2014-06-15*","2014-09-01*","2014-10-01*","2015-03-01*","2015-04-15*","2015-10-01*","2016-04-01*","2016-09-15*"],cors:!0},ecr:{name:"ECR",cors:!0},ecs:{name:"ECS",cors:!0},efs:{prefix:"elasticfilesystem",name:"EFS",cors:!0},elasticache:{name:"ElastiCache",versions:["2012-11-15*","2014-03-24*","2014-07-15*","2014-09-30*"],cors:!0},elasticbeanstalk:{name:"ElasticBeanstalk",cors:!0},elb:{prefix:"elasticloadbalancing",name:"ELB",cors:!0},elbv2:{prefix:"elasticloadbalancingv2",name:"ELBv2",cors:!0},emr:{prefix:"elasticmapreduce",name:"EMR",cors:!0},es:{name:"ES"},elastictranscoder:{name:"ElasticTranscoder",cors:!0},firehose:{name:"Firehose",cors:!0},gamelift:{name:"GameLift",cors:!0},glacier:{name:"Glacier"},health:{name:"Health"},iam:{name:"IAM",cors:!0},importexport:{name:"ImportExport"},inspector:{name:"Inspector",versions:["2015-08-18*"],cors:!0},iot:{name:"Iot",cors:!0},iotdata:{prefix:"iot-data",name:"IotData",cors:!0},kinesis:{name:"Kinesis",cors:!0},kinesisanalytics:{name:"KinesisAnalytics"},kms:{name:"KMS",cors:!0},lambda:{name:"Lambda",cors:!0},lexruntime:{prefix:"runtime.lex",name:"LexRuntime",cors:!0},lightsail:{name:"Lightsail"},machinelearning:{name:"MachineLearning",cors:!0},marketplacecommerceanalytics:{name:"MarketplaceCommerceAnalytics",cors:!0},marketplacemetering:{prefix:"meteringmarketplace",name:"MarketplaceMetering"},mturk:{prefix:"mturk-requester",name:"MTurk",cors:!0},mobileanalytics:{name:"MobileAnalytics",cors:!0},opsworks:{name:"OpsWorks",cors:!0},opsworkscm:{name:"OpsWorksCM"},organizations:{name:"Organizations"},pinpoint:{name:"Pinpoint"},polly:{name:"Polly",cors:!0},rds:{name:"RDS",versions:["2014-09-01*"],cors:!0},redshift:{name:"Redshift",cors:!0},rekognition:{name:"Rekognition",cors:!0},resourcegroupstaggingapi:{name:"ResourceGroupsTaggingAPI"},route53:{name:"Route53",cors:!0},route53domains:{name:"Route53Domains",cors:!0},s3:{name:"S3",dualstackAvailable:!0,cors:!0},s3control:{name:"S3Control",dualstackAvailable:!0,xmlNoDefaultLists:!0},servicecatalog:{name:"ServiceCatalog",cors:!0},ses:{prefix:"email",name:"SES",cors:!0},shield:{name:"Shield"},simpledb:{prefix:"sdb",name:"SimpleDB"},sms:{name:"SMS"},snowball:{name:"Snowball"},sns:{name:"SNS",cors:!0},sqs:{name:"SQS",cors:!0},ssm:{name:"SSM",cors:!0},storagegateway:{name:"StorageGateway",cors:!0},stepfunctions:{prefix:"states",name:"StepFunctions"},sts:{name:"STS",cors:!0},support:{name:"Support"},swf:{name:"SWF"},xray:{name:"XRay",cors:!0},waf:{name:"WAF",cors:!0},wafregional:{prefix:"waf-regional",name:"WAFRegional"},workdocs:{name:"WorkDocs",cors:!0},workspaces:{name:"WorkSpaces"},codestar:{name:"CodeStar"},lexmodelbuildingservice:{prefix:"lex-models",name:"LexModelBuildingService",cors:!0},marketplaceentitlementservice:{prefix:"entitlement.marketplace",name:"MarketplaceEntitlementService"},athena:{name:"Athena"},greengrass:{name:"Greengrass"},dax:{name:"DAX"},migrationhub:{prefix:"AWSMigrationHub",name:"MigrationHub"},cloudhsmv2:{name:"CloudHSMV2"},glue:{name:"Glue"},mobile:{name:"Mobile"},pricing:{name:"Pricing",cors:!0},costexplorer:{prefix:"ce",name:"CostExplorer",cors:!0},mediaconvert:{name:"MediaConvert"},medialive:{name:"MediaLive"},mediapackage:{name:"MediaPackage"},mediastore:{name:"MediaStore"},mediastoredata:{prefix:"mediastore-data",name:"MediaStoreData",cors:!0},appsync:{name:"AppSync"},guardduty:{name:"GuardDuty"},mq:{name:"MQ"},comprehend:{name:"Comprehend",cors:!0},iotjobsdataplane:{prefix:"iot-jobs-data",name:"IoTJobsDataPlane"},kinesisvideoarchivedmedia:{prefix:"kinesis-video-archived-media",name:"KinesisVideoArchivedMedia",cors:!0},kinesisvideomedia:{prefix:"kinesis-video-media",name:"KinesisVideoMedia",cors:!0},kinesisvideo:{name:"KinesisVideo",cors:!0},sagemakerruntime:{prefix:"runtime.sagemaker",name:"SageMakerRuntime"},sagemaker:{name:"SageMaker"},translate:{name:"Translate",cors:!0},resourcegroups:{prefix:"resource-groups",name:"ResourceGroups",cors:!0},alexaforbusiness:{name:"AlexaForBusiness"},cloud9:{name:"Cloud9"},serverlessapplicationrepository:{prefix:"serverlessrepo",name:"ServerlessApplicationRepository"},servicediscovery:{name:"ServiceDiscovery"},workmail:{name:"WorkMail"},autoscalingplans:{prefix:"autoscaling-plans",name:"AutoScalingPlans"},transcribeservice:{prefix:"transcribe",name:"TranscribeService"},connect:{name:"Connect",cors:!0},acmpca:{prefix:"acm-pca",name:"ACMPCA"},fms:{name:"FMS"},secretsmanager:{name:"SecretsManager",cors:!0},iotanalytics:{name:"IoTAnalytics",cors:!0},iot1clickdevicesservice:{prefix:"iot1click-devices",name:"IoT1ClickDevicesService"},iot1clickprojects:{prefix:"iot1click-projects",name:"IoT1ClickProjects"},pi:{name:"PI"},neptune:{name:"Neptune"},mediatailor:{name:"MediaTailor"},eks:{name:"EKS"},macie:{name:"Macie"},dlm:{name:"DLM"},signer:{name:"Signer"},chime:{name:"Chime"},pinpointemail:{prefix:"pinpoint-email",name:"PinpointEmail"},ram:{name:"RAM"},route53resolver:{name:"Route53Resolver"},pinpointsmsvoice:{prefix:"sms-voice",name:"PinpointSMSVoice"},quicksight:{name:"QuickSight"},rdsdataservice:{prefix:"rds-data",name:"RDSDataService"},amplify:{name:"Amplify"},datasync:{name:"DataSync"},robomaker:{name:"RoboMaker"},transfer:{name:"Transfer"},globalaccelerator:{name:"GlobalAccelerator"},comprehendmedical:{name:"ComprehendMedical",cors:!0},kinesisanalyticsv2:{name:"KinesisAnalyticsV2"},mediaconnect:{name:"MediaConnect"},fsx:{name:"FSx"},securityhub:{name:"SecurityHub"},appmesh:{name:"AppMesh",versions:["2018-10-01*"]},licensemanager:{prefix:"license-manager",name:"LicenseManager"},kafka:{name:"Kafka"},apigatewaymanagementapi:{name:"ApiGatewayManagementApi"},apigatewayv2:{name:"ApiGatewayV2"},docdb:{name:"DocDB"},backup:{name:"Backup"},worklink:{name:"WorkLink"},textract:{name:"Textract"},managedblockchain:{name:"ManagedBlockchain"},mediapackagevod:{prefix:"mediapackage-vod",name:"MediaPackageVod"},groundstation:{name:"GroundStation"},iotthingsgraph:{name:"IoTThingsGraph"},iotevents:{name:"IoTEvents"},ioteventsdata:{prefix:"iotevents-data",name:"IoTEventsData"},personalize:{name:"Personalize",cors:!0},personalizeevents:{prefix:"personalize-events",name:"PersonalizeEvents",cors:!0},personalizeruntime:{prefix:"personalize-runtime",name:"PersonalizeRuntime",cors:!0},applicationinsights:{prefix:"application-insights",name:"ApplicationInsights"},servicequotas:{prefix:"service-quotas",name:"ServiceQuotas"},ec2instanceconnect:{prefix:"ec2-instance-connect",name:"EC2InstanceConnect"},eventbridge:{name:"EventBridge"},lakeformation:{name:"LakeFormation"},forecastservice:{prefix:"forecast",name:"ForecastService",cors:!0},forecastqueryservice:{prefix:"forecastquery",name:"ForecastQueryService",cors:!0},qldb:{name:"QLDB"},qldbsession:{prefix:"qldb-session",name:"QLDBSession"},workmailmessageflow:{name:"WorkMailMessageFlow"},codestarnotifications:{prefix:"codestar-notifications",name:"CodeStarNotifications"},savingsplans:{name:"SavingsPlans"},sso:{name:"SSO"},ssooidc:{prefix:"sso-oidc",name:"SSOOIDC"},marketplacecatalog:{prefix:"marketplace-catalog",name:"MarketplaceCatalog"},dataexchange:{name:"DataExchange"},sesv2:{name:"SESV2"},migrationhubconfig:{prefix:"migrationhub-config",name:"MigrationHubConfig"},connectparticipant:{name:"ConnectParticipant"},appconfig:{name:"AppConfig"},iotsecuretunneling:{name:"IoTSecureTunneling"},wafv2:{name:"WAFV2"},elasticinference:{prefix:"elastic-inference",name:"ElasticInference"},imagebuilder:{name:"Imagebuilder"},schemas:{name:"Schemas"},accessanalyzer:{name:"AccessAnalyzer"},codegurureviewer:{prefix:"codeguru-reviewer",name:"CodeGuruReviewer"},codeguruprofiler:{name:"CodeGuruProfiler"},computeoptimizer:{prefix:"compute-optimizer",name:"ComputeOptimizer"},frauddetector:{name:"FraudDetector"},kendra:{name:"Kendra"},networkmanager:{name:"NetworkManager"},outposts:{name:"Outposts"},augmentedairuntime:{prefix:"sagemaker-a2i-runtime",name:"AugmentedAIRuntime"},ebs:{name:"EBS"},kinesisvideosignalingchannels:{prefix:"kinesis-video-signaling",name:"KinesisVideoSignalingChannels",cors:!0},detective:{name:"Detective"},codestarconnections:{prefix:"codestar-connections",name:"CodeStarconnections"},synthetics:{name:"Synthetics"},iotsitewise:{name:"IoTSiteWise"},macie2:{name:"Macie2"},codeartifact:{name:"CodeArtifact"},honeycode:{name:"Honeycode"},ivs:{name:"IVS"},braket:{name:"Braket"},identitystore:{name:"IdentityStore"}};
},{}],"fJkH":[function(require,module,exports) {
var e=require("./collection"),t=require("./operation"),i=require("./shape"),a=require("./paginator"),r=require("./resource_waiter"),n=require("../../apis/metadata.json"),s=require("../util"),o=s.property,d=s.memoizedProperty;function m(m,u){var p=this;m=m||{},(u=u||{}).api=this,m.metadata=m.metadata||{};var c=u.serviceIdentifier;delete u.serviceIdentifier,o(this,"isApi",!0,!1),o(this,"apiVersion",m.metadata.apiVersion),o(this,"endpointPrefix",m.metadata.endpointPrefix),o(this,"signingName",m.metadata.signingName),o(this,"globalEndpoint",m.metadata.globalEndpoint),o(this,"signatureVersion",m.metadata.signatureVersion),o(this,"jsonVersion",m.metadata.jsonVersion),o(this,"targetPrefix",m.metadata.targetPrefix),o(this,"protocol",m.metadata.protocol),o(this,"timestampFormat",m.metadata.timestampFormat),o(this,"xmlNamespaceUri",m.metadata.xmlNamespace),o(this,"abbreviation",m.metadata.serviceAbbreviation),o(this,"fullName",m.metadata.serviceFullName),o(this,"serviceId",m.metadata.serviceId),c&&n[c]&&o(this,"xmlNoDefaultLists",n[c].xmlNoDefaultLists,!1),d(this,"className",function(){var e=m.metadata.serviceAbbreviation||m.metadata.serviceFullName;return e?("ElasticLoadBalancing"===(e=e.replace(/^Amazon|AWS\s*|\(.*|\s+|\W+/g,""))&&(e="ELB"),e):null}),o(this,"operations",new e(m.operations,u,function(e,i){return new t(e,i,u)},s.string.lowerFirst,function(e,t){!0===t.endpointoperation&&o(p,"endpointOperation",s.string.lowerFirst(e)),t.endpointdiscovery&&!p.hasRequiredEndpointDiscovery&&o(p,"hasRequiredEndpointDiscovery",!0===t.endpointdiscovery.required)})),o(this,"shapes",new e(m.shapes,u,function(e,t){return i.create(t,u)})),o(this,"paginators",new e(m.paginators,u,function(e,t){return new a(e,t,u)})),o(this,"waiters",new e(m.waiters,u,function(e,t){return new r(e,t,u)},s.string.lowerFirst)),u.documentation&&(o(this,"documentation",m.documentation),o(this,"documentationUrl",m.documentationUrl))}module.exports=m;
},{"./collection":"pQS9","./operation":"TZKf","./shape":"EeVB","./paginator":"ncgO","./resource_waiter":"Z0eF","../../apis/metadata.json":"W1ma","../util":"Srp3"}],"XTxl":[function(require,module,exports) {
function e(r,i){if(!e.services.hasOwnProperty(r))throw new Error("InvalidService: Failed to load api for "+r);return e.services[r][i]}e.services={},module.exports=e;
},{}],"K8Ob":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){return function(e,t){this.key=e,this.value=t}}(),t=function(){function t(e){if(this.nodeMap={},this.size=0,"number"!=typeof e||e<1)throw new Error("Cache size can only be positive number");this.sizeLimit=e}return Object.defineProperty(t.prototype,"length",{get:function(){return this.size},enumerable:!0,configurable:!0}),t.prototype.prependToList=function(e){this.headerNode?(this.headerNode.prev=e,e.next=this.headerNode):this.tailNode=e,this.headerNode=e,this.size++},t.prototype.removeFromTail=function(){if(this.tailNode){var e=this.tailNode,t=e.prev;return t&&(t.next=void 0),e.prev=void 0,this.tailNode=t,this.size--,e}},t.prototype.detachFromList=function(e){this.headerNode===e&&(this.headerNode=e.next),this.tailNode===e&&(this.tailNode=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.next=void 0,e.prev=void 0,this.size--},t.prototype.get=function(e){if(this.nodeMap[e]){var t=this.nodeMap[e];return this.detachFromList(t),this.prependToList(t),t.value}},t.prototype.remove=function(e){if(this.nodeMap[e]){var t=this.nodeMap[e];this.detachFromList(t),delete this.nodeMap[e]}},t.prototype.put=function(t,i){if(this.nodeMap[t])this.remove(t);else if(this.size===this.sizeLimit){var o=this.removeFromTail().key;delete this.nodeMap[o]}var r=new e(t,i);this.nodeMap[t]=r,this.prependToList(r)},t.prototype.empty=function(){for(var e=Object.keys(this.nodeMap),t=0;t<e.length;t++){var i=e[t],o=this.nodeMap[i];this.detachFromList(o),delete this.nodeMap[i]}},t}();exports.LRUCache=t;
},{}],"k8T5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./utils/LRU"),t=1e3,r=function(){function r(r){void 0===r&&(r=t),this.maxSize=r,this.cache=new e.LRUCache(r)}return Object.defineProperty(r.prototype,"size",{get:function(){return this.cache.length},enumerable:!0,configurable:!0}),r.prototype.put=function(e,t){var n="string"!=typeof e?r.getKeyString(e):e,o=this.populateValue(t);this.cache.put(n,o)},r.prototype.get=function(e){var t="string"!=typeof e?r.getKeyString(e):e,n=Date.now(),o=this.cache.get(t);if(o)for(var i=0;i<o.length;i++){if(o[i].Expire<n)return void this.cache.remove(t)}return o},r.getKeyString=function(e){for(var t=[],r=Object.keys(e).sort(),n=0;n<r.length;n++){var o=r[n];void 0!==e[o]&&t.push(e[o])}return t.join(" ")},r.prototype.populateValue=function(e){var t=Date.now();return e.map(function(e){return{Address:e.Address||"",Expire:t+60*(e.CachePeriodInMinutes||1)*1e3}})},r.prototype.empty=function(){this.cache.empty()},r.prototype.remove=function(e){var t="string"!=typeof e?r.getKeyString(e):e;this.cache.remove(t)},r}();exports.EndpointCache=r;
},{"./utils/LRU":"K8Ob"}],"GKVf":[function(require,module,exports) {
var t=require("./core");t.SequentialExecutor=t.util.inherit({constructor:function(){this._events={}},listeners:function(t){return this._events[t]?this._events[t].slice(0):[]},on:function(t,e,n){return this._events[t]?n?this._events[t].unshift(e):this._events[t].push(e):this._events[t]=[e],this},onAsync:function(t,e,n){return e._isAsync=!0,this.on(t,e,n)},removeListener:function(t,e){var n=this._events[t];if(n){for(var r=n.length,i=-1,s=0;s<r;++s)n[s]===e&&(i=s);i>-1&&n.splice(i,1)}return this},removeAllListeners:function(t){return t?delete this._events[t]:this._events={},this},emit:function(t,e,n){n||(n=function(){});var r=this.listeners(t),i=r.length;return this.callListeners(r,e,n),i>0},callListeners:function(e,n,r,i){var s=this,o=i||null;function u(i){if(i&&(o=t.util.error(o||new Error,i),s._haltHandlersOnError))return r.call(s,o);s.callListeners(e,n,r,o)}for(;e.length>0;){var a=e.shift();if(a._isAsync)return void a.apply(s,n.concat([u]));try{a.apply(s,n)}catch(c){o=t.util.error(o||new Error,c)}if(o&&s._haltHandlersOnError)return void r.call(s,o)}r.call(s,o)},addListeners:function(e){var n=this;return e._events&&(e=e._events),t.util.each(e,function(e,r){"function"==typeof r&&(r=[r]),t.util.arrayEach(r,function(t){n.on(e,t)})}),n},addNamedListener:function(t,e,n,r){return this[t]=n,this.addListener(e,n,r),this},addNamedAsyncListener:function(t,e,n,r){return n._isAsync=!0,this.addNamedListener(t,e,n,r)},addNamedListeners:function(t){var e=this;return t(function(){e.addNamedListener.apply(e,arguments)},function(){e.addNamedAsyncListener.apply(e,arguments)}),this}}),t.SequentialExecutor.prototype.addListener=t.SequentialExecutor.prototype.on,module.exports=t.SequentialExecutor;
},{"./core":"hd5g"}],"ZWci":[function(require,module,exports) {
module.exports={rules:{"*/*":{endpoint:"{service}.{region}.amazonaws.com"},"cn-*/*":{endpoint:"{service}.{region}.amazonaws.com.cn"},"us-iso-*/*":{endpoint:"{service}.{region}.c2s.ic.gov"},"us-isob-*/*":{endpoint:"{service}.{region}.sc2s.sgov.gov"},"*/budgets":"globalSSL","*/cloudfront":"globalSSL","*/sts":"globalSSL","*/importexport":{endpoint:"{service}.amazonaws.com",signatureVersion:"v2",globalEndpoint:!0},"*/route53":"globalSSL","cn-*/route53":{endpoint:"{service}.amazonaws.com.cn",globalEndpoint:!0,signingRegion:"cn-northwest-1"},"us-gov-*/route53":"globalGovCloud","*/waf":"globalSSL","*/iam":"globalSSL","cn-*/iam":{endpoint:"{service}.cn-north-1.amazonaws.com.cn",globalEndpoint:!0,signingRegion:"cn-north-1"},"us-gov-*/iam":"globalGovCloud","us-gov-*/sts":{endpoint:"{service}.{region}.amazonaws.com"},"us-gov-west-1/s3":"s3signature","us-west-1/s3":"s3signature","us-west-2/s3":"s3signature","eu-west-1/s3":"s3signature","ap-southeast-1/s3":"s3signature","ap-southeast-2/s3":"s3signature","ap-northeast-1/s3":"s3signature","sa-east-1/s3":"s3signature","us-east-1/s3":{endpoint:"{service}.amazonaws.com",signatureVersion:"s3"},"us-east-1/sdb":{endpoint:"{service}.amazonaws.com",signatureVersion:"v2"},"*/sdb":{endpoint:"{service}.{region}.amazonaws.com",signatureVersion:"v2"}},patterns:{globalSSL:{endpoint:"https://{service}.amazonaws.com",globalEndpoint:!0,signingRegion:"us-east-1"},globalGovCloud:{endpoint:"{service}.us-gov.amazonaws.com",globalEndpoint:!0,signingRegion:"us-gov-west-1"},s3signature:{endpoint:"{service}.{region}.amazonaws.com",signatureVersion:"s3"}}};
},{}],"ABti":[function(require,module,exports) {
var n=require("./util"),i=require("./region_config_data.json");function o(n){if(!n)return null;var i=n.split("-");return i.length<3?null:i.slice(0,i.length-2).join("-")+"-*"}function e(n){var i=n.config.region,e=o(i),r=n.api.endpointPrefix;return[[i,r],[e,r],[i,"*"],[e,"*"],["*",r],["*","*"]].map(function(n){return n[0]&&n[1]?n.join("/"):null})}function r(i,o){n.each(o,function(n,o){"globalEndpoint"!==n&&(void 0!==i.config[n]&&null!==i.config[n]||(i.config[n]=o))})}function t(o){for(var t=e(o),a=0;a<t.length;a++){var s=t[a];if(s&&Object.prototype.hasOwnProperty.call(i.rules,s)){var u=i.rules[s];return"string"==typeof u&&(u=i.patterns[u]),o.config.useDualstack&&n.isDualstackAvailable(o)&&((u=n.copy(u)).endpoint=u.endpoint.replace(/{service}\.({region}\.)?/,"{service}.dualstack.{region}.")),o.isGlobalEndpoint=!!u.globalEndpoint,u.signingRegion&&(o.signingRegion=u.signingRegion),u.signatureVersion||(u.signatureVersion="v4"),void r(o,u)}}}function a(n){for(var i={"^(us|eu|ap|sa|ca|me)\\-\\w+\\-\\d+$":"amazonaws.com","^cn\\-\\w+\\-\\d+$":"amazonaws.com.cn","^us\\-gov\\-\\w+\\-\\d+$":"amazonaws.com","^us\\-iso\\-\\w+\\-\\d+$":"c2s.ic.gov","^us\\-isob\\-\\w+\\-\\d+$":"sc2s.sgov.gov"},o=Object.keys(i),e=0;e<o.length;e++){var r=RegExp(o[e]),t=i[o[e]];if(r.test(n))return t}return"amazonaws.com"}module.exports={configureEndpoint:t,getEndpointSuffix:a};
},{"./util":"Srp3","./region_config_data.json":"ZWci"}],"g5IB":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"RKSD":[function(require,module,exports) {
var process = require("process");
var e=require("process"),t=require("./core"),i=require("./model/api"),r=require("./region_config"),n=t.util.inherit,s=0;t.Service=n({constructor:function(e){if(!this.loadServiceClass)throw t.util.error(new Error,"Service must be constructed with `new' operator");var i=this.loadServiceClass(e||{});if(i){var r=t.util.copy(e),n=new i(e);return Object.defineProperty(n,"_originalConfig",{get:function(){return r},enumerable:!1,configurable:!0}),n._clientId=++s,n}this.initialize(e)},initialize:function(i){var n=t.config[this.serviceIdentifier];if(this.config=new t.Config(t.config),n&&this.config.update(n,!0),i&&this.config.update(i,!0),this.validateService(),this.config.endpoint||r.configureEndpoint(this),this.config.endpoint=this.endpointFromTemplate(this.config.endpoint),this.setEndpoint(this.config.endpoint),t.SequentialExecutor.call(this),t.Service.addDefaultMonitoringListeners(this),(this.config.clientSideMonitoring||t.Service._clientSideMonitoring)&&this.publisher){var s=this.publisher;this.addNamedListener("PUBLISH_API_CALL","apiCall",function(t){e.nextTick(function(){s.eventHandler(t)})}),this.addNamedListener("PUBLISH_API_ATTEMPT","apiCallAttempt",function(t){e.nextTick(function(){s.eventHandler(t)})})}},validateService:function(){},loadServiceClass:function(e){var i=e;if(t.util.isEmpty(this.api)){if(i.apiConfig)return t.Service.defineServiceApi(this.constructor,i.apiConfig);if(this.constructor.services){(i=new t.Config(t.config)).update(e,!0);var r=i.apiVersions[this.constructor.serviceIdentifier];return r=r||i.apiVersion,this.getLatestServiceClass(r)}return null}return null},getLatestServiceClass:function(e){return e=this.getLatestServiceVersion(e),null===this.constructor.services[e]&&t.Service.defineServiceApi(this.constructor,e),this.constructor.services[e]},getLatestServiceVersion:function(e){if(!this.constructor.services||0===this.constructor.services.length)throw new Error("No services defined on "+this.constructor.serviceIdentifier);if(e?t.util.isType(e,Date)&&(e=t.util.date.iso8601(e).split("T")[0]):e="latest",Object.hasOwnProperty(this.constructor.services,e))return e;for(var i=Object.keys(this.constructor.services).sort(),r=null,n=i.length-1;n>=0;n--)if("*"!==i[n][i[n].length-1]&&(r=i[n]),i[n].substr(0,10)<=e)return r;throw new Error("Could not find "+this.constructor.serviceIdentifier+" API to satisfy version constraint `"+e+"'")},api:{},defaultRetryCount:3,customizeRequests:function(e){if(e){if("function"!=typeof e)throw new Error("Invalid callback type '"+typeof e+"' provided in customizeRequests");this.customRequestHandler=e}else this.customRequestHandler=null},makeRequest:function(e,i,r){if("function"==typeof i&&(r=i,i=null),i=i||{},this.config.params){var n=this.api.operations[e];n&&(i=t.util.copy(i),t.util.each(this.config.params,function(e,t){n.input.members[e]&&(void 0!==i[e]&&null!==i[e]||(i[e]=t))}))}var s=new t.Request(this,e,i);return this.addAllRequestListeners(s),this.attachMonitoringEmitter(s),r&&s.send(r),s},makeUnauthenticatedRequest:function(e,t,i){"function"==typeof t&&(i=t,t={});var r=this.makeRequest(e,t).toUnauthenticated();return i?r.send(i):r},waitFor:function(e,i,r){return new t.ResourceWaiter(this,e).wait(i,r)},addAllRequestListeners:function(e){for(var i=[t.events,t.EventListeners.Core,this.serviceInterface(),t.EventListeners.CorePost],r=0;r<i.length;r++)i[r]&&e.addListeners(i[r]);this.config.paramValidation||e.removeListener("validate",t.EventListeners.Core.VALIDATE_PARAMETERS),this.config.logger&&e.addListeners(t.EventListeners.Logger),this.setupRequestListeners(e),"function"==typeof this.constructor.prototype.customRequestHandler&&this.constructor.prototype.customRequestHandler(e),Object.prototype.hasOwnProperty.call(this,"customRequestHandler")&&"function"==typeof this.customRequestHandler&&this.customRequestHandler(e)},apiCallEvent:function(e){var t=e.service.api.operations[e.operation],i={Type:"ApiCall",Api:t?t.name:e.operation,Version:1,Service:e.service.api.serviceId||e.service.api.endpointPrefix,Region:e.httpRequest.region,MaxRetriesExceeded:0,UserAgent:e.httpRequest.getUserAgent()},r=e.response;if(r.httpResponse.statusCode&&(i.FinalHttpStatusCode=r.httpResponse.statusCode),r.error){var n=r.error;r.httpResponse.statusCode>299?(n.code&&(i.FinalAwsException=n.code),n.message&&(i.FinalAwsExceptionMessage=n.message)):((n.code||n.name)&&(i.FinalSdkException=n.code||n.name),n.message&&(i.FinalSdkExceptionMessage=n.message))}return i},apiAttemptEvent:function(e){var t=e.service.api.operations[e.operation],i={Type:"ApiCallAttempt",Api:t?t.name:e.operation,Version:1,Service:e.service.api.serviceId||e.service.api.endpointPrefix,Fqdn:e.httpRequest.endpoint.hostname,UserAgent:e.httpRequest.getUserAgent()},r=e.response;return r.httpResponse.statusCode&&(i.HttpStatusCode=r.httpResponse.statusCode),!e._unAuthenticated&&e.service.config.credentials&&e.service.config.credentials.accessKeyId&&(i.AccessKey=e.service.config.credentials.accessKeyId),r.httpResponse.headers?(e.httpRequest.headers["x-amz-security-token"]&&(i.SessionToken=e.httpRequest.headers["x-amz-security-token"]),r.httpResponse.headers["x-amzn-requestid"]&&(i.XAmznRequestId=r.httpResponse.headers["x-amzn-requestid"]),r.httpResponse.headers["x-amz-request-id"]&&(i.XAmzRequestId=r.httpResponse.headers["x-amz-request-id"]),r.httpResponse.headers["x-amz-id-2"]&&(i.XAmzId2=r.httpResponse.headers["x-amz-id-2"]),i):i},attemptFailEvent:function(e){var t=this.apiAttemptEvent(e),i=e.response,r=i.error;return i.httpResponse.statusCode>299?(r.code&&(t.AwsException=r.code),r.message&&(t.AwsExceptionMessage=r.message)):((r.code||r.name)&&(t.SdkException=r.code||r.name),r.message&&(t.SdkExceptionMessage=r.message)),t},attachMonitoringEmitter:function(e){var i,r,n,s,o,a,c=0,u=this;e.on("validate",function(){s=t.util.realClock.now(),a=Date.now()},!0),e.on("sign",function(){r=t.util.realClock.now(),i=Date.now(),o=e.httpRequest.region,c++},!0),e.on("validateResponse",function(){n=Math.round(t.util.realClock.now()-r)}),e.addNamedListener("API_CALL_ATTEMPT","success",function(){var t=u.apiAttemptEvent(e);t.Timestamp=i,t.AttemptLatency=n>=0?n:0,t.Region=o,u.emit("apiCallAttempt",[t])}),e.addNamedListener("API_CALL_ATTEMPT_RETRY","retry",function(){var s=u.attemptFailEvent(e);s.Timestamp=i,n=n||Math.round(t.util.realClock.now()-r),s.AttemptLatency=n>=0?n:0,s.Region=o,u.emit("apiCallAttempt",[s])}),e.addNamedListener("API_CALL","complete",function(){var i=u.apiCallEvent(e);if(i.AttemptCount=c,!(i.AttemptCount<=0)){i.Timestamp=a;var r=Math.round(t.util.realClock.now()-s);i.Latency=r>=0?r:0;var n=e.response;n.error&&n.error.retryable&&"number"==typeof n.retryCount&&"number"==typeof n.maxRetries&&n.retryCount>=n.maxRetries&&(i.MaxRetriesExceeded=1),u.emit("apiCall",[i])}})},setupRequestListeners:function(e){},getSignerClass:function(e){var i,r=null,n="";e&&(n=(r=(e.service.api.operations||{})[e.operation]||null)?r.authtype:"");return i=this.config.signatureVersion?this.config.signatureVersion:"v4"===n||"v4-unsigned-body"===n?"v4":this.api.signatureVersion,t.Signers.RequestSigner.getVersion(i)},serviceInterface:function(){switch(this.api.protocol){case"ec2":case"query":return t.EventListeners.Query;case"json":return t.EventListeners.Json;case"rest-json":return t.EventListeners.RestJson;case"rest-xml":return t.EventListeners.RestXml}if(this.api.protocol)throw new Error("Invalid service `protocol' "+this.api.protocol+" in API config")},successfulResponse:function(e){return e.httpResponse.statusCode<300},numRetries:function(){return void 0!==this.config.maxRetries?this.config.maxRetries:this.defaultRetryCount},retryDelays:function(e,i){return t.util.calculateRetryDelay(e,this.config.retryDelayOptions,i)},retryableError:function(e){return!!this.timeoutError(e)||(!!this.networkingError(e)||(!!this.expiredCredentialsError(e)||(!!this.throttledError(e)||e.statusCode>=500)))},networkingError:function(e){return"NetworkingError"===e.code},timeoutError:function(e){return"TimeoutError"===e.code},expiredCredentialsError:function(e){return"ExpiredTokenException"===e.code},clockSkewError:function(e){switch(e.code){case"RequestTimeTooSkewed":case"RequestExpired":case"InvalidSignatureException":case"SignatureDoesNotMatch":case"AuthFailure":case"RequestInTheFuture":return!0;default:return!1}},getSkewCorrectedDate:function(){return new Date(Date.now()+this.config.systemClockOffset)},applyClockOffset:function(e){e&&(this.config.systemClockOffset=e-Date.now())},isClockSkewed:function(e){if(e)return Math.abs(this.getSkewCorrectedDate().getTime()-e)>=3e5},throttledError:function(e){if(429===e.statusCode)return!0;switch(e.code){case"ProvisionedThroughputExceededException":case"Throttling":case"ThrottlingException":case"RequestLimitExceeded":case"RequestThrottled":case"RequestThrottledException":case"TooManyRequestsException":case"TransactionInProgressException":case"EC2ThrottledException":return!0;default:return!1}},endpointFromTemplate:function(e){if("string"!=typeof e)return e;var t=e;return t=(t=(t=t.replace(/\{service\}/g,this.api.endpointPrefix)).replace(/\{region\}/g,this.config.region)).replace(/\{scheme\}/g,this.config.sslEnabled?"https":"http")},setEndpoint:function(e){this.endpoint=new t.Endpoint(e,this.config)},paginationConfig:function(e,i){var r=this.api.operations[e].paginator;if(!r){if(i){var n=new Error;throw t.util.error(n,"No pagination configuration for "+e)}return null}return r}}),t.util.update(t.Service,{defineMethods:function(e){t.util.each(e.prototype.api.operations,function(t){e.prototype[t]||("none"===e.prototype.api.operations[t].authtype?e.prototype[t]=function(e,i){return this.makeUnauthenticatedRequest(t,e,i)}:e.prototype[t]=function(e,i){return this.makeRequest(t,e,i)})})},defineService:function(e,i,r){t.Service._serviceMap[e]=!0,Array.isArray(i)||(r=i,i=[]);var s=n(t.Service,r||{});if("string"==typeof e){t.Service.addVersions(s,i);var o=s.serviceIdentifier||e;s.serviceIdentifier=o}else s.prototype.api=e,t.Service.defineMethods(s);if(t.SequentialExecutor.call(this.prototype),!this.prototype.publisher&&t.util.clientSideMonitoring){var a=t.util.clientSideMonitoring.Publisher,c=(0,t.util.clientSideMonitoring.configProvider)();this.prototype.publisher=new a(c),c.enabled&&(t.Service._clientSideMonitoring=!0)}return t.SequentialExecutor.call(s.prototype),t.Service.addDefaultMonitoringListeners(s.prototype),s},addVersions:function(e,t){Array.isArray(t)||(t=[t]),e.services=e.services||{};for(var i=0;i<t.length;i++)void 0===e.services[t[i]]&&(e.services[t[i]]=null);e.apiVersions=Object.keys(e.services).sort()},defineServiceApi:function(e,r,s){var o=n(e,{serviceIdentifier:e.serviceIdentifier});function a(t){t.isApi?o.prototype.api=t:o.prototype.api=new i(t,{serviceIdentifier:e.serviceIdentifier})}if("string"==typeof r){if(s)a(s);else try{a(t.apiLoader(e.serviceIdentifier,r))}catch(c){throw t.util.error(c,{message:"Could not find API configuration "+e.serviceIdentifier+"-"+r})}Object.prototype.hasOwnProperty.call(e.services,r)||(e.apiVersions=e.apiVersions.concat(r).sort()),e.services[r]=o}else a(r);return t.Service.defineMethods(o),o},hasService:function(e){return Object.prototype.hasOwnProperty.call(t.Service._serviceMap,e)},addDefaultMonitoringListeners:function(e){e.addNamedListener("MONITOR_EVENTS_BUBBLE","apiCallAttempt",function(t){var i=Object.getPrototypeOf(e);i._events&&i.emit("apiCallAttempt",[t])}),e.addNamedListener("CALL_EVENTS_BUBBLE","apiCall",function(t){var i=Object.getPrototypeOf(e);i._events&&i.emit("apiCall",[t])})},_serviceMap:{}}),t.util.mixin(t.Service,t.SequentialExecutor),module.exports=t.Service;
},{"./core":"hd5g","./model/api":"fJkH","./region_config":"ABti","process":"g5IB"}],"Dp8z":[function(require,module,exports) {
var e=require("./core");e.Credentials=e.util.inherit({constructor:function(){if(e.util.hideProperties(this,["secretAccessKey"]),this.expired=!1,this.expireTime=null,this.refreshCallbacks=[],1===arguments.length&&"object"==typeof arguments[0]){var s=arguments[0].credentials||arguments[0];this.accessKeyId=s.accessKeyId,this.secretAccessKey=s.secretAccessKey,this.sessionToken=s.sessionToken}else this.accessKeyId=arguments[0],this.secretAccessKey=arguments[1],this.sessionToken=arguments[2]},expiryWindow:15,needsRefresh:function(){var s=e.util.date.getDate().getTime(),t=new Date(s+1e3*this.expiryWindow);return!!(this.expireTime&&t>this.expireTime)||(this.expired||!this.accessKeyId||!this.secretAccessKey)},get:function(e){var s=this;this.needsRefresh()?this.refresh(function(t){t||(s.expired=!1),e&&e(t)}):e&&e()},refresh:function(e){this.expired=!1,e()},coalesceRefresh:function(s,t){var i=this;1===i.refreshCallbacks.push(s)&&i.load(function(s){e.util.arrayEach(i.refreshCallbacks,function(i){t?i(s):e.util.defer(function(){i(s)})}),i.refreshCallbacks.length=0})},load:function(e){e()}}),e.Credentials.addPromisesToClass=function(s){this.prototype.getPromise=e.util.promisifyMethod("get",s),this.prototype.refreshPromise=e.util.promisifyMethod("refresh",s)},e.Credentials.deletePromisesFromClass=function(){delete this.prototype.getPromise,delete this.prototype.refreshPromise},e.util.addPromises(e.Credentials);
},{"./core":"hd5g"}],"Q0mg":[function(require,module,exports) {
var e=require("../core");e.CredentialProviderChain=e.util.inherit(e.Credentials,{constructor:function(r){this.providers=r||e.CredentialProviderChain.defaultProviders.slice(0),this.resolveCallbacks=[]},resolve:function(r){var i=this;if(0===i.providers.length)return r(new Error("No providers")),i;if(1===i.resolveCallbacks.push(r)){var o=0,t=i.providers.slice(0);!function r(l,s){if(!l&&s||o===t.length)return e.util.arrayEach(i.resolveCallbacks,function(e){e(l,s)}),void(i.resolveCallbacks.length=0);var n=t[o++];(s="function"==typeof n?n.call():n).get?s.get(function(e){r(e,e?null:s)}):r(null,s)}()}return i}}),e.CredentialProviderChain.defaultProviders=[],e.CredentialProviderChain.addPromisesToClass=function(r){this.prototype.resolvePromise=e.util.promisifyMethod("resolve",r)},e.CredentialProviderChain.deletePromisesFromClass=function(){delete this.prototype.resolvePromise},e.util.addPromises(e.CredentialProviderChain);
},{"../core":"hd5g"}],"EvfU":[function(require,module,exports) {
var e,t=require("./core");require("./credentials"),require("./credentials/credential_provider_chain"),t.Config=t.util.inherit({constructor:function(e){void 0===e&&(e={}),e=this.extractCredentials(e),t.util.each.call(this,this.keys,function(t,i){this.set(t,e[t],i)})},getCredentials:function(e){var i,n=this;function r(t){e(t,t?null:n.credentials)}function s(e,i){return new t.util.error(i||new Error,{code:"CredentialsError",message:e,name:"CredentialsError"})}n.credentials?"function"==typeof n.credentials.get?n.credentials.get(function(e){e&&(e=s("Could not load credentials from "+n.credentials.constructor.name,e)),r(e)}):(i=null,n.credentials.accessKeyId&&n.credentials.secretAccessKey||(i=s("Missing credentials")),r(i)):n.credentialProvider?n.credentialProvider.resolve(function(e,t){e&&(e=s("Could not load credentials from any providers",e)),n.credentials=t,r(e)}):r(s("No credentials to load"))},update:function(e,i){i=i||!1,e=this.extractCredentials(e),t.util.each.call(this,e,function(e,n){(i||Object.prototype.hasOwnProperty.call(this.keys,e)||t.Service.hasService(e))&&this.set(e,n)})},loadFromPath:function(e){this.clear();var i=JSON.parse(t.util.readFileSync(e)),n=new t.FileSystemCredentials(e),r=new t.CredentialProviderChain;return r.providers.unshift(n),r.resolve(function(e,t){if(e)throw e;i.credentials=t}),this.constructor(i),this},clear:function(){t.util.each.call(this,this.keys,function(e){delete this[e]}),this.set("credentials",void 0),this.set("credentialProvider",void 0)},set:function(e,i,n){void 0===i?(void 0===n&&(n=this.keys[e]),this[e]="function"==typeof n?n.call(this):n):"httpOptions"===e&&this[e]?this[e]=t.util.merge(this[e],i):this[e]=i},keys:{credentials:null,credentialProvider:null,region:null,logger:null,apiVersions:{},apiVersion:null,endpoint:void 0,httpOptions:{timeout:12e4},maxRetries:void 0,maxRedirects:10,paramValidation:!0,sslEnabled:!0,s3ForcePathStyle:!1,s3BucketEndpoint:!1,s3DisableBodySigning:!0,s3UsEast1RegionalEndpoint:"legacy",s3UseArnRegion:void 0,computeChecksums:!0,convertResponseTypes:!0,correctClockSkew:!1,customUserAgent:null,dynamoDbCrc32:!0,systemClockOffset:0,signatureVersion:null,signatureCache:!0,retryDelayOptions:{},useAccelerateEndpoint:!1,clientSideMonitoring:!1,endpointDiscoveryEnabled:void 0,endpointCacheSize:1e3,hostPrefixEnabled:!0,stsRegionalEndpoints:"legacy"},extractCredentials:function(e){return e.accessKeyId&&e.secretAccessKey&&((e=t.util.copy(e)).credentials=new t.Credentials(e)),e},setPromisesDependency:function(i){e=i,null===i&&"function"==typeof Promise&&(e=Promise);var n=[t.Request,t.Credentials,t.CredentialProviderChain];t.S3&&(n.push(t.S3),t.S3.ManagedUpload&&n.push(t.S3.ManagedUpload)),t.util.addPromises(n,e)},getPromisesDependency:function(){return e}}),t.config=new t.Config;
},{"./core":"hd5g","./credentials":"Dp8z","./credentials/credential_provider_chain":"Q0mg"}],"yHCU":[function(require,module,exports) {
var t=require("./core"),e=t.util.inherit;t.Endpoint=e({constructor:function(e,s){if(t.util.hideProperties(this,["slashes","auth","hash","search","query"]),null==e)throw new Error("Invalid endpoint: "+e);if("string"!=typeof e)return t.util.copy(e);e.match(/^http/)||(e=((s&&void 0!==s.sslEnabled?s.sslEnabled:t.config.sslEnabled)?"https":"http")+"://"+e);t.util.update(this,t.util.urlParse(e)),this.port?this.port=parseInt(this.port,10):this.port="https:"===this.protocol?443:80}}),t.HttpRequest=e({constructor:function(e,s){e=new t.Endpoint(e),this.method="POST",this.path=e.path||"/",this.headers={},this.body="",this.endpoint=e,this.region=s,this._userAgent="",this.setUserAgent()},setUserAgent:function(){this._userAgent=this.headers[this.getUserAgentHeaderName()]=t.util.userAgent()},getUserAgentHeaderName:function(){return(t.util.isBrowser()?"X-Amz-":"")+"User-Agent"},appendToUserAgent:function(t){"string"==typeof t&&t&&(this._userAgent+=" "+t),this.headers[this.getUserAgentHeaderName()]=this._userAgent},getUserAgent:function(){return this._userAgent},pathname:function(){return this.path.split("?",1)[0]},search:function(){var e=this.path.split("?",2)[1];return e?(e=t.util.queryStringParse(e),t.util.queryParamsToString(e)):""},updateEndpoint:function(e){var s=new t.Endpoint(e);this.endpoint=s,this.path=s.path||"/",this.headers.Host&&(this.headers.Host=s.host)}}),t.HttpResponse=e({constructor:function(){this.statusCode=void 0,this.headers={},this.body=void 0,this.streaming=!1,this.stream=null},createUnbufferedStream:function(){return this.streaming=!0,this.stream}}),t.HttpClient=e({}),t.HttpClient.getInstance=function(){return void 0===this.singleton&&(this.singleton=new this),this.singleton};
},{"./core":"hd5g"}],"fu9W":[function(require,module,exports) {
var process = require("process");
var e=require("process"),n=require("./core"),i=require("./util"),r=["AWS_ENABLE_ENDPOINT_DISCOVERY","AWS_ENDPOINT_DISCOVERY_ENABLED"];function o(e){var n=e.service,i=n.api||{},r=(i.operations,{});return n.config.region&&(r.region=n.config.region),i.serviceId&&(r.serviceId=i.serviceId),n.config.credentials.accessKeyId&&(r.accessKeyId=n.config.credentials.accessKeyId),r}function t(e,n,r){r&&null!=n&&"structure"===r.type&&r.required&&r.required.length>0&&i.arrayEach(r.required,function(i){var o=r.members[i];if(!0===o.endpointDiscoveryId){var a=o.isLocationName?o.name:i;e[a]=String(n[i])}else t(e,n[i],o)})}function a(e,n){var i={};return t(i,e.params,n),i}function s(e){var r=e.service,t=r.api,s=t.operations?t.operations[e.operation]:void 0,d=a(e,s?s.input:void 0),p=o(e);Object.keys(d).length>0&&(p=i.update(p,d),s&&(p.operation=s.name));var u=n.endpointCache.get(p);if(!u||1!==u.length||""!==u[0].Address)if(u&&u.length>0)e.httpRequest.updateEndpoint(u[0].Address);else{var v=r.makeRequest(t.endpointOperation,{Operation:s.name,Identifiers:d});c(v),v.removeListener("validate",n.EventListeners.Core.VALIDATE_PARAMETERS),v.removeListener("retry",n.EventListeners.Core.RETRY_CHECK),n.endpointCache.put(p,[{Address:"",CachePeriodInMinutes:1}]),v.send(function(e,i){i&&i.Endpoints?n.endpointCache.put(p,i.Endpoints):e&&n.endpointCache.put(p,[{Address:"",CachePeriodInMinutes:1}])})}}var d={};function p(e,r){var t=e.service,s=t.api,p=s.operations?s.operations[e.operation]:void 0,u=p?p.input:void 0,v=a(e,u),l=o(e);Object.keys(v).length>0&&(l=i.update(l,v),p&&(l.operation=p.name));var f=n.EndpointCache.getKeyString(l),E=n.endpointCache.get(f);if(E&&1===E.length&&""===E[0].Address)return d[f]||(d[f]=[]),void d[f].push({request:e,callback:r});if(E&&E.length>0)e.httpRequest.updateEndpoint(E[0].Address),r();else{var g=t.makeRequest(s.endpointOperation,{Operation:p.name,Identifiers:v});g.removeListener("validate",n.EventListeners.Core.VALIDATE_PARAMETERS),c(g),n.endpointCache.put(f,[{Address:"",CachePeriodInMinutes:60}]),g.send(function(o,t){if(o){if(e.response.error=i.error(o,{retryable:!1}),n.endpointCache.remove(l),d[f]){var a=d[f];i.arrayEach(a,function(e){e.request.response.error=i.error(o,{retryable:!1}),e.callback()}),delete d[f]}}else if(t&&(n.endpointCache.put(f,t.Endpoints),e.httpRequest.updateEndpoint(t.Endpoints[0].Address),d[f])){a=d[f];i.arrayEach(a,function(e){e.request.httpRequest.updateEndpoint(t.Endpoints[0].Address),e.callback()}),delete d[f]}r()})}}function c(e){var n=e.service.api.apiVersion;n&&!e.httpRequest.headers["x-amz-api-version"]&&(e.httpRequest.headers["x-amz-api-version"]=n)}function u(e){var r=e.error,t=e.httpResponse;if(r&&("InvalidEndpointException"===r.code||421===t.statusCode)){var s=e.request,d=s.service.api.operations||{},p=a(s,d[s.operation]?d[s.operation].input:void 0),c=o(s);Object.keys(p).length>0&&(c=i.update(c,p),d[s.operation]&&(c.operation=d[s.operation].name)),n.endpointCache.remove(c)}}function v(e){if(e._originalConfig&&e._originalConfig.endpoint&&!0===e._originalConfig.endpointDiscoveryEnabled)throw i.error(new Error,{code:"ConfigurationException",message:"Custom endpoint is supplied; endpointDiscoveryEnabled must not be true."});var r=n.config[e.serviceIdentifier]||{};return Boolean(n.config.endpoint||r.endpoint||e._originalConfig&&e._originalConfig.endpoint)}function l(e){return["false","0"].indexOf(e)>=0}function f(o){var t=o.service||{};if(void 0!==t.config.endpointDiscoveryEnabled)return t.config.endpointDiscoveryEnabled;if(!i.isBrowser()){for(var a=0;a<r.length;a++){var s=r[a];if(Object.prototype.hasOwnProperty.call(e.env,s)){if(""===e.env[s]||void 0===e.env[s])throw i.error(new Error,{code:"ConfigurationException",message:"environmental variable "+s+" cannot be set to nothing"});return!l(e.env[s])}}var d={};try{d=n.util.iniLoader?n.util.iniLoader.loadFrom({isConfig:!0,filename:e.env[n.util.sharedConfigFileEnv]}):{}}catch(c){}var p=d[n.util.defaultProfile]||{};if(Object.prototype.hasOwnProperty.call(p,"endpoint_discovery_enabled")){if(void 0===p.endpoint_discovery_enabled)throw i.error(new Error,{code:"ConfigurationException",message:"config file entry 'endpoint_discovery_enabled' cannot be set to nothing"});return!l(p.endpoint_discovery_enabled)}}}function E(e,n){var r=e.service||{};if(v(r)||e.isPresigned())return n();var o=(r.api.operations||{})[e.operation],t=o?o.endpointDiscoveryRequired:"NULL",a=f(e),d=r.api.hasRequiredEndpointDiscovery;switch((a||d)&&e.httpRequest.appendToUserAgent("endpoint-discovery"),t){case"OPTIONAL":(a||d)&&(s(e),e.addNamedListener("INVALIDATE_CACHED_ENDPOINTS","extractError",u)),n();break;case"REQUIRED":if(!1===a){e.response.error=i.error(new Error,{code:"ConfigurationException",message:"Endpoint Discovery is disabled but "+r.api.className+"."+e.operation+"() requires it. Please check your configurations."}),n();break}e.addNamedListener("INVALIDATE_CACHED_ENDPOINTS","extractError",u),p(e,n);break;case"NULL":default:n()}}module.exports={discoverEndpoint:E,requiredDiscoverEndpoint:p,optionalDiscoverEndpoint:s,marshallCustomIdentifiers:a,getCacheKey:o,invalidateCachedEndpoint:u};
},{"./core":"hd5g","./util":"Srp3","process":"g5IB"}],"jSD1":[function(require,module,exports) {
module.exports=function(o){return o&&"object"==typeof o&&"function"==typeof o.copy&&"function"==typeof o.fill&&"function"==typeof o.readUInt8};
},{}],"F8IV":[function(require,module,exports) {
"function"==typeof Object.create?module.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};
},{}],"wqTM":[function(require,module,exports) {
var process = require("process");
var e=require("process"),t=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},r=/%[sdj%]/g;exports.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}n=1;for(var o=arguments,u=o.length,s=String(e).replace(r,function(e){if("%%"===e)return"%";if(n>=u)return e;switch(e){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(t){return"[Circular]"}default:return e}}),c=o[n];n<u;c=o[++n])h(c)||!S(c)?s+=" "+c:s+=" "+i(c);return s},exports.deprecate=function(t,r){if(void 0!==e&&!0===e.noDeprecation)return t;if(void 0===e)return function(){return exports.deprecate(t,r).apply(this,arguments)};var n=!1;return function(){if(!n){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),n=!0}return t.apply(this,arguments)}};var n,o={};function i(e,t){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),b(t)?r.showHidden=t:t&&exports._extend(r,t),j(r.showHidden)&&(r.showHidden=!1),j(r.depth)&&(r.depth=2),j(r.colors)&&(r.colors=!1),j(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),p(r,e,r.depth)}function u(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function s(e,t){return e}function c(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function p(e,t,r){if(e.customInspect&&t&&P(t.inspect)&&t.inspect!==exports.inspect&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return v(n)||(n=p(e,n,r)),n}var o=l(e,t);if(o)return o;var i=Object.keys(t),u=c(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(t)),E(t)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return f(t);if(0===i.length){if(P(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(w(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(z(t))return e.stylize(Date.prototype.toString.call(t),"date");if(E(t))return f(t)}var b,h="",m=!1,x=["{","}"];(d(t)&&(m=!0,x=["[","]"]),P(t))&&(h=" [Function"+(t.name?": "+t.name:"")+"]");return w(t)&&(h=" "+RegExp.prototype.toString.call(t)),z(t)&&(h=" "+Date.prototype.toUTCString.call(t)),E(t)&&(h=" "+f(t)),0!==i.length||m&&0!=t.length?r<0?w(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),b=m?a(e,t,r,u,i):i.map(function(n){return y(e,t,r,u,n,m)}),e.seen.pop(),g(b,h,x)):x[0]+h+x[1]}function l(e,t){if(j(t))return e.stylize("undefined","undefined");if(v(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return x(t)?e.stylize(""+t,"number"):b(t)?e.stylize(""+t,"boolean"):h(t)?e.stylize("null","null"):void 0}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function a(e,t,r,n,o){for(var i=[],u=0,s=t.length;u<s;++u)A(t,String(u))?i.push(y(e,t,r,n,String(u),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(y(e,t,r,n,o,!0))}),i}function y(e,t,r,n,o,i){var u,s,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),A(n,o)||(u="["+o+"]"),s||(e.seen.indexOf(c.value)<0?(s=h(r)?p(e,c.value,null):p(e,c.value,r-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),j(u)){if(i&&o.match(/^\d+$/))return s;(u=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(u=u.substr(1,u.length-2),u=e.stylize(u,"name")):(u=u.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),u=e.stylize(u,"string"))}return u+": "+s}function g(e,t,r){return e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function d(e){return Array.isArray(e)}function b(e){return"boolean"==typeof e}function h(e){return null===e}function m(e){return null==e}function x(e){return"number"==typeof e}function v(e){return"string"==typeof e}function O(e){return"symbol"==typeof e}function j(e){return void 0===e}function w(e){return S(e)&&"[object RegExp]"===T(e)}function S(e){return"object"==typeof e&&null!==e}function z(e){return S(e)&&"[object Date]"===T(e)}function E(e){return S(e)&&("[object Error]"===T(e)||e instanceof Error)}function P(e){return"function"==typeof e}function D(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function T(e){return Object.prototype.toString.call(e)}function N(e){return e<10?"0"+e.toString(10):e.toString(10)}exports.debuglog=function(t){if(j(n)&&(n=""),t=t.toUpperCase(),!o[t])if(new RegExp("\\b"+t+"\\b","i").test(n)){var r=e.pid;o[t]=function(){var e=exports.format.apply(exports,arguments);console.error("%s %d: %s",t,r,e)}}else o[t]=function(){};return o[t]},exports.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=d,exports.isBoolean=b,exports.isNull=h,exports.isNullOrUndefined=m,exports.isNumber=x,exports.isString=v,exports.isSymbol=O,exports.isUndefined=j,exports.isRegExp=w,exports.isObject=S,exports.isDate=z,exports.isError=E,exports.isFunction=P,exports.isPrimitive=D,exports.isBuffer=require("./support/isBuffer");var F=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function k(){var e=new Date,t=[N(e.getHours()),N(e.getMinutes()),N(e.getSeconds())].join(":");return[e.getDate(),F[e.getMonth()],t].join(" ")}function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}exports.log=function(){console.log("%s - %s",k(),exports.format.apply(exports,arguments))},exports.inherits=require("inherits"),exports._extend=function(e,t){if(!t||!S(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var J="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function R(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}function H(r){if("function"!=typeof r)throw new TypeError('The "original" argument must be of type Function');function n(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var o=t.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var i=this,u=function(){return o.apply(i,arguments)};r.apply(this,t).then(function(t){e.nextTick(u,null,t)},function(t){e.nextTick(R,t,u)})}return Object.setPrototypeOf(n,Object.getPrototypeOf(r)),Object.defineProperties(n,t(r)),n}exports.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(J&&e[J]){var r;if("function"!=typeof(r=e[J]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(r,J,{value:r,enumerable:!1,writable:!1,configurable:!0}),r}function r(){for(var t,r,n=new Promise(function(e,n){t=e,r=n}),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push(function(e,n){e?r(e):t(n)});try{e.apply(this,o)}catch(u){r(u)}return n}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),J&&Object.defineProperty(r,J,{value:r,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(r,t(e))},exports.promisify.custom=J,exports.callbackify=H;
},{"./support/isBuffer":"jSD1","inherits":"F8IV","process":"g5IB"}],"epIx":[function(require,module,exports) {
var e=require("./core"),r=require("./sequential_executor"),t=require("./discover_endpoint").discoverEndpoint;function i(e){if(!e.service.api.operations)return"";var r=e.service.api.operations[e.operation];return r?r.authtype:""}e.EventListeners={Core:{}},e.EventListeners={Core:(new r).addNamedListeners(function(r,n){n("VALIDATE_CREDENTIALS","validate",function(r,t){if(!r.service.api.signatureVersion&&!r.service.config.signatureVersion)return t();r.service.config.getCredentials(function(i){i&&(r.response.error=e.util.error(i,{code:"CredentialsError",message:"Missing credentials in config, if using AWS_CONFIG_FILE, set AWS_SDK_LOAD_CONFIG=1"})),t()})}),r("VALIDATE_REGION","validate",function(r){if(!r.service.isGlobalEndpoint){var t=new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/);r.service.config.region?t.test(r.service.config.region)||(r.response.error=e.util.error(new Error,{code:"ConfigError",message:"Invalid region in config"})):r.response.error=e.util.error(new Error,{code:"ConfigError",message:"Missing region in config"})}}),r("BUILD_IDEMPOTENCY_TOKENS","validate",function(r){if(r.service.api.operations){var t=r.service.api.operations[r.operation];if(t){var i=t.idempotentMembers;if(i.length){for(var n=e.util.copy(r.params),o=0,s=i.length;o<s;o++)n[i[o]]||(n[i[o]]=e.util.uuid.v4());r.params=n}}}}),r("VALIDATE_PARAMETERS","validate",function(r){if(r.service.api.operations){var t=r.service.api.operations[r.operation].input,i=r.service.config.paramValidation;new e.ParamValidator(i).validate(t,r.params)}}),n("COMPUTE_SHA256","afterBuild",function(r,t){if(r.haltHandlersOnError(),r.service.api.operations){var i=r.service.api.operations[r.operation],n=i?i.authtype:"";if(!r.service.api.signatureVersion&&!n&&!r.service.config.signatureVersion)return t();if(r.service.getSignerClass(r)===e.Signers.V4){var o=r.httpRequest.body||"";if(n.indexOf("unsigned-body")>=0)return r.httpRequest.headers["X-Amz-Content-Sha256"]="UNSIGNED-PAYLOAD",t();e.util.computeSha256(o,function(e,i){e?t(e):(r.httpRequest.headers["X-Amz-Content-Sha256"]=i,t())})}else t()}}),r("SET_CONTENT_LENGTH","afterBuild",function(r){var t=i(r),n=e.util.getRequestPayloadShape(r);if(void 0===r.httpRequest.headers["Content-Length"])try{var o=e.util.string.byteLength(r.httpRequest.body);r.httpRequest.headers["Content-Length"]=o}catch(s){if(n&&n.isStreaming){if(n.requiresLength)throw s;if(t.indexOf("unsigned-body")>=0)return void(r.httpRequest.headers["Transfer-Encoding"]="chunked");throw s}throw s}}),r("SET_HTTP_HOST","afterBuild",function(e){e.httpRequest.headers.Host=e.httpRequest.endpoint.host}),r("RESTART","restart",function(){var r=this.response.error;r&&r.retryable&&(this.httpRequest=new e.HttpRequest(this.service.endpoint,this.service.region),this.response.retryCount<this.service.config.maxRetries?this.response.retryCount++:this.response.error=null)});n("DISCOVER_ENDPOINT","sign",t,!0),n("SIGN","sign",function(e,r){var t=e.service,i=(e.service.api.operations||{})[e.operation],n=i?i.authtype:"";if(!t.api.signatureVersion&&!n&&!t.config.signatureVersion)return r();t.config.getCredentials(function(n,o){if(n)return e.response.error=n,r();try{var s=t.getSkewCorrectedDate(),a=new(t.getSignerClass(e))(e.httpRequest,t.api.signingName||t.api.endpointPrefix,{signatureCache:t.config.signatureCache,operation:i,signatureVersion:t.api.signatureVersion});a.setServiceClientId(t._clientId),delete e.httpRequest.headers.Authorization,delete e.httpRequest.headers.Date,delete e.httpRequest.headers["X-Amz-Date"],a.addAuthorization(o,s),e.signedAt=s}catch(u){e.response.error=u}r()})}),r("VALIDATE_RESPONSE","validateResponse",function(r){this.service.successfulResponse(r,this)?(r.data={},r.error=null):(r.data=null,r.error=e.util.error(new Error,{code:"UnknownError",message:"An unknown error occurred."}))}),n("SEND","send",function(r,t){function i(i){r.httpResponse.stream=i;var n=r.request.httpRequest.stream,o=r.request.service,s=o.api,a=r.request.operation,u=s.operations[a]||{};i.on("headers",function(n,s,a){if(r.request.emit("httpHeaders",[n,s,r,a]),!r.httpResponse.streaming)if(2===e.HttpClient.streamsApiVersion){if(u.hasEventOutput&&o.successfulResponse(r))return r.request.emit("httpDone"),void t();i.on("readable",function(){var e=i.read();null!==e&&r.request.emit("httpData",[e,r])})}else i.on("data",function(e){r.request.emit("httpData",[e,r])})}),i.on("end",function(){if(!n||!n.didCallback){if(2===e.HttpClient.streamsApiVersion&&u.hasEventOutput&&o.successfulResponse(r))return;r.request.emit("httpDone"),t()}})}function n(i){if("RequestAbortedError"!==i.code){var n="TimeoutError"===i.code?i.code:"NetworkingError";i=e.util.error(i,{code:n,region:r.request.httpRequest.region,hostname:r.request.httpRequest.endpoint.hostname,retryable:!0})}r.error=i,r.request.emit("httpError",[r.error,r],function(){t()})}function o(){var t,o=e.HttpClient.getInstance(),s=r.request.service.config.httpOptions||{};try{var a=o.handleRequest(r.request.httpRequest,s,i,n);(t=a).on("sendProgress",function(e){r.request.emit("httpUploadProgress",[e,r])}),t.on("receiveProgress",function(e){r.request.emit("httpDownloadProgress",[e,r])})}catch(u){n(u)}}r.httpResponse._abortCallback=t,r.error=null,r.data=null,(r.request.service.getSkewCorrectedDate()-this.signedAt)/1e3>=600?this.emit("sign",[this],function(e){e?t(e):o()}):o()}),r("HTTP_HEADERS","httpHeaders",function(r,t,i,n){i.httpResponse.statusCode=r,i.httpResponse.statusMessage=n,i.httpResponse.headers=t,i.httpResponse.body=e.util.buffer.toBuffer(""),i.httpResponse.buffers=[],i.httpResponse.numBytes=0;var o=t.date||t.Date,s=i.request.service;if(o){var a=Date.parse(o);s.config.correctClockSkew&&s.isClockSkewed(a)&&s.applyClockOffset(a)}}),r("HTTP_DATA","httpData",function(r,t){if(r){if(e.util.isNode()){t.httpResponse.numBytes+=r.length;var i=t.httpResponse.headers["content-length"],n={loaded:t.httpResponse.numBytes,total:i};t.request.emit("httpDownloadProgress",[n,t])}t.httpResponse.buffers.push(e.util.buffer.toBuffer(r))}}),r("HTTP_DONE","httpDone",function(r){if(r.httpResponse.buffers&&r.httpResponse.buffers.length>0){var t=e.util.buffer.concat(r.httpResponse.buffers);r.httpResponse.body=t}delete r.httpResponse.numBytes,delete r.httpResponse.buffers}),r("FINALIZE_ERROR","retry",function(e){e.httpResponse.statusCode&&(e.error.statusCode=e.httpResponse.statusCode,void 0===e.error.retryable&&(e.error.retryable=this.service.retryableError(e.error,this)))}),r("INVALIDATE_CREDENTIALS","retry",function(e){if(e.error)switch(e.error.code){case"RequestExpired":case"ExpiredTokenException":case"ExpiredToken":e.error.retryable=!0,e.request.service.config.credentials.expired=!0}}),r("EXPIRED_SIGNATURE","retry",function(e){var r=e.error;r&&"string"==typeof r.code&&"string"==typeof r.message&&r.code.match(/Signature/)&&r.message.match(/expired/)&&(e.error.retryable=!0)}),r("CLOCK_SKEWED","retry",function(e){e.error&&this.service.clockSkewError(e.error)&&this.service.config.correctClockSkew&&(e.error.retryable=!0)}),r("REDIRECT","retry",function(r){r.error&&r.error.statusCode>=300&&r.error.statusCode<400&&r.httpResponse.headers.location&&(this.httpRequest.endpoint=new e.Endpoint(r.httpResponse.headers.location),this.httpRequest.headers.Host=this.httpRequest.endpoint.host,r.error.redirect=!0,r.error.retryable=!0)}),r("RETRY_CHECK","retry",function(e){e.error&&(e.error.redirect&&e.redirectCount<e.maxRedirects?e.error.retryDelay=0:e.retryCount<e.maxRetries&&(e.error.retryDelay=this.service.retryDelays(e.retryCount,e.error)||0))}),n("RESET_RETRY_STATE","afterRetry",function(e,r){var t,i=!1;e.error&&(t=e.error.retryDelay||0,e.error.retryable&&e.retryCount<e.maxRetries?(e.retryCount++,i=!0):e.error.redirect&&e.redirectCount<e.maxRedirects&&(e.redirectCount++,i=!0)),i&&t>=0?(e.error=null,setTimeout(r,t)):r()})}),CorePost:(new r).addNamedListeners(function(r){r("EXTRACT_REQUEST_ID","extractData",e.util.extractRequestId),r("EXTRACT_REQUEST_ID","extractError",e.util.extractRequestId),r("ENOTFOUND_ERROR","httpError",function(r){if("NetworkingError"===r.code&&function(r){return"ENOTFOUND"===r.errno||"number"==typeof r.errno&&"function"==typeof e.util.getSystemErrorName&&["EAI_NONAME","EAI_NODATA"].indexOf(e.util.getSystemErrorName(r.errno)>=0)}(r)){var t="Inaccessible host: `"+r.hostname+"'. This service may not be available in the `"+r.region+"' region.";this.response.error=e.util.error(new Error(t),{code:"UnknownEndpoint",region:r.region,hostname:r.hostname,retryable:!0,originalError:r})}})}),Logger:(new r).addNamedListeners(function(r){r("LOG_REQUEST","complete",function(r){var t=r.request,i=t.service.config.logger;if(i){var n=function(){var n=(r.request.service.getSkewCorrectedDate().getTime()-t.startTime.getTime())/1e3,o=!!i.isTTY,s=r.httpResponse.statusCode,a=t.params;t.service.api.operations&&t.service.api.operations[t.operation]&&t.service.api.operations[t.operation].input&&(a=function r(t,i){if(!i)return i;if(t.isSensitive)return"***SensitiveInformation***";switch(t.type){case"structure":var n={};return e.util.each(i,function(e,i){Object.prototype.hasOwnProperty.call(t.members,e)?n[e]=r(t.members[e],i):n[e]=i}),n;case"list":var o=[];return e.util.arrayEach(i,function(e,i){o.push(r(t.member,e))}),o;case"map":var s={};return e.util.each(i,function(e,i){s[e]=r(t.value,i)}),s;default:return i}}(t.service.api.operations[t.operation].input,t.params));var u=require("util").inspect(a,!0,null),c="";return o&&(c+="[33m"),c+="[AWS "+t.service.serviceIdentifier+" "+s,c+=" "+n.toString()+"s "+r.retryCount+" retries]",o&&(c+="[0;1m"),c+=" "+e.util.string.lowerFirst(t.operation),c+="("+u+")",o&&(c+="[0m"),c}();"function"==typeof i.log?i.log(n):"function"==typeof i.write&&i.write(n+"\n")}})}),Json:(new r).addNamedListeners(function(e){var r=require("./protocol/json");e("BUILD","build",r.buildRequest),e("EXTRACT_DATA","extractData",r.extractData),e("EXTRACT_ERROR","extractError",r.extractError)}),Rest:(new r).addNamedListeners(function(e){var r=require("./protocol/rest");e("BUILD","build",r.buildRequest),e("EXTRACT_DATA","extractData",r.extractData),e("EXTRACT_ERROR","extractError",r.extractError)}),RestJson:(new r).addNamedListeners(function(e){var r=require("./protocol/rest_json");e("BUILD","build",r.buildRequest),e("EXTRACT_DATA","extractData",r.extractData),e("EXTRACT_ERROR","extractError",r.extractError)}),RestXml:(new r).addNamedListeners(function(e){var r=require("./protocol/rest_xml");e("BUILD","build",r.buildRequest),e("EXTRACT_DATA","extractData",r.extractData),e("EXTRACT_ERROR","extractError",r.extractError)}),Query:(new r).addNamedListeners(function(e){var r=require("./protocol/query");e("BUILD","build",r.buildRequest),e("EXTRACT_DATA","extractData",r.extractData),e("EXTRACT_ERROR","extractError",r.extractError)})};
},{"./core":"hd5g","./sequential_executor":"GKVf","./discover_endpoint":"fu9W","util":"wqTM","./protocol/json":"ko2o","./protocol/rest":"xf3G","./protocol/rest_json":"tywJ","./protocol/rest_xml":"BPdO","./protocol/query":"eJRP"}],"EBbK":[function(require,module,exports) {
function t(t,n){this.currentState=n||null,this.states=t||{}}t.prototype.runTo=function(t,n,e,l){"function"==typeof t&&(l=e,e=n,n=t,t=null);var u=this,r=u.states[u.currentState];r.fn.call(e||u,l,function(l){if(l){if(!r.fail)return n?n.call(e,l):null;u.currentState=r.fail}else{if(!r.accept)return n?n.call(e):null;u.currentState=r.accept}if(u.currentState===t)return n?n.call(e,l):null;u.runTo(t,n,e,l)})},t.prototype.addState=function(t,n,e,l){return"function"==typeof n?(l=n,n=null,e=null):"function"==typeof e&&(l=e,e=null),this.currentState||(this.currentState=t),this.states[t]={accept:n,fail:e,fn:l},this},module.exports=t;
},{}],"Bwjj":[function(require,module,exports) {
!function(e){"use strict";function t(e){return null!==e&&"[object Array]"===Object.prototype.toString.call(e)}function r(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function n(e,i){if(e===i)return!0;if(Object.prototype.toString.call(e)!==Object.prototype.toString.call(i))return!1;if(!0===t(e)){if(e.length!==i.length)return!1;for(var s=0;s<e.length;s++)if(!1===n(e[s],i[s]))return!1;return!0}if(!0===r(e)){var a={};for(var u in e)if(hasOwnProperty.call(e,u)){if(!1===n(e[u],i[u]))return!1;a[u]=!0}for(var o in i)if(hasOwnProperty.call(i,o)&&!0!==a[o])return!1;return!0}return!1}function i(e){if(""===e||!1===e||null===e)return!0;if(t(e)&&0===e.length)return!0;if(r(e)){for(var n in e)if(e.hasOwnProperty(n))return!1;return!0}return!1}var s;s="function"==typeof String.prototype.trimLeft?function(e){return e.trimLeft()}:function(e){return e.match(/^\s*(.*)/)[1]};var a=0,u=1,o=2,c=3,h=4,l=6,_=8,p=9,f={".":"Dot","*":"Star",",":"Comma",":":"Colon","{":"Lbrace","}":"Rbrace","]":"Rbracket","(":"Lparen",")":"Rparen","@":"Current"},d={"<":!0,">":!0,"=":!0,"!":!0},v={" ":!0,"\t":!0,"\n":!0};function y(e){return e>="0"&&e<="9"||"-"===e}function g(){}g.prototype={tokenize:function(e){var t,r,n,i,s=[];for(this._current=0;this._current<e.length;)if((i=e[this._current])>="a"&&i<="z"||i>="A"&&i<="Z"||"_"===i)t=this._current,r=this._consumeUnquotedIdentifier(e),s.push({type:"UnquotedIdentifier",value:r,start:t});else if(void 0!==f[e[this._current]])s.push({type:f[e[this._current]],value:e[this._current],start:this._current}),this._current++;else if(y(e[this._current]))n=this._consumeNumber(e),s.push(n);else if("["===e[this._current])n=this._consumeLBracket(e),s.push(n);else if('"'===e[this._current])t=this._current,r=this._consumeQuotedIdentifier(e),s.push({type:"QuotedIdentifier",value:r,start:t});else if("'"===e[this._current])t=this._current,r=this._consumeRawStringLiteral(e),s.push({type:"Literal",value:r,start:t});else if("`"===e[this._current]){t=this._current;var a=this._consumeLiteral(e);s.push({type:"Literal",value:a,start:t})}else if(void 0!==d[e[this._current]])s.push(this._consumeOperator(e));else if(void 0!==v[e[this._current]])this._current++;else if("&"===e[this._current])t=this._current,this._current++,"&"===e[this._current]?(this._current++,s.push({type:"And",value:"&&",start:t})):s.push({type:"Expref",value:"&",start:t});else{if("|"!==e[this._current]){var u=new Error("Unknown character:"+e[this._current]);throw u.name="LexerError",u}t=this._current,this._current++,"|"===e[this._current]?(this._current++,s.push({type:"Or",value:"||",start:t})):s.push({type:"Pipe",value:"|",start:t})}return s},_consumeUnquotedIdentifier:function(e){var t,r=this._current;for(this._current++;this._current<e.length&&((t=e[this._current])>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9"||"_"===t);)this._current++;return e.slice(r,this._current)},_consumeQuotedIdentifier:function(e){var t=this._current;this._current++;for(var r=e.length;'"'!==e[this._current]&&this._current<r;){var n=this._current;"\\"!==e[n]||"\\"!==e[n+1]&&'"'!==e[n+1]?n++:n+=2,this._current=n}return this._current++,JSON.parse(e.slice(t,this._current))},_consumeRawStringLiteral:function(e){var t=this._current;this._current++;for(var r=e.length;"'"!==e[this._current]&&this._current<r;){var n=this._current;"\\"!==e[n]||"\\"!==e[n+1]&&"'"!==e[n+1]?n++:n+=2,this._current=n}return this._current++,e.slice(t+1,this._current-1).replace("\\'","'")},_consumeNumber:function(e){var t=this._current;this._current++;for(var r=e.length;y(e[this._current])&&this._current<r;)this._current++;return{type:"Number",value:parseInt(e.slice(t,this._current)),start:t}},_consumeLBracket:function(e){var t=this._current;return this._current++,"?"===e[this._current]?(this._current++,{type:"Filter",value:"[?",start:t}):"]"===e[this._current]?(this._current++,{type:"Flatten",value:"[]",start:t}):{type:"Lbracket",value:"[",start:t}},_consumeOperator:function(e){var t=this._current,r=e[t];return this._current++,"!"===r?"="===e[this._current]?(this._current++,{type:"NE",value:"!=",start:t}):{type:"Not",value:"!",start:t}:"<"===r?"="===e[this._current]?(this._current++,{type:"LTE",value:"<=",start:t}):{type:"LT",value:"<",start:t}:">"===r?"="===e[this._current]?(this._current++,{type:"GTE",value:">=",start:t}):{type:"GT",value:">",start:t}:"="===r&&"="===e[this._current]?(this._current++,{type:"EQ",value:"==",start:t}):void 0},_consumeLiteral:function(e){this._current++;for(var t,r=this._current,n=e.length;"`"!==e[this._current]&&this._current<n;){var i=this._current;"\\"!==e[i]||"\\"!==e[i+1]&&"`"!==e[i+1]?i++:i+=2,this._current=i}var a=s(e.slice(r,this._current));return a=a.replace("\\`","`"),t=this._looksLikeJSON(a)?JSON.parse(a):JSON.parse('"'+a+'"'),this._current++,t},_looksLikeJSON:function(e){if(""===e)return!1;if('[{"'.indexOf(e[0])>=0)return!0;if(["true","false","null"].indexOf(e)>=0)return!0;if(!("-0123456789".indexOf(e[0])>=0))return!1;try{return JSON.parse(e),!0}catch(t){return!1}}};var m={};function k(){}function b(e){this.runtime=e}function x(e){this._interpreter=e,this.functionTable={abs:{_func:this._functionAbs,_signature:[{types:[a]}]},avg:{_func:this._functionAvg,_signature:[{types:[_]}]},ceil:{_func:this._functionCeil,_signature:[{types:[a]}]},contains:{_func:this._functionContains,_signature:[{types:[o,c]},{types:[u]}]},ends_with:{_func:this._functionEndsWith,_signature:[{types:[o]},{types:[o]}]},floor:{_func:this._functionFloor,_signature:[{types:[a]}]},length:{_func:this._functionLength,_signature:[{types:[o,c,h]}]},map:{_func:this._functionMap,_signature:[{types:[l]},{types:[c]}]},max:{_func:this._functionMax,_signature:[{types:[_,p]}]},merge:{_func:this._functionMerge,_signature:[{types:[h],variadic:!0}]},max_by:{_func:this._functionMaxBy,_signature:[{types:[c]},{types:[l]}]},sum:{_func:this._functionSum,_signature:[{types:[_]}]},starts_with:{_func:this._functionStartsWith,_signature:[{types:[o]},{types:[o]}]},min:{_func:this._functionMin,_signature:[{types:[_,p]}]},min_by:{_func:this._functionMinBy,_signature:[{types:[c]},{types:[l]}]},type:{_func:this._functionType,_signature:[{types:[u]}]},keys:{_func:this._functionKeys,_signature:[{types:[h]}]},values:{_func:this._functionValues,_signature:[{types:[h]}]},sort:{_func:this._functionSort,_signature:[{types:[p,_]}]},sort_by:{_func:this._functionSortBy,_signature:[{types:[c]},{types:[l]}]},join:{_func:this._functionJoin,_signature:[{types:[o]},{types:[p]}]},reverse:{_func:this._functionReverse,_signature:[{types:[o,c]}]},to_array:{_func:this._functionToArray,_signature:[{types:[u]}]},to_string:{_func:this._functionToString,_signature:[{types:[u]}]},to_number:{_func:this._functionToNumber,_signature:[{types:[u]}]},not_null:{_func:this._functionNotNull,_signature:[{types:[u],variadic:!0}]}}}m.EOF=0,m.UnquotedIdentifier=0,m.QuotedIdentifier=0,m.Rbracket=0,m.Rparen=0,m.Comma=0,m.Rbrace=0,m.Number=0,m.Current=0,m.Expref=0,m.Pipe=1,m.Or=2,m.And=3,m.EQ=5,m.GT=5,m.LT=5,m.GTE=5,m.LTE=5,m.NE=5,m.Flatten=9,m.Star=20,m.Filter=21,m.Dot=40,m.Not=45,m.Lbrace=50,m.Lbracket=55,m.Lparen=60,k.prototype={parse:function(e){this._loadTokens(e),this.index=0;var t=this.expression(0);if("EOF"!==this._lookahead(0)){var r=this._lookaheadToken(0),n=new Error("Unexpected token type: "+r.type+", value: "+r.value);throw n.name="ParserError",n}return t},_loadTokens:function(e){var t=(new g).tokenize(e);t.push({type:"EOF",value:"",start:e.length}),this.tokens=t},expression:function(e){var t=this._lookaheadToken(0);this._advance();for(var r=this.nud(t),n=this._lookahead(0);e<m[n];)this._advance(),r=this.led(n,r),n=this._lookahead(0);return r},_lookahead:function(e){return this.tokens[this.index+e].type},_lookaheadToken:function(e){return this.tokens[this.index+e]},_advance:function(){this.index++},nud:function(e){var t,r;switch(e.type){case"Literal":return{type:"Literal",value:e.value};case"UnquotedIdentifier":return{type:"Field",name:e.value};case"QuotedIdentifier":var n={type:"Field",name:e.value};if("Lparen"===this._lookahead(0))throw new Error("Quoted identifier not allowed for function names.");return n;case"Not":return{type:"NotExpression",children:[t=this.expression(m.Not)]};case"Star":return t=null,{type:"ValueProjection",children:[{type:"Identity"},t="Rbracket"===this._lookahead(0)?{type:"Identity"}:this._parseProjectionRHS(m.Star)]};case"Filter":return this.led(e.type,{type:"Identity"});case"Lbrace":return this._parseMultiselectHash();case"Flatten":return{type:"Projection",children:[{type:"Flatten",children:[{type:"Identity"}]},t=this._parseProjectionRHS(m.Flatten)]};case"Lbracket":return"Number"===this._lookahead(0)||"Colon"===this._lookahead(0)?(t=this._parseIndexExpression(),this._projectIfSlice({type:"Identity"},t)):"Star"===this._lookahead(0)&&"Rbracket"===this._lookahead(1)?(this._advance(),this._advance(),{type:"Projection",children:[{type:"Identity"},t=this._parseProjectionRHS(m.Star)]}):this._parseMultiselectList();case"Current":return{type:"Current"};case"Expref":return{type:"ExpressionReference",children:[r=this.expression(m.Expref)]};case"Lparen":for(var i=[];"Rparen"!==this._lookahead(0);)"Current"===this._lookahead(0)?(r={type:"Current"},this._advance()):r=this.expression(0),i.push(r);return this._match("Rparen"),i[0];default:this._errorToken(e)}},led:function(e,t){var r;switch(e){case"Dot":var n=m.Dot;return"Star"!==this._lookahead(0)?{type:"Subexpression",children:[t,r=this._parseDotRHS(n)]}:(this._advance(),{type:"ValueProjection",children:[t,r=this._parseProjectionRHS(n)]});case"Pipe":return{type:"Pipe",children:[t,r=this.expression(m.Pipe)]};case"Or":return{type:"OrExpression",children:[t,r=this.expression(m.Or)]};case"And":return{type:"AndExpression",children:[t,r=this.expression(m.And)]};case"Lparen":for(var i,s=t.name,a=[];"Rparen"!==this._lookahead(0);)"Current"===this._lookahead(0)?(i={type:"Current"},this._advance()):i=this.expression(0),"Comma"===this._lookahead(0)&&this._match("Comma"),a.push(i);return this._match("Rparen"),{type:"Function",name:s,children:a};case"Filter":var u=this.expression(0);return this._match("Rbracket"),{type:"FilterProjection",children:[t,r="Flatten"===this._lookahead(0)?{type:"Identity"}:this._parseProjectionRHS(m.Filter),u]};case"Flatten":return{type:"Projection",children:[{type:"Flatten",children:[t]},this._parseProjectionRHS(m.Flatten)]};case"EQ":case"NE":case"GT":case"GTE":case"LT":case"LTE":return this._parseComparator(t,e);case"Lbracket":var o=this._lookaheadToken(0);return"Number"===o.type||"Colon"===o.type?(r=this._parseIndexExpression(),this._projectIfSlice(t,r)):(this._match("Star"),this._match("Rbracket"),{type:"Projection",children:[t,r=this._parseProjectionRHS(m.Star)]});default:this._errorToken(this._lookaheadToken(0))}},_match:function(e){if(this._lookahead(0)!==e){var t=this._lookaheadToken(0),r=new Error("Expected "+e+", got: "+t.type);throw r.name="ParserError",r}this._advance()},_errorToken:function(e){var t=new Error("Invalid token ("+e.type+'): "'+e.value+'"');throw t.name="ParserError",t},_parseIndexExpression:function(){if("Colon"===this._lookahead(0)||"Colon"===this._lookahead(1))return this._parseSliceExpression();var e={type:"Index",value:this._lookaheadToken(0).value};return this._advance(),this._match("Rbracket"),e},_projectIfSlice:function(e,t){var r={type:"IndexExpression",children:[e,t]};return"Slice"===t.type?{type:"Projection",children:[r,this._parseProjectionRHS(m.Star)]}:r},_parseSliceExpression:function(){for(var e=[null,null,null],t=0,r=this._lookahead(0);"Rbracket"!==r&&t<3;){if("Colon"===r)t++,this._advance();else{if("Number"!==r){var n=this._lookahead(0),i=new Error("Syntax error, unexpected token: "+n.value+"("+n.type+")");throw i.name="Parsererror",i}e[t]=this._lookaheadToken(0).value,this._advance()}r=this._lookahead(0)}return this._match("Rbracket"),{type:"Slice",children:e}},_parseComparator:function(e,t){return{type:"Comparator",name:t,children:[e,this.expression(m[t])]}},_parseDotRHS:function(e){var t=this._lookahead(0);return["UnquotedIdentifier","QuotedIdentifier","Star"].indexOf(t)>=0?this.expression(e):"Lbracket"===t?(this._match("Lbracket"),this._parseMultiselectList()):"Lbrace"===t?(this._match("Lbrace"),this._parseMultiselectHash()):void 0},_parseProjectionRHS:function(e){var t;if(m[this._lookahead(0)]<10)t={type:"Identity"};else if("Lbracket"===this._lookahead(0))t=this.expression(e);else if("Filter"===this._lookahead(0))t=this.expression(e);else{if("Dot"!==this._lookahead(0)){var r=this._lookaheadToken(0),n=new Error("Sytanx error, unexpected token: "+r.value+"("+r.type+")");throw n.name="ParserError",n}this._match("Dot"),t=this._parseDotRHS(e)}return t},_parseMultiselectList:function(){for(var e=[];"Rbracket"!==this._lookahead(0);){var t=this.expression(0);if(e.push(t),"Comma"===this._lookahead(0)&&(this._match("Comma"),"Rbracket"===this._lookahead(0)))throw new Error("Unexpected token Rbracket")}return this._match("Rbracket"),{type:"MultiSelectList",children:e}},_parseMultiselectHash:function(){for(var e,t,r,n=[],i=["UnquotedIdentifier","QuotedIdentifier"];;){if(e=this._lookaheadToken(0),i.indexOf(e.type)<0)throw new Error("Expecting an identifier token, got: "+e.type);if(t=e.value,this._advance(),this._match("Colon"),r={type:"KeyValuePair",name:t,value:this.expression(0)},n.push(r),"Comma"===this._lookahead(0))this._match("Comma");else if("Rbrace"===this._lookahead(0)){this._match("Rbrace");break}}return{type:"MultiSelectHash",children:n}}},b.prototype={search:function(e,t){return this.visit(e,t)},visit:function(e,s){var a,u,o,c,h,l,_,p,f;switch(e.type){case"Field":return null===s?null:r(s)?void 0===(l=s[e.name])?null:l:null;case"Subexpression":for(o=this.visit(e.children[0],s),f=1;f<e.children.length;f++)if(null===(o=this.visit(e.children[1],o)))return null;return o;case"IndexExpression":return _=this.visit(e.children[0],s),this.visit(e.children[1],_);case"Index":if(!t(s))return null;var d=e.value;return d<0&&(d=s.length+d),void 0===(o=s[d])&&(o=null),o;case"Slice":if(!t(s))return null;var v=e.children.slice(0),y=this.computeSliceParams(s.length,v),g=y[0],m=y[1],k=y[2];if(o=[],k>0)for(f=g;f<m;f+=k)o.push(s[f]);else for(f=g;f>m;f+=k)o.push(s[f]);return o;case"Projection":var b=this.visit(e.children[0],s);if(!t(b))return null;for(p=[],f=0;f<b.length;f++)null!==(u=this.visit(e.children[1],b[f]))&&p.push(u);return p;case"ValueProjection":if(!r(b=this.visit(e.children[0],s)))return null;p=[];var x=function(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;n++)r.push(e[t[n]]);return r}(b);for(f=0;f<x.length;f++)null!==(u=this.visit(e.children[1],x[f]))&&p.push(u);return p;case"FilterProjection":if(!t(b=this.visit(e.children[0],s)))return null;var E=[],S=[];for(f=0;f<b.length;f++)i(a=this.visit(e.children[2],b[f]))||E.push(b[f]);for(var T=0;T<E.length;T++)null!==(u=this.visit(e.children[1],E[T]))&&S.push(u);return S;case"Comparator":switch(c=this.visit(e.children[0],s),h=this.visit(e.children[1],s),e.name){case"EQ":o=n(c,h);break;case"NE":o=!n(c,h);break;case"GT":o=c>h;break;case"GTE":o=c>=h;break;case"LT":o=c<h;break;case"LTE":o=c<=h;break;default:throw new Error("Unknown comparator: "+e.name)}return o;case"Flatten":var w=this.visit(e.children[0],s);if(!t(w))return null;var N=[];for(f=0;f<w.length;f++)t(u=w[f])?N.push.apply(N,u):N.push(u);return N;case"Identity":return s;case"MultiSelectList":if(null===s)return null;for(p=[],f=0;f<e.children.length;f++)p.push(this.visit(e.children[f],s));return p;case"MultiSelectHash":if(null===s)return null;var j;for(p={},f=0;f<e.children.length;f++)p[(j=e.children[f]).name]=this.visit(j.value,s);return p;case"OrExpression":return i(a=this.visit(e.children[0],s))&&(a=this.visit(e.children[1],s)),a;case"AndExpression":return!0===i(c=this.visit(e.children[0],s))?c:this.visit(e.children[1],s);case"NotExpression":return i(c=this.visit(e.children[0],s));case"Literal":return e.value;case"Pipe":return _=this.visit(e.children[0],s),this.visit(e.children[1],_);case"Current":return s;case"Function":var L=[];for(f=0;f<e.children.length;f++)L.push(this.visit(e.children[f],s));return this.runtime.callFunction(e.name,L);case"ExpressionReference":var R=e.children[0];return R.jmespathType="Expref",R;default:throw new Error("Unknown node type: "+e.type)}},computeSliceParams:function(e,t){var r=t[0],n=t[1],i=t[2],s=[null,null,null];if(null===i)i=1;else if(0===i){var a=new Error("Invalid slice, step cannot be 0");throw a.name="RuntimeError",a}var u=i<0;return r=null===r?u?e-1:0:this.capSliceRange(e,r,i),n=null===n?u?-1:e:this.capSliceRange(e,n,i),s[0]=r,s[1]=n,s[2]=i,s},capSliceRange:function(e,t,r){return t<0?(t+=e)<0&&(t=r<0?-1:0):t>=e&&(t=r<0?e-1:e),t}},x.prototype={callFunction:function(e,t){var r=this.functionTable[e];if(void 0===r)throw new Error("Unknown function: "+e+"()");return this._validateArgs(e,t,r._signature),r._func.call(this,t)},_validateArgs:function(e,t,r){var n,i,s,a;if(r[r.length-1].variadic){if(t.length<r.length)throw n=1===r.length?" argument":" arguments",new Error("ArgumentError: "+e+"() takes at least"+r.length+n+" but received "+t.length)}else if(t.length!==r.length)throw n=1===r.length?" argument":" arguments",new Error("ArgumentError: "+e+"() takes "+r.length+n+" but received "+t.length);for(var u=0;u<r.length;u++){a=!1,i=r[u].types,s=this._getTypeName(t[u]);for(var o=0;o<i.length;o++)if(this._typeMatches(s,i[o],t[u])){a=!0;break}if(!a)throw new Error("TypeError: "+e+"() expected argument "+(u+1)+" to be type "+i+" but received type "+s+" instead.")}},_typeMatches:function(e,t,r){if(t===u)return!0;if(t!==p&&t!==_&&t!==c)return e===t;if(t===c)return e===c;if(e===c){var n;t===_?n=a:t===p&&(n=o);for(var i=0;i<r.length;i++)if(!this._typeMatches(this._getTypeName(r[i]),n,r[i]))return!1;return!0}},_getTypeName:function(e){switch(Object.prototype.toString.call(e)){case"[object String]":return o;case"[object Number]":return a;case"[object Array]":return c;case"[object Boolean]":return 5;case"[object Null]":return 7;case"[object Object]":return"Expref"===e.jmespathType?l:h}},_functionStartsWith:function(e){return 0===e[0].lastIndexOf(e[1])},_functionEndsWith:function(e){var t=e[0],r=e[1];return-1!==t.indexOf(r,t.length-r.length)},_functionReverse:function(e){if(this._getTypeName(e[0])===o){for(var t=e[0],r="",n=t.length-1;n>=0;n--)r+=t[n];return r}var i=e[0].slice(0);return i.reverse(),i},_functionAbs:function(e){return Math.abs(e[0])},_functionCeil:function(e){return Math.ceil(e[0])},_functionAvg:function(e){for(var t=0,r=e[0],n=0;n<r.length;n++)t+=r[n];return t/r.length},_functionContains:function(e){return e[0].indexOf(e[1])>=0},_functionFloor:function(e){return Math.floor(e[0])},_functionLength:function(e){return r(e[0])?Object.keys(e[0]).length:e[0].length},_functionMap:function(e){for(var t=[],r=this._interpreter,n=e[0],i=e[1],s=0;s<i.length;s++)t.push(r.visit(n,i[s]));return t},_functionMerge:function(e){for(var t={},r=0;r<e.length;r++){var n=e[r];for(var i in n)t[i]=n[i]}return t},_functionMax:function(e){if(e[0].length>0){if(this._getTypeName(e[0][0])===a)return Math.max.apply(Math,e[0]);for(var t=e[0],r=t[0],n=1;n<t.length;n++)r.localeCompare(t[n])<0&&(r=t[n]);return r}return null},_functionMin:function(e){if(e[0].length>0){if(this._getTypeName(e[0][0])===a)return Math.min.apply(Math,e[0]);for(var t=e[0],r=t[0],n=1;n<t.length;n++)t[n].localeCompare(r)<0&&(r=t[n]);return r}return null},_functionSum:function(e){for(var t=0,r=e[0],n=0;n<r.length;n++)t+=r[n];return t},_functionType:function(e){switch(this._getTypeName(e[0])){case a:return"number";case o:return"string";case c:return"array";case h:return"object";case 5:return"boolean";case l:return"expref";case 7:return"null"}},_functionKeys:function(e){return Object.keys(e[0])},_functionValues:function(e){for(var t=e[0],r=Object.keys(t),n=[],i=0;i<r.length;i++)n.push(t[r[i]]);return n},_functionJoin:function(e){var t=e[0];return e[1].join(t)},_functionToArray:function(e){return this._getTypeName(e[0])===c?e[0]:[e[0]]},_functionToString:function(e){return this._getTypeName(e[0])===o?e[0]:JSON.stringify(e[0])},_functionToNumber:function(e){var t,r=this._getTypeName(e[0]);return r===a?e[0]:r!==o||(t=+e[0],isNaN(t))?null:t},_functionNotNull:function(e){for(var t=0;t<e.length;t++)if(7!==this._getTypeName(e[t]))return e[t];return null},_functionSort:function(e){var t=e[0].slice(0);return t.sort(),t},_functionSortBy:function(e){var t=e[0].slice(0);if(0===t.length)return t;var r=this._interpreter,n=e[1],i=this._getTypeName(r.visit(n,t[0]));if([a,o].indexOf(i)<0)throw new Error("TypeError");for(var s=this,u=[],c=0;c<t.length;c++)u.push([c,t[c]]);u.sort(function(e,t){var a=r.visit(n,e[1]),u=r.visit(n,t[1]);if(s._getTypeName(a)!==i)throw new Error("TypeError: expected "+i+", received "+s._getTypeName(a));if(s._getTypeName(u)!==i)throw new Error("TypeError: expected "+i+", received "+s._getTypeName(u));return a>u?1:a<u?-1:e[0]-t[0]});for(var h=0;h<u.length;h++)t[h]=u[h][1];return t},_functionMaxBy:function(e){for(var t,r,n=e[1],i=e[0],s=this.createKeyFunction(n,[a,o]),u=-1/0,c=0;c<i.length;c++)(r=s(i[c]))>u&&(u=r,t=i[c]);return t},_functionMinBy:function(e){for(var t,r,n=e[1],i=e[0],s=this.createKeyFunction(n,[a,o]),u=1/0,c=0;c<i.length;c++)(r=s(i[c]))<u&&(u=r,t=i[c]);return t},createKeyFunction:function(e,t){var r=this,n=this._interpreter;return function(i){var s=n.visit(e,i);if(t.indexOf(r._getTypeName(s))<0){var a="TypeError: expected one of "+t+", received "+r._getTypeName(s);throw new Error(a)}return s}}},e.tokenize=function(e){return(new g).tokenize(e)},e.compile=function(e){return(new k).parse(e)},e.search=function(e,t){var r=new k,n=new x,i=new b(n);n._interpreter=i;var s=r.parse(t);return i.search(s,e)},e.strictDeepEqual=n}("undefined"==typeof exports?this.jmespath={}:exports);
},{}],"kQpS":[function(require,module,exports) {
var process = require("process");
var e=require("process"),t=require("./core"),r=require("./state_machine"),n=t.util.inherit,s=t.util.domain,i=require("jmespath"),o={success:1,error:1,complete:1};function a(e){return Object.prototype.hasOwnProperty.call(o,e._asm.currentState)}var u=new r;u.setupStates=function(){var e=function(e,t){var r=this;r._haltHandlersOnError=!1,r.emit(r._asm.currentState,function(e){if(e)if(a(r)){if(!(s&&r.domain instanceof s.Domain))throw e;e.domainEmitter=r,e.domain=r.domain,e.domainThrown=!1,r.domain.emit("error",e)}else r.response.error=e,t(e);else t(r.response.error)})};this.addState("validate","build","error",e),this.addState("build","afterBuild","restart",e),this.addState("afterBuild","sign","restart",e),this.addState("sign","send","retry",e),this.addState("retry","afterRetry","afterRetry",e),this.addState("afterRetry","sign","error",e),this.addState("send","validateResponse","retry",e),this.addState("validateResponse","extractData","extractError",e),this.addState("extractError","extractData","retry",e),this.addState("extractData","success","retry",e),this.addState("restart","build","error",e),this.addState("success","complete","complete",e),this.addState("error","complete","complete",e),this.addState("complete",null,null,e)},u.setupStates(),t.Request=n({constructor:function(e,n,i){var o=e.endpoint,a=e.config.region,h=e.config.customUserAgent;e.isGlobalEndpoint&&(a=e.signingRegion?e.signingRegion:"us-east-1"),this.domain=s&&s.active,this.service=e,this.operation=n,this.params=i||{},this.httpRequest=new t.HttpRequest(o,a),this.httpRequest.appendToUserAgent(h),this.startTime=e.getSkewCorrectedDate(),this.response=new t.Response(this),this._asm=new r(u.states,"validate"),this._haltHandlersOnError=!1,t.SequentialExecutor.call(this),this.emit=this.emitEvent},send:function(e){return e&&(this.httpRequest.appendToUserAgent("callback"),this.on("complete",function(t){e.call(t,t.error,t.data)})),this.runTo(),this.response},build:function(e){return this.runTo("send",e)},runTo:function(e,t){return this._asm.runTo(e,t,this),this},abort:function(){return this.removeAllListeners("validateResponse"),this.removeAllListeners("extractError"),this.on("validateResponse",function(e){e.error=t.util.error(new Error("Request aborted by user"),{code:"RequestAbortedError",retryable:!1})}),this.httpRequest.stream&&!this.httpRequest.stream.didCallback&&(this.httpRequest.stream.abort(),this.httpRequest._abortCallback?this.httpRequest._abortCallback():this.removeAllListeners("send")),this},eachPage:function(e){e=t.util.fn.makeAsync(e,3),this.on("complete",function r(n){e.call(n,n.error,n.data,function(s){!1!==s&&(n.hasNextPage()?n.nextPage().on("complete",r).send():e.call(n,null,null,t.util.fn.noop))})}).send()},eachItem:function(e){var r=this;this.eachPage(function(n,s){if(n)return e(n,null);if(null===s)return e(null,null);var o=r.service.paginationConfig(r.operation).resultKey;Array.isArray(o)&&(o=o[0]);var a=i.search(s,o),u=!0;return t.util.arrayEach(a,function(r){if(!1===(u=e(null,r)))return t.util.abort}),u})},isPageable:function(){return!!this.service.paginationConfig(this.operation)},createReadStream:function(){var r=t.util.stream,n=this,s=null;return 2===t.HttpClient.streamsApiVersion?(s=new r.PassThrough,e.nextTick(function(){n.send()})):((s=new r.Stream).readable=!0,s.sent=!1,s.on("newListener",function(t){s.sent||"data"!==t||(s.sent=!0,e.nextTick(function(){n.send()}))})),this.on("error",function(e){s.emit("error",e)}),this.on("httpHeaders",function(e,i,o){if(e<300){n.removeListener("httpData",t.EventListeners.Core.HTTP_DATA),n.removeListener("httpError",t.EventListeners.Core.HTTP_ERROR),n.on("httpError",function(e){o.error=e,o.error.retryable=!1});var a,u=!1;if("HEAD"!==n.httpRequest.method&&(a=parseInt(i["content-length"],10)),void 0!==a&&!isNaN(a)&&a>=0){u=!0;var h=0}var l=function(){u&&h!==a?s.emit("error",t.util.error(new Error("Stream content length mismatch. Received "+h+" of "+a+" bytes."),{code:"StreamContentLengthMismatch"})):2===t.HttpClient.streamsApiVersion?s.end():s.emit("end")},c=o.httpResponse.createUnbufferedStream();if(2===t.HttpClient.streamsApiVersion)if(u){var d=new r.PassThrough;d._write=function(e){return e&&e.length&&(h+=e.length),r.PassThrough.prototype._write.apply(this,arguments)},d.on("end",l),s.on("error",function(e){u=!1,c.unpipe(d),d.emit("end"),d.end()}),c.pipe(d).pipe(s,{end:!1})}else c.pipe(s);else u&&c.on("data",function(e){e&&e.length&&(h+=e.length)}),c.on("data",function(e){s.emit("data",e)}),c.on("end",l);c.on("error",function(e){u=!1,s.emit("error",e)})}}),s},emitEvent:function(e,r,n){"function"==typeof r&&(n=r,r=null),n||(n=function(){}),r||(r=this.eventParameters(e,this.response)),t.SequentialExecutor.prototype.emit.call(this,e,r,function(e){e&&(this.response.error=e),n.call(this,e)})},eventParameters:function(e){switch(e){case"restart":case"validate":case"sign":case"build":case"afterValidate":case"afterBuild":return[this];case"error":return[this.response.error,this.response];default:return[this.response]}},presign:function(e,r){return r||"function"!=typeof e||(r=e,e=null),(new t.Signers.Presign).sign(this.toGet(),e,r)},isPresigned:function(){return Object.prototype.hasOwnProperty.call(this.httpRequest.headers,"presigned-expires")},toUnauthenticated:function(){return this._unAuthenticated=!0,this.removeListener("validate",t.EventListeners.Core.VALIDATE_CREDENTIALS),this.removeListener("sign",t.EventListeners.Core.SIGN),this},toGet:function(){return"query"!==this.service.api.protocol&&"ec2"!==this.service.api.protocol||(this.removeListener("build",this.buildAsGet),this.addListener("build",this.buildAsGet)),this},buildAsGet:function(e){e.httpRequest.method="GET",e.httpRequest.path=e.service.endpoint.path+"?"+e.httpRequest.body,e.httpRequest.body="",delete e.httpRequest.headers["Content-Length"],delete e.httpRequest.headers["Content-Type"]},haltHandlersOnError:function(){this._haltHandlersOnError=!0}}),t.Request.addPromisesToClass=function(e){this.prototype.promise=function(){var t=this;return this.httpRequest.appendToUserAgent("promise"),new e(function(e,r){t.on("complete",function(t){t.error?r(t.error):e(Object.defineProperty(t.data||{},"$response",{value:t}))}),t.runTo()})}},t.Request.deletePromisesFromClass=function(){delete this.prototype.promise},t.util.addPromises(t.Request),t.util.mixin(t.Request,t.SequentialExecutor);
},{"./core":"hd5g","./state_machine":"EBbK","jmespath":"Bwjj","process":"g5IB"}],"dySX":[function(require,module,exports) {
var e=require("./core"),t=e.util.inherit,s=require("jmespath");e.Response=t({constructor:function(t){this.request=t,this.data=null,this.error=null,this.retryCount=0,this.redirectCount=0,this.httpResponse=new e.HttpResponse,t&&(this.maxRetries=t.service.numRetries(),this.maxRedirects=t.service.config.maxRedirects)},nextPage:function(t){var s,r=this.request.service,n=this.request.operation;try{s=r.paginationConfig(n,!0)}catch(h){this.error=h}if(!this.hasNextPage()){if(t)t(this.error,null);else if(this.error)throw this.error;return null}var i=e.util.copy(this.request.params);if(this.nextPageTokens){var o=s.inputToken;"string"==typeof o&&(o=[o]);for(var a=0;a<o.length;a++)i[o[a]]=this.nextPageTokens[a];return r.makeRequest(this.request.operation,i,t)}return t?t(null,null):null},hasNextPage:function(){return this.cacheNextPageTokens(),!!this.nextPageTokens||void 0===this.nextPageTokens&&void 0},cacheNextPageTokens:function(){if(Object.prototype.hasOwnProperty.call(this,"nextPageTokens"))return this.nextPageTokens;this.nextPageTokens=void 0;var t=this.request.service.paginationConfig(this.request.operation);if(!t)return this.nextPageTokens;if(this.nextPageTokens=null,t.moreResults&&!s.search(this.data,t.moreResults))return this.nextPageTokens;var r=t.outputToken;return"string"==typeof r&&(r=[r]),e.util.arrayEach.call(this,r,function(e){var t=s.search(this.data,e);t&&(this.nextPageTokens=this.nextPageTokens||[],this.nextPageTokens.push(t))}),this.nextPageTokens}});
},{"./core":"hd5g","jmespath":"Bwjj"}],"PCic":[function(require,module,exports) {
var r=require("./core"),e=r.util.inherit,t=require("jmespath");function a(r){var e=r.request._waiter,t=e.config.acceptors,a=!1,i="retry";t.forEach(function(t){if(!a){var s=e.matchers[t.matcher];s&&s(r,t.expected,t.argument)&&(a=!0,i=t.state)}}),!a&&r.error&&(i="failure"),"success"===i?e.setSuccess(r):e.setError(r,"retry"===i)}r.ResourceWaiter=e({constructor:function(r,e){this.service=r,this.state=e,this.loadWaiterConfig(this.state)},service:null,state:null,config:null,matchers:{path:function(r,e,a){try{var i=t.search(r.data,a)}catch(s){return!1}return t.strictDeepEqual(i,e)},pathAll:function(r,e,a){try{var i=t.search(r.data,a)}catch(o){return!1}Array.isArray(i)||(i=[i]);var s=i.length;if(!s)return!1;for(var n=0;n<s;n++)if(!t.strictDeepEqual(i[n],e))return!1;return!0},pathAny:function(r,e,a){try{var i=t.search(r.data,a)}catch(o){return!1}Array.isArray(i)||(i=[i]);for(var s=i.length,n=0;n<s;n++)if(t.strictDeepEqual(i[n],e))return!0;return!1},status:function(r,e){var t=r.httpResponse.statusCode;return"number"==typeof t&&t===e},error:function(r,e){return"string"==typeof e&&r.error?e===r.error.code:e===!!r.error}},listeners:(new r.SequentialExecutor).addNamedListeners(function(r){r("RETRY_CHECK","retry",function(r){var e=r.request._waiter;r.error&&"ResourceNotReady"===r.error.code&&(r.error.retryDelay=1e3*(e.config.delay||0))}),r("CHECK_OUTPUT","extractData",a),r("CHECK_ERROR","extractError",a)}),wait:function(e,t){"function"==typeof e&&(t=e,e=void 0),e&&e.$waiter&&("number"==typeof(e=r.util.copy(e)).$waiter.delay&&(this.config.delay=e.$waiter.delay),"number"==typeof e.$waiter.maxAttempts&&(this.config.maxAttempts=e.$waiter.maxAttempts),delete e.$waiter);var a=this.service.makeRequest(this.config.operation,e);return a._waiter=this,a.response.maxRetries=this.config.maxAttempts,a.addListeners(this.listeners),t&&a.send(t),a},setSuccess:function(r){r.error=null,r.data=r.data||{},r.request.removeAllListeners("extractData")},setError:function(e,t){e.data=null,e.error=r.util.error(e.error||new Error,{code:"ResourceNotReady",message:"Resource is not in the state "+this.state,retryable:t})},loadWaiterConfig:function(e){if(!this.service.api.waiters[e])throw new r.util.error(new Error,{code:"StateNotFoundError",message:"State "+e+" not found."});this.config=r.util.copy(this.service.api.waiters[e])}});
},{"./core":"hd5g","jmespath":"Bwjj"}],"o51L":[function(require,module,exports) {
var e=require("../core"),t=e.util.inherit;e.Signers.V2=t(e.Signers.RequestSigner,{addAuthorization:function(t,s){s||(s=e.util.date.getDate());var r=this.request;r.params.Timestamp=e.util.date.iso8601(s),r.params.SignatureVersion="2",r.params.SignatureMethod="HmacSHA256",r.params.AWSAccessKeyId=t.accessKeyId,t.sessionToken&&(r.params.SecurityToken=t.sessionToken),delete r.params.Signature,r.params.Signature=this.signature(t),r.body=e.util.queryParamsToString(r.params),r.headers["Content-Length"]=r.body.length},signature:function(t){return e.util.crypto.hmac(t.secretAccessKey,this.stringToSign(),"base64")},stringToSign:function(){var t=[];return t.push(this.request.method),t.push(this.request.endpoint.host.toLowerCase()),t.push(this.request.pathname()),t.push(e.util.queryParamsToString(this.request.params)),t.join("\n")}}),module.exports=e.Signers.V2;
},{"../core":"hd5g"}],"nNK6":[function(require,module,exports) {
var e=require("../core"),t=e.util.inherit;e.Signers.V3=t(e.Signers.RequestSigner,{addAuthorization:function(t,s){var i=e.util.date.rfc822(s);this.request.headers["X-Amz-Date"]=i,t.sessionToken&&(this.request.headers["x-amz-security-token"]=t.sessionToken),this.request.headers["X-Amzn-Authorization"]=this.authorization(t,i)},authorization:function(e){return"AWS3 AWSAccessKeyId="+e.accessKeyId+",Algorithm=HmacSHA256,SignedHeaders="+this.signedHeaders()+",Signature="+this.signature(e)},signedHeaders:function(){var t=[];return e.util.arrayEach(this.headersToSign(),function(e){t.push(e.toLowerCase())}),t.sort().join(";")},canonicalHeaders:function(){var t=this.request.headers,s=[];return e.util.arrayEach(this.headersToSign(),function(e){s.push(e.toLowerCase().trim()+":"+String(t[e]).trim())}),s.sort().join("\n")+"\n"},headersToSign:function(){var t=[];return e.util.each(this.request.headers,function(e){("Host"===e||"Content-Encoding"===e||e.match(/^X-Amz/i))&&t.push(e)}),t},signature:function(t){return e.util.crypto.hmac(t.secretAccessKey,this.stringToSign(),"base64")},stringToSign:function(){var t=[];return t.push(this.request.method),t.push("/"),t.push(""),t.push(this.canonicalHeaders()),t.push(this.request.body),e.util.crypto.sha256(t.join("\n"))}}),module.exports=e.Signers.V3;
},{"../core":"hd5g"}],"lAFA":[function(require,module,exports) {
var e=require("../core"),r=e.util.inherit;require("./v3"),e.Signers.V3Https=r(e.Signers.V3,{authorization:function(e){return"AWS3-HTTPS AWSAccessKeyId="+e.accessKeyId+",Algorithm=HmacSHA256,Signature="+this.signature(e)},stringToSign:function(){return this.request.headers["X-Amz-Date"]}}),module.exports=e.Signers.V3Https;
},{"../core":"hd5g","./v3":"nNK6"}],"Ybid":[function(require,module,exports) {
var e=require("../core"),r={},t=[],c=50,u="aws4_request";module.exports={createScope:function(e,r,t){return[e.substr(0,8),r,t,u].join("/")},getSigningKey:function(i,s,n,o,a){var f=[e.util.crypto.hmac(i.secretAccessKey,i.accessKeyId,"base64"),s,n,o].join("_");if((a=!1!==a)&&f in r)return r[f];var y=e.util.crypto.hmac("AWS4"+i.secretAccessKey,s,"buffer"),h=e.util.crypto.hmac(y,n,"buffer"),p=e.util.crypto.hmac(h,o,"buffer"),l=e.util.crypto.hmac(p,u,"buffer");return a&&(r[f]=l,t.push(f),t.length>c&&delete r[t.shift()]),l},emptyCache:function(){r={},t=[]}};
},{"../core":"hd5g"}],"xoWJ":[function(require,module,exports) {
var e=require("../core"),t=require("./v4_credentials"),s=e.util.inherit,i="presigned-expires";e.Signers.V4=s(e.Signers.RequestSigner,{constructor:function(t,s,i){e.Signers.RequestSigner.call(this,t),this.serviceName=s,i=i||{},this.signatureCache="boolean"!=typeof i.signatureCache||i.signatureCache,this.operation=i.operation,this.signatureVersion=i.signatureVersion},algorithm:"AWS4-HMAC-SHA256",addAuthorization:function(t,s){var i=e.util.date.iso8601(s).replace(/[:\-]|\.\d{3}/g,"");this.isPresigned()?this.updateForPresigned(t,i):this.addHeaders(t,i),this.request.headers.Authorization=this.authorization(t,i)},addHeaders:function(e,t){this.request.headers["X-Amz-Date"]=t,e.sessionToken&&(this.request.headers["x-amz-security-token"]=e.sessionToken)},updateForPresigned:function(t,s){var r=this.credentialString(s),n={"X-Amz-Date":s,"X-Amz-Algorithm":this.algorithm,"X-Amz-Credential":t.accessKeyId+"/"+r,"X-Amz-Expires":this.request.headers[i],"X-Amz-SignedHeaders":this.signedHeaders()};t.sessionToken&&(n["X-Amz-Security-Token"]=t.sessionToken),this.request.headers["Content-Type"]&&(n["Content-Type"]=this.request.headers["Content-Type"]),this.request.headers["Content-MD5"]&&(n["Content-MD5"]=this.request.headers["Content-MD5"]),this.request.headers["Cache-Control"]&&(n["Cache-Control"]=this.request.headers["Cache-Control"]),e.util.each.call(this,this.request.headers,function(e,t){if(e!==i&&this.isSignableHeader(e)){var s=e.toLowerCase();0===s.indexOf("x-amz-meta-")?n[s]=t:0===s.indexOf("x-amz-")&&(n[e]=t)}});var a=this.request.path.indexOf("?")>=0?"&":"?";this.request.path+=a+e.util.queryParamsToString(n)},authorization:function(e,t){var s=[],i=this.credentialString(t);return s.push(this.algorithm+" Credential="+e.accessKeyId+"/"+i),s.push("SignedHeaders="+this.signedHeaders()),s.push("Signature="+this.signature(e,t)),s.join(", ")},signature:function(s,i){var r=t.getSigningKey(s,i.substr(0,8),this.request.region,this.serviceName,this.signatureCache);return e.util.crypto.hmac(r,this.stringToSign(i),"hex")},stringToSign:function(e){var t=[];return t.push("AWS4-HMAC-SHA256"),t.push(e),t.push(this.credentialString(e)),t.push(this.hexEncodedHash(this.canonicalString())),t.join("\n")},canonicalString:function(){var t=[],s=this.request.pathname();return"s3"!==this.serviceName&&"s3v4"!==this.signatureVersion&&(s=e.util.uriEscapePath(s)),t.push(this.request.method),t.push(s),t.push(this.request.search()),t.push(this.canonicalHeaders()+"\n"),t.push(this.signedHeaders()),t.push(this.hexEncodedBodyHash()),t.join("\n")},canonicalHeaders:function(){var t=[];e.util.each.call(this,this.request.headers,function(e,s){t.push([e,s])}),t.sort(function(e,t){return e[0].toLowerCase()<t[0].toLowerCase()?-1:1});var s=[];return e.util.arrayEach.call(this,t,function(t){var i=t[0].toLowerCase();if(this.isSignableHeader(i)){var r=t[1];if(null==r||"function"!=typeof r.toString)throw e.util.error(new Error("Header "+i+" contains invalid value"),{code:"InvalidHeader"});s.push(i+":"+this.canonicalHeaderValues(r.toString()))}}),s.join("\n")},canonicalHeaderValues:function(e){return e.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"")},signedHeaders:function(){var t=[];return e.util.each.call(this,this.request.headers,function(e){e=e.toLowerCase(),this.isSignableHeader(e)&&t.push(e)}),t.sort().join(";")},credentialString:function(e){return t.createScope(e.substr(0,8),this.request.region,this.serviceName)},hexEncodedHash:function(t){return e.util.crypto.sha256(t,"hex")},hexEncodedBodyHash:function(){var e=this.request;return this.isPresigned()&&"s3"===this.serviceName&&!e.body?"UNSIGNED-PAYLOAD":e.headers["X-Amz-Content-Sha256"]?e.headers["X-Amz-Content-Sha256"]:this.hexEncodedHash(this.request.body||"")},unsignableHeaders:["authorization","content-type","content-length","user-agent",i,"expect","x-amzn-trace-id"],isSignableHeader:function(e){return 0===e.toLowerCase().indexOf("x-amz-")||this.unsignableHeaders.indexOf(e)<0},isPresigned:function(){return!!this.request.headers[i]}}),module.exports=e.Signers.V4;
},{"../core":"hd5g","./v4_credentials":"Ybid"}],"qgIz":[function(require,module,exports) {
var e=require("../core"),s=e.util.inherit;e.Signers.S3=s(e.Signers.RequestSigner,{subResources:{acl:1,accelerate:1,analytics:1,cors:1,lifecycle:1,delete:1,inventory:1,location:1,logging:1,metrics:1,notification:1,partNumber:1,policy:1,requestPayment:1,replication:1,restore:1,tagging:1,torrent:1,uploadId:1,uploads:1,versionId:1,versioning:1,versions:1,website:1},responseHeaders:{"response-content-type":1,"response-content-language":1,"response-expires":1,"response-cache-control":1,"response-content-disposition":1,"response-content-encoding":1},addAuthorization:function(s,t){this.request.headers["presigned-expires"]||(this.request.headers["X-Amz-Date"]=e.util.date.rfc822(t)),s.sessionToken&&(this.request.headers["x-amz-security-token"]=s.sessionToken);var n=this.sign(s.secretAccessKey,this.stringToSign()),r="AWS "+s.accessKeyId+":"+n;this.request.headers.Authorization=r},stringToSign:function(){var e=this.request,s=[];s.push(e.method),s.push(e.headers["Content-MD5"]||""),s.push(e.headers["Content-Type"]||""),s.push(e.headers["presigned-expires"]||"");var t=this.canonicalizedAmzHeaders();return t&&s.push(t),s.push(this.canonicalizedResource()),s.join("\n")},canonicalizedAmzHeaders:function(){var s=[];e.util.each(this.request.headers,function(e){e.match(/^x-amz-/i)&&s.push(e)}),s.sort(function(e,s){return e.toLowerCase()<s.toLowerCase()?-1:1});var t=[];return e.util.arrayEach.call(this,s,function(e){t.push(e.toLowerCase()+":"+String(this.request.headers[e]))}),t.join("\n")},canonicalizedResource:function(){var s=this.request,t=s.path.split("?"),n=t[0],r=t[1],i="";if(s.virtualHostedBucket&&(i+="/"+s.virtualHostedBucket),i+=n,r){var o=[];e.util.arrayEach.call(this,r.split("&"),function(e){var s=e.split("=")[0],t=e.split("=")[1];if(this.subResources[s]||this.responseHeaders[s]){var n={name:s};void 0!==t&&(this.subResources[s]?n.value=t:n.value=decodeURIComponent(t)),o.push(n)}}),o.sort(function(e,s){return e.name<s.name?-1:1}),o.length&&(r=[],e.util.arrayEach(o,function(e){void 0===e.value?r.push(e.name):r.push(e.name+"="+e.value)}),i+="?"+r.join("&"))}return i},sign:function(s,t){return e.util.crypto.hmac(s,t,"base64","sha1")}}),module.exports=e.Signers.S3;
},{"../core":"hd5g"}],"dxzw":[function(require,module,exports) {
var e=require("../core"),t=e.util.inherit,r="presigned-expires";function i(t){var i=t.httpRequest.headers[r],s=t.service.getSignerClass(t);if(delete t.httpRequest.headers["User-Agent"],delete t.httpRequest.headers["X-Amz-User-Agent"],s===e.Signers.V4){if(i>604800){throw e.util.error(new Error,{code:"InvalidExpiryTime",message:"Presigning does not support expiry time greater than a week with SigV4 signing.",retryable:!1})}t.httpRequest.headers[r]=i}else{if(s!==e.Signers.S3)throw e.util.error(new Error,{message:"Presigning only supports S3 or SigV4 signing.",code:"UnsupportedSigner",retryable:!1});var n=t.service?t.service.getSkewCorrectedDate():e.util.date.getDate();t.httpRequest.headers[r]=parseInt(e.util.date.unixTimestamp(n)+i,10).toString()}}function s(t){var i=t.httpRequest.endpoint,s=e.util.urlParse(t.httpRequest.path),n={};s.search&&(n=e.util.queryStringParse(s.search.substr(1)));var o=t.httpRequest.headers.Authorization.split(" ");if("AWS"===o[0])o=o[1].split(":"),n.Signature=o.pop(),n.AWSAccessKeyId=o.join(":"),e.util.each(t.httpRequest.headers,function(e,t){e===r&&(e="Expires"),0===e.indexOf("x-amz-meta-")&&(delete n[e],e=e.toLowerCase()),n[e]=t}),delete t.httpRequest.headers[r],delete n.Authorization,delete n.Host;else if("AWS4-HMAC-SHA256"===o[0]){o.shift();var a=o.join(" ").match(/Signature=(.*?)(?:,|\s|\r?\n|$)/)[1];n["X-Amz-Signature"]=a,delete n.Expires}i.pathname=s.pathname,i.search=e.util.queryParamsToString(n)}e.Signers.Presign=t({sign:function(t,n,o){if(t.httpRequest.headers[r]=n||3600,t.on("build",i),t.on("sign",s),t.removeListener("afterBuild",e.EventListeners.Core.SET_CONTENT_LENGTH),t.removeListener("afterBuild",e.EventListeners.Core.COMPUTE_SHA256),t.emit("beforePresign",[t]),!o){if(t.build(),t.response.error)throw t.response.error;return e.util.urlFormat(t.httpRequest.endpoint)}t.build(function(){this.response.error?o(this.response.error):o(null,e.util.urlFormat(t.httpRequest.endpoint))})}}),module.exports=e.Signers.Presign;
},{"../core":"hd5g"}],"kGO1":[function(require,module,exports) {
var e=require("../core"),r=e.util.inherit;e.Signers.RequestSigner=r({constructor:function(e){this.request=e},setServiceClientId:function(e){this.serviceClientId=e},getServiceClientId:function(){return this.serviceClientId}}),e.Signers.RequestSigner.getVersion=function(r){switch(r){case"v2":return e.Signers.V2;case"v3":return e.Signers.V3;case"s3v4":case"v4":return e.Signers.V4;case"s3":return e.Signers.S3;case"v3https":return e.Signers.V3Https}throw new Error("Unknown signing version "+r)},require("./v2"),require("./v3"),require("./v3https"),require("./v4"),require("./s3"),require("./presign");
},{"../core":"hd5g","./v2":"o51L","./v3":"nNK6","./v3https":"lAFA","./v4":"xoWJ","./s3":"qgIz","./presign":"dxzw"}],"tfJa":[function(require,module,exports) {
var e=require("./core");e.ParamValidator=e.util.inherit({constructor:function(e){!0!==e&&void 0!==e||(e={min:!0}),this.validation=e},validate:function(t,r,i){if(this.errors=[],this.validateMember(t,r||{},i||"params"),this.errors.length>1){var a=this.errors.join("\n* ");throw a="There were "+this.errors.length+" validation errors:\n* "+a,e.util.error(new Error(a),{code:"MultipleValidationErrors",errors:this.errors})}if(1===this.errors.length)throw this.errors[0];return!0},fail:function(t,r){this.errors.push(e.util.error(new Error(r),{code:t}))},validateStructure:function(e,t,r){var i;this.validateType(t,r,["object"],"structure");for(var a=0;e.required&&a<e.required.length;a++){var n=t[i=e.required[a]];null==n&&this.fail("MissingRequiredParameter","Missing required key '"+i+"' in "+r)}for(i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=t[i],l=e.members[i];if(void 0!==l){var s=[r,i].join(".");this.validateMember(l,o,s)}else this.fail("UnexpectedParameter","Unexpected key '"+i+"' found in "+r)}return!0},validateMember:function(e,t,r){switch(e.type){case"structure":return this.validateStructure(e,t,r);case"list":return this.validateList(e,t,r);case"map":return this.validateMap(e,t,r);default:return this.validateScalar(e,t,r)}},validateList:function(e,t,r){if(this.validateType(t,r,[Array])){this.validateRange(e,t.length,r,"list member count");for(var i=0;i<t.length;i++)this.validateMember(e.member,t[i],r+"["+i+"]")}},validateMap:function(e,t,r){if(this.validateType(t,r,["object"],"map")){var i=0;for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(this.validateMember(e.key,a,r+"[key='"+a+"']"),this.validateMember(e.value,t[a],r+"['"+a+"']"),i++);this.validateRange(e,i,r,"map member count")}},validateScalar:function(e,t,r){switch(e.type){case null:case void 0:case"string":return this.validateString(e,t,r);case"base64":case"binary":return this.validatePayload(t,r);case"integer":case"float":return this.validateNumber(e,t,r);case"boolean":return this.validateType(t,r,["boolean"]);case"timestamp":return this.validateType(t,r,[Date,/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d+)?Z$/,"number"],"Date object, ISO-8601 string, or a UNIX timestamp");default:return this.fail("UnkownType","Unhandled type "+e.type+" for "+r)}},validateString:function(e,t,r){var i=["string"];e.isJsonValue&&(i=i.concat(["number","object","boolean"])),null!==t&&this.validateType(t,r,i)&&(this.validateEnum(e,t,r),this.validateRange(e,t.length,r,"string length"),this.validatePattern(e,t,r),this.validateUri(e,t,r))},validateUri:function(e,t,r){"uri"===e.location&&0===t.length&&this.fail("UriParameterError",'Expected uri parameter to have length >= 1, but found "'+t+'" for '+r)},validatePattern:function(e,t,r){this.validation.pattern&&void 0!==e.pattern&&(new RegExp(e.pattern).test(t)||this.fail("PatternMatchError",'Provided value "'+t+'" does not match regex pattern /'+e.pattern+"/ for "+r))},validateRange:function(e,t,r,i){this.validation.min&&void 0!==e.min&&t<e.min&&this.fail("MinRangeError","Expected "+i+" >= "+e.min+", but found "+t+" for "+r),this.validation.max&&void 0!==e.max&&t>e.max&&this.fail("MaxRangeError","Expected "+i+" <= "+e.max+", but found "+t+" for "+r)},validateEnum:function(e,t,r){this.validation.enum&&void 0!==e.enum&&-1===e.enum.indexOf(t)&&this.fail("EnumError","Found string value of "+t+", but expected "+e.enum.join("|")+" for "+r)},validateType:function(t,r,i,a){if(null==t)return!1;for(var n=!1,o=0;o<i.length;o++){if("string"==typeof i[o]){if(typeof t===i[o])return!0}else if(i[o]instanceof RegExp){if((t||"").toString().match(i[o]))return!0}else{if(t instanceof i[o])return!0;if(e.util.isType(t,i[o]))return!0;a||n||(i=i.slice()),i[o]=e.util.typeName(i[o])}n=!0}var l=a;l||(l=i.join(", ").replace(/,([^,]+)$/,", or$1"));var s=l.match(/^[aeiou]/i)?"n":"";return this.fail("InvalidParameterType","Expected "+r+" to be a"+s+" "+l),!1},validateNumber:function(e,t,r){if(null!=t){if("string"==typeof t){var i=parseFloat(t);i.toString()===t&&(t=i)}this.validateType(t,r,["number"])&&this.validateRange(e,t,r,"numeric value")}},validatePayload:function(t,r){if(null!=t&&"string"!=typeof t&&(!t||"number"!=typeof t.byteLength)){if(e.util.isNode()){var i=e.util.stream.Stream;if(e.util.Buffer.isBuffer(t)||t instanceof i)return}else if(void 0!==typeof Blob&&t instanceof Blob)return;var a=["Buffer","Stream","File","Blob","ArrayBuffer","DataView"];if(t)for(var n=0;n<a.length;n++){if(e.util.isType(t,a[n]))return;if(e.util.typeName(t.constructor)===a[n])return}this.fail("InvalidParameterType","Expected "+r+" to be a string, Buffer, Stream, Blob, or typed array object")}}});
},{"./core":"hd5g"}],"hd5g":[function(require,module,exports) {
var e={util:require("./util")},r={};r.toString(),module.exports=e,e.util.update(e,{VERSION:"2.738.0",Signers:{},Protocol:{Json:require("./protocol/json"),Query:require("./protocol/query"),Rest:require("./protocol/rest"),RestJson:require("./protocol/rest_json"),RestXml:require("./protocol/rest_xml")},XML:{Builder:require("./xml/builder"),Parser:null},JSON:{Builder:require("./json/builder"),Parser:require("./json/parser")},Model:{Api:require("./model/api"),Operation:require("./model/operation"),Shape:require("./model/shape"),Paginator:require("./model/paginator"),ResourceWaiter:require("./model/resource_waiter")},apiLoader:require("./api_loader"),EndpointCache:require("../vendor/endpoint-cache").EndpointCache}),require("./sequential_executor"),require("./service"),require("./config"),require("./http"),require("./event_listeners"),require("./request"),require("./response"),require("./resource_waiter"),require("./signers/request_signer"),require("./param_validator"),e.events=new e.SequentialExecutor,e.util.memoizedProperty(e,"endpointCache",function(){return new e.EndpointCache(e.config.endpointCacheSize)},!0);
},{"./util":"Srp3","./protocol/json":"ko2o","./protocol/query":"eJRP","./protocol/rest":"xf3G","./protocol/rest_json":"tywJ","./protocol/rest_xml":"BPdO","./xml/builder":"uCK8","./json/builder":"V8M7","./json/parser":"gAi9","./model/api":"fJkH","./model/operation":"TZKf","./model/shape":"EeVB","./model/paginator":"ncgO","./model/resource_waiter":"Z0eF","./api_loader":"XTxl","../vendor/endpoint-cache":"k8T5","./sequential_executor":"GKVf","./service":"RKSD","./config":"EvfU","./http":"yHCU","./event_listeners":"epIx","./request":"kQpS","./response":"dySX","./resource_waiter":"PCic","./signers/request_signer":"kGO1","./param_validator":"tfJa"}],"sC8V":[function(require,module,exports) {

},{}],"WkVg":[function(require,module,exports) {
var e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(e){var o=new Uint8Array(16);module.exports=function(){return e(o),o}}else{var r=new Array(16);module.exports=function(){for(var e,o=0;o<16;o++)0==(3&o)&&(e=4294967296*Math.random()),r[o]=e>>>((3&o)<<3)&255;return r}}
},{}],"LSl0":[function(require,module,exports) {
for(var r=[],o=0;o<256;++o)r[o]=(o+256).toString(16).substr(1);function t(o,t){var n=t||0,u=r;return[u[o[n++]],u[o[n++]],u[o[n++]],u[o[n++]],"-",u[o[n++]],u[o[n++]],"-",u[o[n++]],u[o[n++]],"-",u[o[n++]],u[o[n++]],"-",u[o[n++]],u[o[n++]],u[o[n++]],u[o[n++]],u[o[n++]],u[o[n++]]].join("")}module.exports=t;
},{}],"HddL":[function(require,module,exports) {
var e,r,o=require("./lib/rng"),s=require("./lib/bytesToUuid"),i=0,n=0;function c(c,l,u){var v=l&&u||0,a=l||[],d=(c=c||{}).node||e,t=void 0!==c.clockseq?c.clockseq:r;if(null==d||null==t){var m=o();null==d&&(d=e=[1|m[0],m[1],m[2],m[3],m[4],m[5]]),null==t&&(t=r=16383&(m[6]<<8|m[7]))}var q=void 0!==c.msecs?c.msecs:(new Date).getTime(),f=void 0!==c.nsecs?c.nsecs:n+1,b=q-i+(f-n)/1e4;if(b<0&&void 0===c.clockseq&&(t=t+1&16383),(b<0||q>i)&&void 0===c.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");i=q,n=f,r=t;var k=(1e4*(268435455&(q+=122192928e5))+f)%4294967296;a[v++]=k>>>24&255,a[v++]=k>>>16&255,a[v++]=k>>>8&255,a[v++]=255&k;var w=q/4294967296*1e4&268435455;a[v++]=w>>>8&255,a[v++]=255&w,a[v++]=w>>>24&15|16,a[v++]=w>>>16&255,a[v++]=t>>>8|128,a[v++]=255&t;for(var g=0;g<6;++g)a[v+g]=d[g];return l||s(a)}module.exports=c;
},{"./lib/rng":"WkVg","./lib/bytesToUuid":"LSl0"}],"FW0Y":[function(require,module,exports) {
var r=require("./lib/rng"),n=require("./lib/bytesToUuid");function e(e,i,u){var a=i&&u||0;"string"==typeof e&&(i="binary"===e?new Array(16):null,e=null);var l=(e=e||{}).random||(e.rng||r)();if(l[6]=15&l[6]|64,l[8]=63&l[8]|128,i)for(var o=0;o<16;++o)i[a+o]=l[o];return i||n(l)}module.exports=e;
},{"./lib/rng":"WkVg","./lib/bytesToUuid":"LSl0"}],"wWTa":[function(require,module,exports) {
var e=require("./v1"),r=require("./v4"),v=r;v.v1=e,v.v4=r,module.exports=v;
},{"./v1":"HddL","./v4":"FW0Y"}],"Srp3":[function(require,module,exports) {
var process = require("process");
var e,r=require("process"),t={environment:"nodejs",engine:function(){if(t.isBrowser()&&"undefined"!=typeof navigator)return navigator.userAgent;var e=r.platform+"/"+r.version;return e},userAgent:function(){var e=t.environment,r="aws-sdk-"+e+"/"+require("./core").VERSION;return"nodejs"===e&&(r+=" "+t.engine()),r},uriEscape:function(e){var r=encodeURIComponent(e);return r=(r=r.replace(/[^A-Za-z0-9_.~\-%]+/g,escape)).replace(/[*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})},uriEscapePath:function(e){var r=[];return t.arrayEach(e.split("/"),function(e){r.push(t.uriEscape(e))}),r.join("/")},urlParse:function(e){return t.url.parse(e)},urlFormat:function(e){return t.url.format(e)},queryStringParse:function(e){return t.querystring.parse(e)},queryParamsToString:function(e){var r=[],n=t.uriEscape,o=Object.keys(e).sort();return t.arrayEach(o,function(o){var a=e[o],i=n(o),u=i+"=";if(Array.isArray(a)){var f=[];t.arrayEach(a,function(e){f.push(n(e))}),u=i+"="+f.sort().join("&"+i+"=")}else null!=a&&(u=i+"="+n(a));r.push(u)}),r.join("&")},readFileSync:function(e){return t.isBrowser()?null:require("fs").readFileSync(e,"utf-8")},base64:{encode:function(e){if("number"==typeof e)throw t.error(new Error("Cannot base64 encode number "+e));return null==e?e:t.buffer.toBuffer(e).toString("base64")},decode:function(e){if("number"==typeof e)throw t.error(new Error("Cannot base64 decode number "+e));return null==e?e:t.buffer.toBuffer(e,"base64")}},buffer:{toBuffer:function(e,r){return"function"==typeof t.Buffer.from&&t.Buffer.from!==Uint8Array.from?t.Buffer.from(e,r):new t.Buffer(e,r)},alloc:function(e,r,n){if("number"!=typeof e)throw new Error("size passed to alloc must be a number.");if("function"==typeof t.Buffer.alloc)return t.Buffer.alloc(e,r,n);var o=new t.Buffer(e);return void 0!==r&&"function"==typeof o.fill&&o.fill(r,void 0,void 0,n),o},toStream:function(e){t.Buffer.isBuffer(e)||(e=t.buffer.toBuffer(e));var r=new t.stream.Readable,n=0;return r._read=function(t){if(n>=e.length)return r.push(null);var o=n+t;o>e.length&&(o=e.length),r.push(e.slice(n,o)),n=o},r},concat:function(e){var r,n,o=0,a=0;for(n=0;n<e.length;n++)o+=e[n].length;for(r=t.buffer.alloc(o),n=0;n<e.length;n++)e[n].copy(r,a),a+=e[n].length;return r}},string:{byteLength:function(e){if(null==e)return 0;if("string"==typeof e&&(e=t.buffer.toBuffer(e)),"number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.length)return e.length;if("number"==typeof e.size)return e.size;if("string"==typeof e.path)return require("fs").lstatSync(e.path).size;throw t.error(new Error("Cannot determine length of "+e),{object:e})},upperFirst:function(e){return e[0].toUpperCase()+e.substr(1)},lowerFirst:function(e){return e[0].toLowerCase()+e.substr(1)}},ini:{parse:function(e){var r,n={};return t.arrayEach(e.split(/\r?\n/),function(e){var t=(e=e.split(/(^|\s)[;#]/)[0]).match(/^\s*\[([^\[\]]+)\]\s*$/);if(t)r=t[1];else if(r){var o=e.match(/^\s*(.+?)\s*=\s*(.+?)\s*$/);o&&(n[r]=n[r]||{},n[r][o[1]]=o[2])}}),n}},fn:{noop:function(){},callback:function(e){if(e)throw e},makeAsync:function(e,r){return r&&r<=e.length?e:function(){var r=Array.prototype.slice.call(arguments,0);r.pop()(e.apply(null,r))}}},date:{getDate:function(){return e||(e=require("./core")),e.config.systemClockOffset?new Date((new Date).getTime()+e.config.systemClockOffset):new Date},iso8601:function(e){return void 0===e&&(e=t.date.getDate()),e.toISOString().replace(/\.\d{3}Z$/,"Z")},rfc822:function(e){return void 0===e&&(e=t.date.getDate()),e.toUTCString()},unixTimestamp:function(e){return void 0===e&&(e=t.date.getDate()),e.getTime()/1e3},from:function(e){return"number"==typeof e?new Date(1e3*e):new Date(e)},format:function(e,r){return r||(r="iso8601"),t.date[r](t.date.from(e))},parseTimestamp:function(e){if("number"==typeof e)return new Date(1e3*e);if(e.match(/^\d+$/))return new Date(1e3*e);if(e.match(/^\d{4}/))return new Date(e);if(e.match(/^\w{3},/))return new Date(e);throw t.error(new Error("unhandled timestamp format: "+e),{code:"TimestampParserError"})}},crypto:{crc32Table:[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],crc32:function(e){var r=t.crypto.crc32Table,n=-1;"string"==typeof e&&(e=t.buffer.toBuffer(e));for(var o=0;o<e.length;o++){n=n>>>8^r[255&(n^e.readUInt8(o))]}return(-1^n)>>>0},hmac:function(e,r,n,o){return n||(n="binary"),"buffer"===n&&(n=void 0),o||(o="sha256"),"string"==typeof r&&(r=t.buffer.toBuffer(r)),t.crypto.lib.createHmac(o,e).update(r).digest(n)},md5:function(e,r,n){return t.crypto.hash("md5",e,r,n)},sha256:function(e,r,n){return t.crypto.hash("sha256",e,r,n)},hash:function(e,r,n,o){var a=t.crypto.createHash(e);n||(n="binary"),"buffer"===n&&(n=void 0),"string"==typeof r&&(r=t.buffer.toBuffer(r));var i=t.arraySliceFn(r),u=t.Buffer.isBuffer(r);if(t.isBrowser()&&"undefined"!=typeof ArrayBuffer&&r&&r.buffer instanceof ArrayBuffer&&(u=!0),o&&"object"==typeof r&&"function"==typeof r.on&&!u)r.on("data",function(e){a.update(e)}),r.on("error",function(e){o(e)}),r.on("end",function(){o(null,a.digest(n))});else{if(!o||!i||u||"undefined"==typeof FileReader){t.isBrowser()&&"object"==typeof r&&!u&&(r=new t.Buffer(new Uint8Array(r)));var f=a.update(r).digest(n);return o&&o(null,f),f}var s=0,c=new FileReader;c.onerror=function(){o(new Error("Failed to read data."))},c.onload=function(){var e=new t.Buffer(new Uint8Array(c.result));a.update(e),s+=e.length,c._continueReading()},c._continueReading=function(){if(s>=r.size)o(null,a.digest(n));else{var e=s+524288;e>r.size&&(e=r.size),c.readAsArrayBuffer(i.call(r,s,e))}},c._continueReading()}},toHex:function(e){for(var r=[],t=0;t<e.length;t++)r.push(("0"+e.charCodeAt(t).toString(16)).substr(-2,2));return r.join("")},createHash:function(e){return t.crypto.lib.createHash(e)}},abort:{},each:function(e,r){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n))if(r.call(this,n,e[n])===t.abort)break}},arrayEach:function(e,r){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n))if(r.call(this,e[n],parseInt(n,10))===t.abort)break}},update:function(e,r){return t.each(r,function(r,t){e[r]=t}),e},merge:function(e,r){return t.update(t.copy(e),r)},copy:function(e){if(null==e)return e;var r={};for(var t in e)r[t]=e[t];return r},isEmpty:function(e){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r))return!1;return!0},arraySliceFn:function(e){var r=e.slice||e.webkitSlice||e.mozSlice;return"function"==typeof r?r:null},isType:function(e,r){return"function"==typeof r&&(r=t.typeName(r)),Object.prototype.toString.call(e)==="[object "+r+"]"},typeName:function(e){if(Object.prototype.hasOwnProperty.call(e,"name"))return e.name;var r=e.toString(),t=r.match(/^\s*function (.+)\(/);return t?t[1]:r},error:function(e,r){var n=null;return"string"==typeof e.message&&""!==e.message&&("string"==typeof r||r&&r.message)&&((n=t.copy(e)).message=e.message),e.message=e.message||null,"string"==typeof r?e.message=r:"object"==typeof r&&null!==r&&(t.update(e,r),r.message&&(e.message=r.message),(r.code||r.name)&&(e.code=r.code||r.name),r.stack&&(e.stack=r.stack)),"function"==typeof Object.defineProperty&&(Object.defineProperty(e,"name",{writable:!0,enumerable:!1}),Object.defineProperty(e,"message",{enumerable:!0})),e.name=String(r&&r.name||e.name||e.code||"Error"),e.time=new Date,n&&(e.originalError=n),e},inherit:function(e,r){var n=null;if(void 0===r)r=e,e=Object,n={};else{var o=function(){};o.prototype=e.prototype,n=new o}return r.constructor===Object&&(r.constructor=function(){if(e!==Object)return e.apply(this,arguments)}),r.constructor.prototype=n,t.update(r.constructor.prototype,r),r.constructor.__super__=e,r.constructor},mixin:function(){for(var e=arguments[0],r=1;r<arguments.length;r++)for(var t in arguments[r].prototype){var n=arguments[r].prototype[t];"constructor"!==t&&(e.prototype[t]=n)}return e},hideProperties:function(e,r){"function"==typeof Object.defineProperty&&t.arrayEach(r,function(r){Object.defineProperty(e,r,{enumerable:!1,writable:!0,configurable:!0})})},property:function(e,r,t,n,o){var a={configurable:!0,enumerable:void 0===n||n};"function"!=typeof t||o?(a.value=t,a.writable=!0):a.get=t,Object.defineProperty(e,r,a)},memoizedProperty:function(e,r,n,o){var a=null;t.property(e,r,function(){return null===a&&(a=n()),a},o)},hoistPayloadMember:function(e){var r=e.request,n=r.operation,o=r.service.api.operations[n],a=o.output;if(a.payload&&!o.hasEventOutput){var i=a.members[a.payload],u=e.data[a.payload];"structure"===i.type&&t.each(u,function(r,n){t.property(e.data,r,n,!1)})}},computeSha256:function(e,r){if(t.isNode()){var n=t.stream.Stream,o=require("fs");if("function"==typeof n&&e instanceof n){if("string"!=typeof e.path)return r(new Error("Non-file stream objects are not supported with SigV4"));var a={};"number"==typeof e.start&&(a.start=e.start),"number"==typeof e.end&&(a.end=e.end),e=o.createReadStream(e.path,a)}}t.crypto.sha256(e,"hex",function(e,t){e?r(e):r(null,t)})},isClockSkewed:function(r){if(r)return t.property(e.config,"isClockSkewed",Math.abs((new Date).getTime()-r)>=3e5,!1),e.config.isClockSkewed},applyClockOffset:function(r){r&&(e.config.systemClockOffset=r-(new Date).getTime())},extractRequestId:function(e){var r=e.httpResponse.headers["x-amz-request-id"]||e.httpResponse.headers["x-amzn-requestid"];!r&&e.data&&e.data.ResponseMetadata&&(r=e.data.ResponseMetadata.RequestId),r&&(e.requestId=r),e.error&&(e.error.requestId=r)},addPromises:function(r,t){var n=!1;void 0===t&&e&&e.config&&(t=e.config.getPromisesDependency()),void 0===t&&"undefined"!=typeof Promise&&(t=Promise),"function"!=typeof t&&(n=!0),Array.isArray(r)||(r=[r]);for(var o=0;o<r.length;o++){var a=r[o];n?a.deletePromisesFromClass&&a.deletePromisesFromClass():a.addPromisesToClass&&a.addPromisesToClass(t)}},promisifyMethod:function(e,r){return function(){var t=this,n=Array.prototype.slice.call(arguments);return new r(function(r,o){n.push(function(e,t){e?o(e):r(t)}),t[e].apply(t,n)})}},isDualstackAvailable:function(e){if(!e)return!1;var r=require("../apis/metadata.json");return"string"!=typeof e&&(e=e.serviceIdentifier),!("string"!=typeof e||!r.hasOwnProperty(e))&&!!r[e].dualstackAvailable},calculateRetryDelay:function(e,r,t){r||(r={});var n=r.customBackoff||null;if("function"==typeof n)return n(e,t);var o="number"==typeof r.base?r.base:100;return Math.random()*(Math.pow(2,e)*o)},handleRequestWithRetries:function(r,n,o){n||(n={});var a=e.HttpClient.getInstance(),i=n.httpOptions||{},u=0,f=function(e){var r=n.maxRetries||0;e&&"TimeoutError"===e.code&&(e.retryable=!0);var a=t.calculateRetryDelay(u,n.retryDelayOptions,e);e&&e.retryable&&u<r&&a>=0?(u++,setTimeout(s,a+(e.retryAfter||0))):o(e)},s=function(){var e="";a.handleRequest(r,i,function(r){r.on("data",function(r){e+=r.toString()}),r.on("end",function(){var n=r.statusCode;if(n<300)o(null,e);else{var a=1e3*parseInt(r.headers["retry-after"],10)||0,i=t.error(new Error,{statusCode:n,retryable:n>=500||429===n});a&&i.retryable&&(i.retryAfter=a),f(i)}})},f)};e.util.defer(s)},uuid:{v4:function(){return require("uuid").v4()}},convertPayloadToString:function(e){var r=e.request,t=r.operation,n=r.service.api.operations[t].output||{};n.payload&&e.data[n.payload]&&(e.data[n.payload]=e.data[n.payload].toString())},defer:function(e){"object"==typeof r&&"function"==typeof r.nextTick?r.nextTick(e):"function"==typeof setImmediate?setImmediate(e):setTimeout(e,0)},getRequestPayloadShape:function(e){var r=e.service.api.operations;if(r){var t=(r||{})[e.operation];if(t&&t.input&&t.input.payload)return t.input.members[t.input.payload]}},getProfilesFromSharedConfig:function(e,n){var o={},a={};if(r.env[t.configOptInEnv])a=e.loadFrom({isConfig:!0,filename:r.env[t.sharedConfigFileEnv]});for(var i=e.loadFrom({filename:n||r.env[t.configOptInEnv]&&r.env[t.sharedCredentialsFileEnv]}),u=0,f=Object.keys(a);u<f.length;u++)o[f[u]]=a[f[u]];for(u=0,f=Object.keys(i);u<f.length;u++)o[f[u]]=i[f[u]];return o},ARN:{validate:function(e){return e&&0===e.indexOf("arn:")&&e.split(":").length>=6},parse:function(e){var r=e.split(":");return{partition:r[1],service:r[2],region:r[3],accountId:r[4],resource:r.slice(5).join(":")}},build:function(e){if(void 0===e.service||void 0===e.region||void 0===e.accountId||void 0===e.resource)throw t.error(new Error("Input ARN object is invalid"));return"arn:"+(e.partition||"aws")+":"+e.service+":"+e.region+":"+e.accountId+":"+e.resource}},defaultProfile:"default",configOptInEnv:"AWS_SDK_LOAD_CONFIG",sharedCredentialsFileEnv:"AWS_SHARED_CREDENTIALS_FILE",sharedConfigFileEnv:"AWS_CONFIG_FILE",imdsDisabledEnv:"AWS_EC2_METADATA_DISABLED"};module.exports=t;
},{"./core":"hd5g","fs":"sC8V","../apis/metadata.json":"W1ma","uuid":"wWTa","process":"g5IB"}],"FRly":[function(require,module,exports) {
"use strict";exports.byteLength=u,exports.toByteArray=i,exports.fromByteArray=d;for(var r=[],t=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=n.length;o<a;++o)r[o]=n[o],t[n.charCodeAt(o)]=o;function h(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");return-1===e&&(e=t),[e,e===t?0:4-e%4]}function u(r){var t=h(r),e=t[0],n=t[1];return 3*(e+n)/4-n}function c(r,t,e){return 3*(t+e)/4-e}function i(r){var n,o,a=h(r),u=a[0],i=a[1],f=new e(c(r,u,i)),A=0,d=i>0?u-4:u;for(o=0;o<d;o+=4)n=t[r.charCodeAt(o)]<<18|t[r.charCodeAt(o+1)]<<12|t[r.charCodeAt(o+2)]<<6|t[r.charCodeAt(o+3)],f[A++]=n>>16&255,f[A++]=n>>8&255,f[A++]=255&n;return 2===i&&(n=t[r.charCodeAt(o)]<<2|t[r.charCodeAt(o+1)]>>4,f[A++]=255&n),1===i&&(n=t[r.charCodeAt(o)]<<10|t[r.charCodeAt(o+1)]<<4|t[r.charCodeAt(o+2)]>>2,f[A++]=n>>8&255,f[A++]=255&n),f}function f(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function A(r,t,e){for(var n,o=[],a=t;a<e;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(255&r[a+2]),o.push(f(n));return o.join("")}function d(t){for(var e,n=t.length,o=n%3,a=[],h=0,u=n-o;h<u;h+=16383)a.push(A(t,h,h+16383>u?u:h+16383));return 1===o?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),a.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;
},{}],"Quj6":[function(require,module,exports) {
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],"aqZJ":[function(require,module,exports) {
var r={}.toString;module.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)};
},{}],"aMB2":[function(require,module,exports) {

var global = arguments[3];
var t=arguments[3],r=require("base64-js"),e=require("ieee754"),n=require("isarray");function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(r){return!1}}function o(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,r){if(o()<r)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=f.prototype:(null===t&&(t=new f(r)),t.length=r),t}function f(t,r,e){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,r,e)}function s(t,r,e,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?g(t,r,e,n):"string"==typeof r?l(t,r,e):y(t,r)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a(t,r,e,n){return h(r),r<=0?u(t,r):void 0!==e?"string"==typeof n?u(t,r).fill(e,n):u(t,r).fill(e):u(t,r)}function c(t,r){if(h(r),t=u(t,r<0?0:0|w(r)),!f.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function l(t,r,e){if("string"==typeof e&&""!==e||(e="utf8"),!f.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(r,e),i=(t=u(t,n)).write(r,e);return i!==n&&(t=t.slice(0,i)),t}function p(t,r){var e=r.length<0?0:0|w(r.length);t=u(t,e);for(var n=0;n<e;n+=1)t[n]=255&r[n];return t}function g(t,r,e,n){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return r=void 0===e&&void 0===n?new Uint8Array(r):void 0===n?new Uint8Array(r,e):new Uint8Array(r,e,n),f.TYPED_ARRAY_SUPPORT?(t=r).__proto__=f.prototype:t=p(t,r),t}function y(t,r){if(f.isBuffer(r)){var e=0|w(r.length);return 0===(t=u(t,e)).length?t:(r.copy(t,0,0,e),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||W(r.length)?u(t,0):p(t,r);if("Buffer"===r.type&&n(r.data))return p(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function w(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),f.alloc(+t)}function v(t,r){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return K(t).length;default:if(n)return $(t).length;r=(""+r).toLowerCase(),n=!0}}function E(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,r,e);case"utf8":case"utf-8":return Y(this,r,e);case"ascii":return L(this,r,e);case"latin1":case"binary":return D(this,r,e);case"base64":return S(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function R(t,r,e,n,i){if(0===t.length)return-1;if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof r&&(r=f.from(r,n)),f.isBuffer(r))return 0===r.length?-1:_(t,r,e,n,i);if("number"==typeof r)return r&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):_(t,[r],e,n,i);throw new TypeError("val must be string, number or Buffer")}function _(t,r,e,n,i){var o,u=1,f=t.length,s=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;u=2,f/=2,s/=2,e/=2}function h(t,r){return 1===u?t[r]:t.readUInt16BE(r*u)}if(i){var a=-1;for(o=e;o<f;o++)if(h(t,o)===h(r,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===s)return a*u}else-1!==a&&(o-=o-a),a=-1}else for(e+s>f&&(e=f-s),o=e;o>=0;o--){for(var c=!0,l=0;l<s;l++)if(h(t,o+l)!==h(r,l)){c=!1;break}if(c)return o}return-1}function A(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var u=0;u<n;++u){var f=parseInt(r.substr(2*u,2),16);if(isNaN(f))return u;t[e+u]=f}return u}function m(t,r,e,n){return Q($(r,t.length-e),t,e,n)}function P(t,r,e,n){return Q(G(r),t,e,n)}function T(t,r,e,n){return P(t,r,e,n)}function B(t,r,e,n){return Q(K(r),t,e,n)}function U(t,r,e,n){return Q(H(r,t.length-e),t,e,n)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function Y(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o,u,f,s,h=t[i],a=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=e)switch(c){case 1:h<128&&(a=h);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&h)<<6|63&o)>127&&(a=s);break;case 3:o=t[i+1],u=t[i+2],128==(192&o)&&128==(192&u)&&(s=(15&h)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(a=s);break;case 4:o=t[i+1],u=t[i+2],f=t[i+3],128==(192&o)&&128==(192&u)&&128==(192&f)&&(s=(15&h)<<18|(63&o)<<12|(63&u)<<6|63&f)>65535&&s<1114112&&(a=s)}null===a?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=c}return O(n)}exports.Buffer=f,exports.SlowBuffer=d,exports.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),exports.kMaxLength=o(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,r,e){return s(null,t,r,e)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,r,e){return a(null,t,r,e)},f.allocUnsafe=function(t){return c(null,t)},f.allocUnsafeSlow=function(t){return c(null,t)},f.isBuffer=function(t){return!(null==t||!t._isBuffer)},f.compare=function(t,r){if(!f.isBuffer(t)||!f.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,n=r.length,i=0,o=Math.min(e,n);i<o;++i)if(t[i]!==r[i]){e=t[i],n=r[i];break}return e<n?-1:n<e?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,r){if(!n(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var i=f.allocUnsafe(r),o=0;for(e=0;e<t.length;++e){var u=t[e];if(!f.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(i,o),o+=u.length}return i},f.byteLength=v,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)b(this,r,r+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)b(this,r,r+3),b(this,r+1,r+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)b(this,r,r+7),b(this,r+1,r+6),b(this,r+2,r+5),b(this,r+3,r+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Y(this,0,t):E.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",r=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,r,e,n,i){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),r<0||e>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&r>=e)return 0;if(n>=i)return-1;if(r>=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),u=(e>>>=0)-(r>>>=0),s=Math.min(o,u),h=this.slice(n,i),a=t.slice(r,e),c=0;c<s;++c)if(h[c]!==a[c]){o=h[c],u=a[c];break}return o<u?-1:u<o?1:0},f.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},f.prototype.indexOf=function(t,r,e){return R(this,t,r,e,!0)},f.prototype.lastIndexOf=function(t,r,e){return R(this,t,r,e,!1)},f.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return A(this,t,r,e);case"utf8":case"utf-8":return m(this,t,r,e);case"ascii":return P(this,t,r,e);case"latin1":case"binary":return T(this,t,r,e);case"base64":return B(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function O(t){var r=t.length;if(r<=I)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=I));return e}function L(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function x(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=Z(t[o]);return i}function C(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function k(t,r,e,n,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}function N(t,r,e,n){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(r&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function z(t,r,e,n){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=r>>>8*(n?i:3-i)&255}function F(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function j(t,r,n,i,o){return o||F(t,r,n,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(t,r,n,i,23,4),n+4}function q(t,r,n,i,o){return o||F(t,r,n,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(t,r,n,i,52,8),n+8}f.prototype.slice=function(t,r){var e,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t),f.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,r)).__proto__=f.prototype;else{var i=r-t;e=new f(i,void 0);for(var o=0;o<i;++o)e[o]=this[o+t]}return e},f.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},f.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},f.prototype.readUInt8=function(t,r){return r||M(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,r){return r||M(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,r){return r||M(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,r){return r||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,r){return r||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},f.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},f.prototype.readInt8=function(t,r){return r||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,r){r||M(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(t,r){r||M(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(t,r){return r||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,r){return r||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},f.prototype.writeUIntBE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},f.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},f.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):z(this,t,r,!0),r+4},f.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=0,u=1,f=0;for(this[r]=255&t;++o<e&&(u*=256);)t<0&&0===f&&0!==this[r+o-1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=e-1,u=1,f=0;for(this[r+o]=255&t;--o>=0&&(u*=256);)t<0&&0===f&&0!==this[r+o+1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},f.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):z(this,t,r,!0),r+4},f.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeFloatLE=function(t,r,e){return j(this,t,r,!0,e)},f.prototype.writeFloatBE=function(t,r,e){return j(this,t,r,!1,e)},f.prototype.writeDoubleLE=function(t,r,e){return q(this,t,r,!0,e)},f.prototype.writeDoubleBE=function(t,r,e){return q(this,t,r,!1,e)},f.prototype.copy=function(t,r,e,n){if(e||(e=0),n||0===n||(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<e&&(n=e),n===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-e&&(n=t.length-r+e);var i,o=n-e;if(this===t&&e<r&&r<n)for(i=o-1;i>=0;--i)t[i+r]=this[i+e];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+r]=this[i+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),r);return o},f.prototype.fill=function(t,r,e,n){if("string"==typeof t){if("string"==typeof r?(n=r,r=0,e=this.length):"string"==typeof e&&(n=e,e=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;var o;if(r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var u=f.isBuffer(t)?t:$(new f(t,n).toString()),s=u.length;for(o=0;o<e-r;++o)this[o+r]=u[o%s]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function X(t){if((t=J(t).replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,r){var e;r=r||1/0;for(var n=t.length,i=null,o=[],u=0;u<n;++u){if((e=t.charCodeAt(u))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(u+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function G(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}function H(t,r){for(var e,n,i,o=[],u=0;u<t.length&&!((r-=2)<0);++u)n=(e=t.charCodeAt(u))>>8,i=e%256,o.push(i),o.push(n);return o}function K(t){return r.toByteArray(X(t))}function Q(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function W(t){return t!=t}
},{"base64-js":"FRly","ieee754":"Quj6","isarray":"aqZJ","buffer":"aMB2"}],"ljbF":[function(require,module,exports) {

var r=require("buffer/").Buffer;"undefined"!=typeof ArrayBuffer&&void 0===ArrayBuffer.isView&&(ArrayBuffer.isView=function(r){return t.indexOf(Object.prototype.toString.call(r))>-1});var t=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]","[object DataView]"];function e(r){return"string"==typeof r?0===r.length:0===r.byteLength}function n(t){return"string"==typeof t&&(t=new r(t,"utf8")),ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}module.exports=exports={isEmptyData:e,convertToBuffer:n};
},{"buffer/":"aMB2"}],"DTg6":[function(require,module,exports) {
var t=require("./browserHashUtils");function e(t,e){this.hash=new t,this.outer=new t;var i=r(t,e),s=new Uint8Array(t.BLOCK_SIZE);s.set(i);for(var h=0;h<t.BLOCK_SIZE;h++)i[h]^=54,s[h]^=92;this.hash.update(i),this.outer.update(s);for(h=0;h<i.byteLength;h++)i[h]=0}function r(e,r){var i=t.convertToBuffer(r);if(i.byteLength>e.BLOCK_SIZE){var s=new e;s.update(i),i=s.digest()}var h=new Uint8Array(e.BLOCK_SIZE);return h.set(i),h}module.exports=exports=e,e.prototype.update=function(e){if(t.isEmptyData(e)||this.error)return this;try{this.hash.update(t.convertToBuffer(e))}catch(r){this.error=r}return this},e.prototype.digest=function(t){return this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest(t)};
},{"./browserHashUtils":"ljbF"}],"sJ6n":[function(require,module,exports) {

var t=require("./browserHashUtils"),e=require("buffer/").Buffer,i=64,n=16,g=[1732584193,4023233417,2562383102,271733878];function r(){this.state=[1732584193,4023233417,2562383102,271733878],this.buffer=new DataView(new ArrayBuffer(i)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}function U(t,e,i,n,g,r){return((e=(e+t&4294967295)+(n+r&4294967295)&4294967295)<<g|e>>>32-g)+i&4294967295}function f(t,e,i,n,g,r,f){return U(e&i|~e&n,t,e,g,r,f)}function s(t,e,i,n,g,r,f){return U(e&n|i&~n,t,e,g,r,f)}function h(t,e,i,n,g,r,f){return U(e^i^n,t,e,g,r,f)}function u(t,e,i,n,g,r,f){return U(i^(e|~n),t,e,g,r,f)}module.exports=exports=r,r.BLOCK_SIZE=i,r.prototype.update=function(e){if(t.isEmptyData(e))return this;if(this.finished)throw new Error("Attempted to update an already finished hash.");var n=t.convertToBuffer(e),g=0,r=n.byteLength;for(this.bytesHashed+=r;r>0;)this.buffer.setUint8(this.bufferLength++,n[g++]),r--,this.bufferLength===i&&(this.hashBuffer(),this.bufferLength=0);return this},r.prototype.digest=function(t){if(!this.finished){var g=this.buffer,r=this.bufferLength,U=8*this.bytesHashed;if(g.setUint8(this.bufferLength++,128),r%i>=i-8){for(var f=this.bufferLength;f<i;f++)g.setUint8(f,0);this.hashBuffer(),this.bufferLength=0}for(f=this.bufferLength;f<i-8;f++)g.setUint8(f,0);g.setUint32(i-8,U>>>0,!0),g.setUint32(i-4,Math.floor(U/4294967296),!0),this.hashBuffer(),this.finished=!0}var s=new DataView(new ArrayBuffer(n));for(f=0;f<4;f++)s.setUint32(4*f,this.state[f],!0);var h=new e(s.buffer,s.byteOffset,s.byteLength);return t?h.toString(t):h},r.prototype.hashBuffer=function(){var t=this.buffer,e=this.state,i=e[0],n=e[1],g=e[2],r=e[3];i=f(i,n,g,r,t.getUint32(0,!0),7,3614090360),r=f(r,i,n,g,t.getUint32(4,!0),12,3905402710),g=f(g,r,i,n,t.getUint32(8,!0),17,606105819),n=f(n,g,r,i,t.getUint32(12,!0),22,3250441966),i=f(i,n,g,r,t.getUint32(16,!0),7,4118548399),r=f(r,i,n,g,t.getUint32(20,!0),12,1200080426),g=f(g,r,i,n,t.getUint32(24,!0),17,2821735955),n=f(n,g,r,i,t.getUint32(28,!0),22,4249261313),i=f(i,n,g,r,t.getUint32(32,!0),7,1770035416),r=f(r,i,n,g,t.getUint32(36,!0),12,2336552879),g=f(g,r,i,n,t.getUint32(40,!0),17,4294925233),n=f(n,g,r,i,t.getUint32(44,!0),22,2304563134),i=f(i,n,g,r,t.getUint32(48,!0),7,1804603682),r=f(r,i,n,g,t.getUint32(52,!0),12,4254626195),g=f(g,r,i,n,t.getUint32(56,!0),17,2792965006),i=s(i,n=f(n,g,r,i,t.getUint32(60,!0),22,1236535329),g,r,t.getUint32(4,!0),5,4129170786),r=s(r,i,n,g,t.getUint32(24,!0),9,3225465664),g=s(g,r,i,n,t.getUint32(44,!0),14,643717713),n=s(n,g,r,i,t.getUint32(0,!0),20,3921069994),i=s(i,n,g,r,t.getUint32(20,!0),5,3593408605),r=s(r,i,n,g,t.getUint32(40,!0),9,38016083),g=s(g,r,i,n,t.getUint32(60,!0),14,3634488961),n=s(n,g,r,i,t.getUint32(16,!0),20,3889429448),i=s(i,n,g,r,t.getUint32(36,!0),5,568446438),r=s(r,i,n,g,t.getUint32(56,!0),9,3275163606),g=s(g,r,i,n,t.getUint32(12,!0),14,4107603335),n=s(n,g,r,i,t.getUint32(32,!0),20,1163531501),i=s(i,n,g,r,t.getUint32(52,!0),5,2850285829),r=s(r,i,n,g,t.getUint32(8,!0),9,4243563512),g=s(g,r,i,n,t.getUint32(28,!0),14,1735328473),i=h(i,n=s(n,g,r,i,t.getUint32(48,!0),20,2368359562),g,r,t.getUint32(20,!0),4,4294588738),r=h(r,i,n,g,t.getUint32(32,!0),11,2272392833),g=h(g,r,i,n,t.getUint32(44,!0),16,1839030562),n=h(n,g,r,i,t.getUint32(56,!0),23,4259657740),i=h(i,n,g,r,t.getUint32(4,!0),4,2763975236),r=h(r,i,n,g,t.getUint32(16,!0),11,1272893353),g=h(g,r,i,n,t.getUint32(28,!0),16,4139469664),n=h(n,g,r,i,t.getUint32(40,!0),23,3200236656),i=h(i,n,g,r,t.getUint32(52,!0),4,681279174),r=h(r,i,n,g,t.getUint32(0,!0),11,3936430074),g=h(g,r,i,n,t.getUint32(12,!0),16,3572445317),n=h(n,g,r,i,t.getUint32(24,!0),23,76029189),i=h(i,n,g,r,t.getUint32(36,!0),4,3654602809),r=h(r,i,n,g,t.getUint32(48,!0),11,3873151461),g=h(g,r,i,n,t.getUint32(60,!0),16,530742520),i=u(i,n=h(n,g,r,i,t.getUint32(8,!0),23,3299628645),g,r,t.getUint32(0,!0),6,4096336452),r=u(r,i,n,g,t.getUint32(28,!0),10,1126891415),g=u(g,r,i,n,t.getUint32(56,!0),15,2878612391),n=u(n,g,r,i,t.getUint32(20,!0),21,4237533241),i=u(i,n,g,r,t.getUint32(48,!0),6,1700485571),r=u(r,i,n,g,t.getUint32(12,!0),10,2399980690),g=u(g,r,i,n,t.getUint32(40,!0),15,4293915773),n=u(n,g,r,i,t.getUint32(4,!0),21,2240044497),i=u(i,n,g,r,t.getUint32(32,!0),6,1873313359),r=u(r,i,n,g,t.getUint32(60,!0),10,4264355552),g=u(g,r,i,n,t.getUint32(24,!0),15,2734768916),n=u(n,g,r,i,t.getUint32(52,!0),21,1309151649),i=u(i,n,g,r,t.getUint32(16,!0),6,4149444226),r=u(r,i,n,g,t.getUint32(44,!0),10,3174756917),g=u(g,r,i,n,t.getUint32(8,!0),15,718787259),n=u(n,g,r,i,t.getUint32(36,!0),21,3951481745),e[0]=i+e[0]&4294967295,e[1]=n+e[1]&4294967295,e[2]=g+e[2]&4294967295,e[3]=r+e[3]&4294967295};
},{"./browserHashUtils":"ljbF","buffer/":"aMB2"}],"EqNI":[function(require,module,exports) {

var t=require("buffer/").Buffer,h=require("./browserHashUtils"),i=64,s=20,e=new Uint32Array([1518500249,1859775393,-1894007588,-899497514]),o=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],r=Math.pow(2,53)-1;function f(){this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=new Uint32Array(80),this.offset=0,this.shift=24,this.totalLength=0}module.exports=exports=f,f.BLOCK_SIZE=i,f.prototype.update=function(t){if(this.finished)throw new Error("Attempted to update an already finished hash.");if(h.isEmptyData(t))return this;var i=(t=h.convertToBuffer(t)).length;this.totalLength+=8*i;for(var s=0;s<i;s++)this.write(t[s]);return this},f.prototype.write=function(t){this.block[this.offset]|=(255&t)<<this.shift,this.shift?this.shift-=8:(this.offset++,this.shift=24),16===this.offset&&this.processBlock()},f.prototype.digest=function(h){this.write(128),(this.offset>14||14===this.offset&&this.shift<24)&&this.processBlock(),this.offset=14,this.shift=24,this.write(0),this.write(0),this.write(this.totalLength>0xffffffffff?this.totalLength/1099511627776:0),this.write(this.totalLength>4294967295?this.totalLength/4294967296:0);for(var i=24;i>=0;i-=8)this.write(this.totalLength>>i);var e=new t(s),o=new DataView(e.buffer);return o.setUint32(0,this.h0,!1),o.setUint32(4,this.h1,!1),o.setUint32(8,this.h2,!1),o.setUint32(12,this.h3,!1),o.setUint32(16,this.h4,!1),h?e.toString(h):e},f.prototype.processBlock=function(){for(var t=16;t<80;t++){var h=this.block[t-3]^this.block[t-8]^this.block[t-14]^this.block[t-16];this.block[t]=h<<1|h>>>31}var i,s,e=this.h0,o=this.h1,r=this.h2,f=this.h3,n=this.h4;for(t=0;t<80;t++){t<20?(i=f^o&(r^f),s=1518500249):t<40?(i=o^r^f,s=1859775393):t<60?(i=o&r|f&(o|r),s=2400959708):(i=o^r^f,s=3395469782);var a=(e<<5|e>>>27)+i+n+s+(0|this.block[t]);n=f,f=r,r=o<<30|o>>>2,o=e,e=a}for(this.h0=this.h0+e|0,this.h1=this.h1+o|0,this.h2=this.h2+r|0,this.h3=this.h3+f|0,this.h4=this.h4+n|0,this.offset=0,t=0;t<16;t++)this.block[t]=0};
},{"buffer/":"aMB2","./browserHashUtils":"ljbF"}],"JfHK":[function(require,module,exports) {

var t=require("buffer/").Buffer,e=require("./browserHashUtils"),s=64,h=32,i=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),r=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],f=Math.pow(2,53)-1;function n(){this.state=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}module.exports=exports=n,n.BLOCK_SIZE=s,n.prototype.update=function(t){if(this.finished)throw new Error("Attempted to update an already finished hash.");if(e.isEmptyData(t))return this;var h=0,i=(t=e.convertToBuffer(t)).byteLength;if(this.bytesHashed+=i,8*this.bytesHashed>f)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;i>0;)this.buffer[this.bufferLength++]=t[h++],i--,this.bufferLength===s&&(this.hashBuffer(),this.bufferLength=0);return this},n.prototype.digest=function(e){if(!this.finished){var i=8*this.bytesHashed,r=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),f=this.bufferLength;if(r.setUint8(this.bufferLength++,128),f%s>=s-8){for(var n=this.bufferLength;n<s;n++)r.setUint8(n,0);this.hashBuffer(),this.bufferLength=0}for(n=this.bufferLength;n<s-8;n++)r.setUint8(n,0);r.setUint32(s-8,Math.floor(i/4294967296),!0),r.setUint32(s-4,i),this.hashBuffer(),this.finished=!0}var a=new t(h);for(n=0;n<8;n++)a[4*n]=this.state[n]>>>24&255,a[4*n+1]=this.state[n]>>>16&255,a[4*n+2]=this.state[n]>>>8&255,a[4*n+3]=this.state[n]>>>0&255;return e?a.toString(e):a},n.prototype.hashBuffer=function(){for(var t=this.buffer,e=this.state,h=e[0],r=e[1],f=e[2],n=e[3],a=e[4],u=e[5],o=e[6],b=e[7],p=0;p<s;p++){if(p<16)this.temp[p]=(255&t[4*p])<<24|(255&t[4*p+1])<<16|(255&t[4*p+2])<<8|255&t[4*p+3];else{var d=this.temp[p-2],y=(d>>>17|d<<15)^(d>>>19|d<<13)^d>>>10,g=((d=this.temp[p-15])>>>7|d<<25)^(d>>>18|d<<14)^d>>>3;this.temp[p]=(y+this.temp[p-7]|0)+(g+this.temp[p-16]|0)}var m=(((a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7))+(a&u^~a&o)|0)+(b+(i[p]+this.temp[p]|0)|0)|0,w=((h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10))+(h&r^h&f^r&f)|0;b=o,o=u,u=a,a=n+m|0,n=f,f=r,r=h,h=m+w|0}e[0]+=h,e[1]+=r,e[2]+=f,e[3]+=n,e[4]+=a,e[5]+=u,e[6]+=o,e[7]+=b};
},{"buffer/":"aMB2","./browserHashUtils":"ljbF"}],"jxQV":[function(require,module,exports) {
var r=require("./browserHmac"),e=require("./browserMd5"),t=require("./browserSha1"),n=require("./browserSha256");module.exports=exports={createHash:function(r){if("md5"===(r=r.toLowerCase()))return new e;if("sha256"===r)return new n;if("sha1"===r)return new t;throw new Error("Hash algorithm "+r+" is not supported in the browser SDK")},createHmac:function(o,i){if("md5"===(o=o.toLowerCase()))return new r(e,i);if("sha256"===o)return new r(n,i);if("sha1"===o)return new r(t,i);throw new Error("HMAC algorithm "+o+" is not supported in the browser SDK")},createSign:function(){throw new Error("createSign is not implemented in the browser")}};
},{"./browserHmac":"DTg6","./browserMd5":"sJ6n","./browserSha1":"EqNI","./browserSha256":"JfHK"}],"sBBS":[function(require,module,exports) {
var global = arguments[3];
var define;
var o,e=arguments[3];!function(n){var r="object"==typeof exports&&exports&&!exports.nodeType&&exports,t="object"==typeof module&&module&&!module.nodeType&&module,u="object"==typeof e&&e;u.global!==u&&u.window!==u&&u.self!==u||(n=u);var i,f,c=2147483647,l=36,s=1,p=26,a=38,d=700,h=72,v=128,g="-",w=/^xn--/,x=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,m={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C=l-s,b=Math.floor,j=String.fromCharCode;function A(o){throw RangeError(m[o])}function I(o,e){for(var n=o.length,r=[];n--;)r[n]=e(o[n]);return r}function E(o,e){var n=o.split("@"),r="";return n.length>1&&(r=n[0]+"@",o=n[1]),r+I((o=o.replace(y,".")).split("."),e).join(".")}function F(o){for(var e,n,r=[],t=0,u=o.length;t<u;)(e=o.charCodeAt(t++))>=55296&&e<=56319&&t<u?56320==(64512&(n=o.charCodeAt(t++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),t--):r.push(e);return r}function O(o){return I(o,function(o){var e="";return o>65535&&(e+=j((o-=65536)>>>10&1023|55296),o=56320|1023&o),e+=j(o)}).join("")}function S(o,e){return o+22+75*(o<26)-((0!=e)<<5)}function T(o,e,n){var r=0;for(o=n?b(o/d):o>>1,o+=b(o/e);o>C*p>>1;r+=l)o=b(o/C);return b(r+(C+1)*o/(o+a))}function L(o){var e,n,r,t,u,i,f,a,d,w,x,y=[],m=o.length,C=0,j=v,I=h;for((n=o.lastIndexOf(g))<0&&(n=0),r=0;r<n;++r)o.charCodeAt(r)>=128&&A("not-basic"),y.push(o.charCodeAt(r));for(t=n>0?n+1:0;t<m;){for(u=C,i=1,f=l;t>=m&&A("invalid-input"),((a=(x=o.charCodeAt(t++))-48<10?x-22:x-65<26?x-65:x-97<26?x-97:l)>=l||a>b((c-C)/i))&&A("overflow"),C+=a*i,!(a<(d=f<=I?s:f>=I+p?p:f-I));f+=l)i>b(c/(w=l-d))&&A("overflow"),i*=w;I=T(C-u,e=y.length+1,0==u),b(C/e)>c-j&&A("overflow"),j+=b(C/e),C%=e,y.splice(C++,0,j)}return O(y)}function M(o){var e,n,r,t,u,i,f,a,d,w,x,y,m,C,I,E=[];for(y=(o=F(o)).length,e=v,n=0,u=h,i=0;i<y;++i)(x=o[i])<128&&E.push(j(x));for(r=t=E.length,t&&E.push(g);r<y;){for(f=c,i=0;i<y;++i)(x=o[i])>=e&&x<f&&(f=x);for(f-e>b((c-n)/(m=r+1))&&A("overflow"),n+=(f-e)*m,e=f,i=0;i<y;++i)if((x=o[i])<e&&++n>c&&A("overflow"),x==e){for(a=n,d=l;!(a<(w=d<=u?s:d>=u+p?p:d-u));d+=l)I=a-w,C=l-w,E.push(j(S(w+I%C,0))),a=b(I/C);E.push(j(S(a,0))),u=T(n,m,r==t),n=0,++r}++n,++e}return E.join("")}if(i={version:"1.3.2",ucs2:{decode:F,encode:O},decode:L,encode:M,toASCII:function(o){return E(o,function(o){return x.test(o)?"xn--"+M(o):o})},toUnicode:function(o){return E(o,function(o){return w.test(o)?L(o.slice(4).toLowerCase()):o})}},"function"==typeof o&&"object"==typeof o.amd&&o.amd)o("punycode",function(){return i});else if(r&&t)if(module.exports==r)t.exports=i;else for(f in i)i.hasOwnProperty(f)&&(r[f]=i[f]);else n.punycode=i}(this);
},{}],"ObZ4":[function(require,module,exports) {
"use strict";function r(r,e){return Object.prototype.hasOwnProperty.call(r,e)}module.exports=function(t,n,o,a){n=n||"&",o=o||"=";var s={};if("string"!=typeof t||0===t.length)return s;var p=/\+/g;t=t.split(n);var u=1e3;a&&"number"==typeof a.maxKeys&&(u=a.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var i=0;i<c;++i){var y,l,f,v,b=t[i].replace(p,"%20"),d=b.indexOf(o);d>=0?(y=b.substr(0,d),l=b.substr(d+1)):(y=b,l=""),f=decodeURIComponent(y),v=decodeURIComponent(l),r(s,f)?e(s[f])?s[f].push(v):s[f]=[s[f],v]:s[f]=v}return s};var e=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)};
},{}],"XK8a":[function(require,module,exports) {
"use strict";var n=function(n){switch(typeof n){case"string":return n;case"boolean":return n?"true":"false";case"number":return isFinite(n)?n:"";default:return""}};module.exports=function(o,u,c,a){return u=u||"&",c=c||"=",null===o&&(o=void 0),"object"==typeof o?r(t(o),function(t){var a=encodeURIComponent(n(t))+c;return e(o[t])?r(o[t],function(e){return a+encodeURIComponent(n(e))}).join(u):a+encodeURIComponent(n(o[t]))}).join(u):a?encodeURIComponent(n(a))+c+encodeURIComponent(n(o)):""};var e=Array.isArray||function(n){return"[object Array]"===Object.prototype.toString.call(n)};function r(n,e){if(n.map)return n.map(e);for(var r=[],t=0;t<n.length;t++)r.push(e(n[t],t));return r}var t=Object.keys||function(n){var e=[];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.push(r);return e};
},{}],"SF0R":[function(require,module,exports) {
"use strict";exports.decode=exports.parse=require("./decode"),exports.encode=exports.stringify=require("./encode");
},{"./decode":"ObZ4","./encode":"XK8a"}],"j37I":[function(require,module,exports) {
var t=require("punycode");function h(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}exports.parse=y,exports.resolve=b,exports.resolveObject=j,exports.format=g,exports.Url=h;var s=/^([a-z0-9.+-]+:)/i,e=/:[0-9]*$/,a=["<",">",'"',"`"," ","\r","\n","\t"],o=["{","}","|","\\","^","`"].concat(a),r=["'"].concat(o),n=["%","/","?",";","#"].concat(r),i=["/","?","#"],l=255,p=/^[a-z0-9A-Z_-]{0,63}$/,c=/^([a-z0-9A-Z_-]{0,63})(.*)$/,u={javascript:!0,"javascript:":!0},f={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=require("querystring");function y(t,s,e){if(t&&x(t)&&t instanceof h)return t;var a=new h;return a.parse(t,s,e),a}function g(t){return q(t)&&(t=y(t)),t instanceof h?t.format():h.prototype.format.call(t)}function b(t,h){return y(t,!1,!0).resolve(h)}function j(t,h){return t?y(t,!1,!0).resolveObject(h):h}function q(t){return"string"==typeof t}function x(t){return"object"==typeof t&&null!==t}function d(t){return null===t}function O(t){return null==t}h.prototype.parse=function(h,e,a){if(!q(h))throw new TypeError("Parameter 'url' must be a string, not "+typeof h);var o=h;o=o.trim();var y=s.exec(o);if(y){var g=(y=y[0]).toLowerCase();this.protocol=g,o=o.substr(y.length)}if(a||y||o.match(/^\/\/[^@\/]+@[^@\/]+/)){var b="//"===o.substr(0,2);!b||y&&f[y]||(o=o.substr(2),this.slashes=!0)}if(!f[y]&&(b||y&&!m[y])){for(var j,x,d=-1,O=0;O<i.length;O++){-1!==(A=o.indexOf(i[O]))&&(-1===d||A<d)&&(d=A)}-1!==(x=-1===d?o.lastIndexOf("@"):o.lastIndexOf("@",d))&&(j=o.slice(0,x),o=o.slice(x+1),this.auth=decodeURIComponent(j)),d=-1;for(O=0;O<n.length;O++){var A;-1!==(A=o.indexOf(n[O]))&&(-1===d||A<d)&&(d=A)}-1===d&&(d=o.length),this.host=o.slice(0,d),o=o.slice(d),this.parseHost(),this.hostname=this.hostname||"";var w="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!w)for(var C=this.hostname.split(/\./),I=(O=0,C.length);O<I;O++){var k=C[O];if(k&&!k.match(p)){for(var U="",z=0,E=k.length;z<E;z++)k.charCodeAt(z)>127?U+="x":U+=k[z];if(!U.match(p)){var R=C.slice(0,O),Z=C.slice(O+1),$=k.match(c);$&&(R.push($[1]),Z.unshift($[2])),Z.length&&(o="/"+Z.join(".")+o),this.hostname=R.join(".");break}}}if(this.hostname.length>l?this.hostname="":this.hostname=this.hostname.toLowerCase(),!w){var _=this.hostname.split("."),H=[];for(O=0;O<_.length;++O){var L=_[O];H.push(L.match(/[^A-Za-z0-9_-]/)?"xn--"+t.encode(L):L)}this.hostname=H.join(".")}var P=this.port?":"+this.port:"",T=this.hostname||"";this.host=T+P,this.href+=this.host,w&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==o[0]&&(o="/"+o))}if(!u[g])for(O=0,I=r.length;O<I;O++){var B=r[O],D=encodeURIComponent(B);D===B&&(D=escape(B)),o=o.split(B).join(D)}var F=o.indexOf("#");-1!==F&&(this.hash=o.substr(F),o=o.slice(0,F));var G=o.indexOf("?");if(-1!==G?(this.search=o.substr(G),this.query=o.substr(G+1),e&&(this.query=v.parse(this.query)),o=o.slice(0,G)):e&&(this.search="",this.query={}),o&&(this.pathname=o),m[g]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){P=this.pathname||"",L=this.search||"";this.path=P+L}return this.href=this.format(),this},h.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var h=this.protocol||"",s=this.pathname||"",e=this.hash||"",a=!1,o="";this.host?a=t+this.host:this.hostname&&(a=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&x(this.query)&&Object.keys(this.query).length&&(o=v.stringify(this.query));var r=this.search||o&&"?"+o||"";return h&&":"!==h.substr(-1)&&(h+=":"),this.slashes||(!h||m[h])&&!1!==a?(a="//"+(a||""),s&&"/"!==s.charAt(0)&&(s="/"+s)):a||(a=""),e&&"#"!==e.charAt(0)&&(e="#"+e),r&&"?"!==r.charAt(0)&&(r="?"+r),h+a+(s=s.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(r=r.replace("#","%23"))+e},h.prototype.resolve=function(t){return this.resolveObject(y(t,!1,!0)).format()},h.prototype.resolveObject=function(t){if(q(t)){var s=new h;s.parse(t,!1,!0),t=s}var e=new h;if(Object.keys(this).forEach(function(t){e[t]=this[t]},this),e.hash=t.hash,""===t.href)return e.href=e.format(),e;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(h){"protocol"!==h&&(e[h]=t[h])}),m[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e;if(t.protocol&&t.protocol!==e.protocol){if(!m[t.protocol])return Object.keys(t).forEach(function(h){e[h]=t[h]}),e.href=e.format(),e;if(e.protocol=t.protocol,t.host||f[t.protocol])e.pathname=t.pathname;else{for(var a=(t.pathname||"").split("/");a.length&&!(t.host=a.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==a[0]&&a.unshift(""),a.length<2&&a.unshift(""),e.pathname=a.join("/")}if(e.search=t.search,e.query=t.query,e.host=t.host||"",e.auth=t.auth,e.hostname=t.hostname||t.host,e.port=t.port,e.pathname||e.search){var o=e.pathname||"",r=e.search||"";e.path=o+r}return e.slashes=e.slashes||t.slashes,e.href=e.format(),e}var n=e.pathname&&"/"===e.pathname.charAt(0),i=t.host||t.pathname&&"/"===t.pathname.charAt(0),l=i||n||e.host&&t.pathname,p=l,c=e.pathname&&e.pathname.split("/")||[],u=(a=t.pathname&&t.pathname.split("/")||[],e.protocol&&!m[e.protocol]);if(u&&(e.hostname="",e.port=null,e.host&&(""===c[0]?c[0]=e.host:c.unshift(e.host)),e.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===a[0]?a[0]=t.host:a.unshift(t.host)),t.host=null),l=l&&(""===a[0]||""===c[0])),i)e.host=t.host||""===t.host?t.host:e.host,e.hostname=t.hostname||""===t.hostname?t.hostname:e.hostname,e.search=t.search,e.query=t.query,c=a;else if(a.length)c||(c=[]),c.pop(),c=c.concat(a),e.search=t.search,e.query=t.query;else if(!O(t.search)){if(u)e.hostname=e.host=c.shift(),(j=!!(e.host&&e.host.indexOf("@")>0)&&e.host.split("@"))&&(e.auth=j.shift(),e.host=e.hostname=j.shift());return e.search=t.search,e.query=t.query,d(e.pathname)&&d(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e}if(!c.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var v=c.slice(-1)[0],y=(e.host||t.host)&&("."===v||".."===v)||""===v,g=0,b=c.length;b>=0;b--)"."==(v=c[b])?c.splice(b,1):".."===v?(c.splice(b,1),g++):g&&(c.splice(b,1),g--);if(!l&&!p)for(;g--;g)c.unshift("..");!l||""===c[0]||c[0]&&"/"===c[0].charAt(0)||c.unshift(""),y&&"/"!==c.join("/").substr(-1)&&c.push("");var j,x=""===c[0]||c[0]&&"/"===c[0].charAt(0);u&&(e.hostname=e.host=x?"":c.length?c.shift():"",(j=!!(e.host&&e.host.indexOf("@")>0)&&e.host.split("@"))&&(e.auth=j.shift(),e.host=e.hostname=j.shift()));return(l=l||e.host&&c.length)&&!x&&c.unshift(""),c.length?e.pathname=c.join("/"):(e.pathname=null,e.path=null),d(e.pathname)&&d(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=t.auth||e.auth,e.slashes=e.slashes||t.slashes,e.href=e.format(),e},h.prototype.parseHost=function(){var t=this.host,h=e.exec(t);h&&(":"!==(h=h[0])&&(this.port=h.substr(1)),t=t.substr(0,t.length-h.length)),t&&(this.hostname=t)};
},{"punycode":"sBBS","querystring":"SF0R"}],"XyQW":[function(require,module,exports) {
"use strict";function r(r,e){return Object.prototype.hasOwnProperty.call(r,e)}module.exports=function(e,t,n,o){t=t||"&",n=n||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var p=1e3;o&&"number"==typeof o.maxKeys&&(p=o.maxKeys);var u=e.length;p>0&&u>p&&(u=p);for(var c=0;c<u;++c){var i,y,f,l,d=e[c].replace(a,"%20"),m=d.indexOf(n);m>=0?(i=d.substr(0,m),y=d.substr(m+1)):(i=d,y=""),f=decodeURIComponent(i),l=decodeURIComponent(y),r(s,f)?Array.isArray(s[f])?s[f].push(l):s[f]=[s[f],l]:s[f]=l}return s};
},{}],"swIA":[function(require,module,exports) {
"use strict";var e=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};module.exports=function(n,o,t,r){return o=o||"&",t=t||"=",null===n&&(n=void 0),"object"==typeof n?Object.keys(n).map(function(r){var u=encodeURIComponent(e(r))+t;return Array.isArray(n[r])?n[r].map(function(n){return u+encodeURIComponent(e(n))}).join(o):u+encodeURIComponent(e(n[r]))}).join(o):r?encodeURIComponent(e(r))+t+encodeURIComponent(e(n)):""};
},{}],"CMHq":[function(require,module,exports) {
"use strict";exports.decode=exports.parse=require("./decode"),exports.encode=exports.stringify=require("./encode");
},{"./decode":"XyQW","./encode":"swIA"}],"U90Q":[function(require,module,exports) {
module.exports={now:function(){return"undefined"!=typeof performance&&"function"==typeof performance.now?performance.now():Date.now()}};
},{}],"sfLa":[function(require,module,exports) {
function e(e){for(var r=[],n=0;n<e.length;){var t=e.readInt32BE(n),s=e.slice(n,t+n);n+=t,r.push(s)}return r}module.exports={eventMessageChunker:e};
},{}],"Gjdf":[function(require,module,exports) {
var r=require("../core").util,t=r.buffer.toBuffer;function e(e){if(8!==e.length)throw new Error("Int64 buffers must be exactly 8 bytes");r.Buffer.isBuffer(e)||(e=t(e)),this.bytes=e}function n(r){for(var t=0;t<8;t++)r[t]^=255;for(t=7;t>-1&&(r[t]++,0===r[t]);t--);}e.fromNumber=function(r){if(r>0x8000000000000000||r<-0x8000000000000000)throw new Error(r+" is too large (or, if negative, too small) to represent as an Int64");for(var t=new Uint8Array(8),o=7,f=Math.abs(Math.round(r));o>-1&&f>0;o--,f/=256)t[o]=f;return r<0&&n(t),new e(t)},e.prototype.valueOf=function(){var r=this.bytes.slice(0),t=128&r[0];return t&&n(r),parseInt(r.toString("hex"),16)*(t?-1:1)},e.prototype.toString=function(){return String(this.valueOf())},module.exports={Int64:e};
},{"../core":"hd5g"}],"q3tc":[function(require,module,exports) {
var e=require("../core").util,r=e.buffer.toBuffer,t=4,o=2*t,s=4,c=o+2*s;function a(a){if(e.Buffer.isBuffer(a)||(a=r(a)),a.length<c)throw new Error("Provided message too short to accommodate event stream message overhead");if(a.length!==a.readUInt32BE(0))throw new Error("Reported message length does not match received message length");var h=a.readUInt32BE(o);if(h!==e.crypto.crc32(a.slice(0,o)))throw new Error("The prelude checksum specified in the message ("+h+") does not match the calculated CRC32 checksum.");var n=a.readUInt32BE(a.length-s);if(n!==e.crypto.crc32(a.slice(0,a.length-s)))throw new Error("The message checksum did not match the expected value of "+n);var d=o+s,i=d+a.readUInt32BE(t);return{headers:a.slice(d,i),body:a.slice(i,a.length-s)}}module.exports={splitMessage:a};
},{"../core":"hd5g"}],"zvZw":[function(require,module,exports) {
var e=require("./int64").Int64,a=require("./split-message").splitMessage,r="boolean",t="byte",s="short",n="integer",u="long",l="binary",i="string",b="timestamp",c="uuid";function v(a){for(var v={},o=0;o<a.length;){var d=a.readUInt8(o++),p=a.slice(o,o+d).toString();switch(o+=d,a.readUInt8(o++)){case 0:v[p]={type:r,value:!0};break;case 1:v[p]={type:r,value:!1};break;case 2:v[p]={type:t,value:a.readInt8(o++)};break;case 3:v[p]={type:s,value:a.readInt16BE(o)},o+=2;break;case 4:v[p]={type:n,value:a.readInt32BE(o)},o+=4;break;case 5:v[p]={type:u,value:new e(a.slice(o,o+8))},o+=8;break;case 6:var y=a.readUInt16BE(o);o+=2,v[p]={type:l,value:a.slice(o,o+y)},o+=y;break;case 7:var g=a.readUInt16BE(o);o+=2,v[p]={type:i,value:a.slice(o,o+g).toString()},o+=g;break;case 8:v[p]={type:b,value:new Date(new e(a.slice(o,o+8)).valueOf())},o+=8;break;case 9:var k=a.slice(o,o+16).toString("hex");o+=16,v[p]={type:c,value:k.substr(0,8)+"-"+k.substr(8,4)+"-"+k.substr(12,4)+"-"+k.substr(16,4)+"-"+k.substr(20)};break;default:throw new Error("Unrecognized header type tag")}}return v}function o(e){var r=a(e);return{headers:v(r.headers),body:r.body}}module.exports={parseMessage:o};
},{"./int64":"Gjdf","./split-message":"q3tc"}],"LRmZ":[function(require,module,exports) {
var e=require("./parse-message").parseMessage;function r(r,s,v){var t=e(s),n=t.headers[":message-type"];if(n){if("error"===n.value)throw a(t);if("event"!==n.value)return}var o=t.headers[":event-type"],m=v.members[o.value];if(m){var u={},d=m.eventPayloadMemberName;if(d){var i=m.members[d];"binary"===i.type?u[d]=t.body:u[d]=r.parse(t.body.toString(),i)}for(var l=m.eventHeaderMemberNames,p=0;p<l.length;p++){var b=l[p];t.headers[b]&&(u[b]=m.members[b].toType(t.headers[b].value))}var f={};return f[o.value]=u,f}}function a(e){var r=e.headers[":error-code"],a=e.headers[":error-message"],s=new Error(a.value||a);return s.code=s.name=r.value||r,s}module.exports={parseEvent:r};
},{"./parse-message":"zvZw"}],"ci79":[function(require,module,exports) {
var e=require("../event-stream/event-message-chunker").eventMessageChunker,r=require("./parse-event").parseEvent;function t(t,n,a){for(var s=e(t),u=[],v=0;v<s.length;v++)u.push(r(n,s[v],a));return u}module.exports={createEventStream:t};
},{"../event-stream/event-message-chunker":"sfLa","./parse-event":"LRmZ"}],"aAvn":[function(require,module,exports) {
var process = require("process");
var e=require("process"),r=require("./core");function i(e,i){if("string"==typeof e){if(["legacy","regional"].indexOf(e.toLowerCase())>=0)return e.toLowerCase();throw r.util.error(new Error,i)}}function n(n,o){var t;if((n=n||{})[o.clientConfig]&&(t=i(n[o.clientConfig],{code:"InvalidConfiguration",message:'invalid "'+o.clientConfig+'" configuration. Expect "legacy"  or "regional". Got "'+n[o.clientConfig]+'".'})))return t;if(!r.util.isNode())return t;if(Object.prototype.hasOwnProperty.call(e.env,o.env)&&(t=i(e.env[o.env],{code:"InvalidEnvironmentalVariable",message:"invalid "+o.env+' environmental variable. Expect "legacy"  or "regional". Got "'+e.env[o.env]+'".'})))return t;var a={};try{a=r.util.getProfilesFromSharedConfig(r.util.iniLoader)[r.util.defaultProfile]}catch(l){}if(a&&Object.prototype.hasOwnProperty.call(a,o.sharedConfig)&&(t=i(a[o.sharedConfig],{code:"InvalidConfiguration",message:"invalid "+o.sharedConfig+' profile config. Expect "legacy"  or "regional". Got "'+a[o.sharedConfig]+'".'})))return t;return t}module.exports=n;
},{"./core":"hd5g","process":"g5IB"}],"JWby":[function(require,module,exports) {
var e=require("../core"),n=require("../config_regional_endpoint"),i="AWS_STS_REGIONAL_ENDPOINTS",t="sts_regional_endpoints";e.util.update(e.STS.prototype,{credentialsFrom:function(n,i){return n?(i||(i=new e.TemporaryCredentials),i.expired=!1,i.accessKeyId=n.Credentials.AccessKeyId,i.secretAccessKey=n.Credentials.SecretAccessKey,i.sessionToken=n.Credentials.SessionToken,i.expireTime=n.Credentials.Expiration,i):null},assumeRoleWithWebIdentity:function(e,n){return this.makeUnauthenticatedRequest("assumeRoleWithWebIdentity",e,n)},assumeRoleWithSAML:function(e,n){return this.makeUnauthenticatedRequest("assumeRoleWithSAML",e,n)},setupRequestListeners:function(e){e.addListener("validate",this.optInRegionalEndpoint,!0)},optInRegionalEndpoint:function(s){var o=s.service,r=o.config;if(r.stsRegionalEndpoints=n(o._originalConfig,{env:i,sharedConfig:t,clientConfig:"stsRegionalEndpoints"}),"regional"===r.stsRegionalEndpoints&&o.isGlobalEndpoint){if(!r.region)throw e.util.error(new Error,{code:"ConfigError",message:"Missing region in config"});var a=r.endpoint.indexOf(".amazonaws.com"),d=r.endpoint.substring(0,a)+"."+r.region+r.endpoint.substring(a);s.httpRequest.updateEndpoint(d),s.httpRequest.region=r.region}}});
},{"../core":"hd5g","../config_regional_endpoint":"aAvn"}],"Vh0c":[function(require,module,exports) {
module.exports={version:"2.0",metadata:{apiVersion:"2011-06-15",endpointPrefix:"sts",globalEndpoint:"sts.amazonaws.com",protocol:"query",serviceAbbreviation:"AWS STS",serviceFullName:"AWS Security Token Service",serviceId:"STS",signatureVersion:"v4",uid:"sts-2011-06-15",xmlNamespace:"https://sts.amazonaws.com/doc/2011-06-15/"},operations:{AssumeRole:{input:{type:"structure",required:["RoleArn","RoleSessionName"],members:{RoleArn:{},RoleSessionName:{},PolicyArns:{shape:"S4"},Policy:{},DurationSeconds:{type:"integer"},Tags:{shape:"S8"},TransitiveTagKeys:{type:"list",member:{}},ExternalId:{},SerialNumber:{},TokenCode:{}}},output:{resultWrapper:"AssumeRoleResult",type:"structure",members:{Credentials:{shape:"Sh"},AssumedRoleUser:{shape:"Sm"},PackedPolicySize:{type:"integer"}}}},AssumeRoleWithSAML:{input:{type:"structure",required:["RoleArn","PrincipalArn","SAMLAssertion"],members:{RoleArn:{},PrincipalArn:{},SAMLAssertion:{type:"string",sensitive:!0},PolicyArns:{shape:"S4"},Policy:{},DurationSeconds:{type:"integer"}}},output:{resultWrapper:"AssumeRoleWithSAMLResult",type:"structure",members:{Credentials:{shape:"Sh"},AssumedRoleUser:{shape:"Sm"},PackedPolicySize:{type:"integer"},Subject:{},SubjectType:{},Issuer:{},Audience:{},NameQualifier:{}}}},AssumeRoleWithWebIdentity:{input:{type:"structure",required:["RoleArn","RoleSessionName","WebIdentityToken"],members:{RoleArn:{},RoleSessionName:{},WebIdentityToken:{type:"string",sensitive:!0},ProviderId:{},PolicyArns:{shape:"S4"},Policy:{},DurationSeconds:{type:"integer"}}},output:{resultWrapper:"AssumeRoleWithWebIdentityResult",type:"structure",members:{Credentials:{shape:"Sh"},SubjectFromWebIdentityToken:{},AssumedRoleUser:{shape:"Sm"},PackedPolicySize:{type:"integer"},Provider:{},Audience:{}}}},DecodeAuthorizationMessage:{input:{type:"structure",required:["EncodedMessage"],members:{EncodedMessage:{}}},output:{resultWrapper:"DecodeAuthorizationMessageResult",type:"structure",members:{DecodedMessage:{}}}},GetAccessKeyInfo:{input:{type:"structure",required:["AccessKeyId"],members:{AccessKeyId:{}}},output:{resultWrapper:"GetAccessKeyInfoResult",type:"structure",members:{Account:{}}}},GetCallerIdentity:{input:{type:"structure",members:{}},output:{resultWrapper:"GetCallerIdentityResult",type:"structure",members:{UserId:{},Account:{},Arn:{}}}},GetFederationToken:{input:{type:"structure",required:["Name"],members:{Name:{},Policy:{},PolicyArns:{shape:"S4"},DurationSeconds:{type:"integer"},Tags:{shape:"S8"}}},output:{resultWrapper:"GetFederationTokenResult",type:"structure",members:{Credentials:{shape:"Sh"},FederatedUser:{type:"structure",required:["FederatedUserId","Arn"],members:{FederatedUserId:{},Arn:{}}},PackedPolicySize:{type:"integer"}}}},GetSessionToken:{input:{type:"structure",members:{DurationSeconds:{type:"integer"},SerialNumber:{},TokenCode:{}}},output:{resultWrapper:"GetSessionTokenResult",type:"structure",members:{Credentials:{shape:"Sh"}}}}},shapes:{S4:{type:"list",member:{type:"structure",members:{arn:{}}}},S8:{type:"list",member:{type:"structure",required:["Key","Value"],members:{Key:{},Value:{}}}},Sh:{type:"structure",required:["AccessKeyId","SecretAccessKey","SessionToken","Expiration"],members:{AccessKeyId:{},SecretAccessKey:{},SessionToken:{},Expiration:{type:"timestamp"}}},Sm:{type:"structure",required:["AssumedRoleId","Arn"],members:{AssumedRoleId:{},Arn:{}}}}};
},{}],"iqUf":[function(require,module,exports) {
module.exports={pagination:{}};
},{}],"L5d6":[function(require,module,exports) {
require("../lib/node_loader");var e=require("../lib/core"),r=e.Service,i=e.apiLoader;i.services.sts={},e.STS=r.defineService("sts",["2011-06-15"]),require("../lib/services/sts"),Object.defineProperty(i.services.sts,"2011-06-15",{get:function(){var e=require("../apis/sts-2011-06-15.min.json");return e.paginators=require("../apis/sts-2011-06-15.paginators.json").pagination,e},enumerable:!0,configurable:!0}),module.exports=e.STS;
},{"../lib/node_loader":"E3wu","../lib/core":"hd5g","../lib/services/sts":"JWby","../apis/sts-2011-06-15.min.json":"Vh0c","../apis/sts-2011-06-15.paginators.json":"iqUf"}],"lTk7":[function(require,module,exports) {
var e=require("../core"),s=require("../../clients/sts");e.TemporaryCredentials=e.util.inherit(e.Credentials,{constructor:function(s,t){e.Credentials.call(this),this.loadMasterCredentials(t),this.expired=!0,this.params=s||{},this.params.RoleArn&&(this.params.RoleSessionName=this.params.RoleSessionName||"temporary-credentials")},refresh:function(s){this.coalesceRefresh(s||e.util.fn.callback)},load:function(e){var s=this;s.createClients(),s.masterCredentials.get(function(){s.service.config.credentials=s.masterCredentials,(s.params.RoleArn?s.service.assumeRole:s.service.getSessionToken).call(s.service,function(t,r){t||s.service.credentialsFrom(r,s),e(t)})})},loadMasterCredentials:function(s){for(this.masterCredentials=s||e.config.credentials;this.masterCredentials.masterCredentials;)this.masterCredentials=this.masterCredentials.masterCredentials;"function"!=typeof this.masterCredentials.get&&(this.masterCredentials=new e.Credentials(this.masterCredentials))},createClients:function(){this.service=this.service||new s({params:this.params})}});
},{"../core":"hd5g","../../clients/sts":"L5d6"}],"PtXh":[function(require,module,exports) {
var e=require("../core"),r=require("../../clients/sts");e.ChainableTemporaryCredentials=e.util.inherit(e.Credentials,{constructor:function(n){e.Credentials.call(this),n=n||{},this.errorCode="ChainableTemporaryCredentialsProviderFailure",this.expired=!0,this.tokenCodeFn=null;var o=e.util.copy(n.params)||{};if(o.RoleArn&&(o.RoleSessionName=o.RoleSessionName||"temporary-credentials"),o.SerialNumber){if(!n.tokenCodeFn||"function"!=typeof n.tokenCodeFn)throw new e.util.error(new Error("tokenCodeFn must be a function when params.SerialNumber is given"),{code:this.errorCode});this.tokenCodeFn=n.tokenCodeFn}var i=e.util.merge({params:o,credentials:n.masterCredentials||e.config.credentials},n.stsConfig||{});this.service=new r(i)},refresh:function(r){this.coalesceRefresh(r||e.util.fn.callback)},load:function(e){var r=this,n=r.service.config.params.RoleArn?"assumeRole":"getSessionToken";this.getTokenCode(function(o,i){var t={};o?e(o):(i&&(t.TokenCode=i),r.service[n](t,function(n,o){n||r.service.credentialsFrom(o,r),e(n)}))})},getTokenCode:function(r){var n=this;this.tokenCodeFn?this.tokenCodeFn(this.service.config.params.SerialNumber,function(o,i){if(o){var t=o;return o instanceof Error&&(t=o.message),void r(e.util.error(new Error("Error fetching MFA token: "+t),{code:n.errorCode}))}r(null,i)}):r(null)}});
},{"../core":"hd5g","../../clients/sts":"L5d6"}],"kLPL":[function(require,module,exports) {
var e=require("../core"),i=require("../../clients/sts");e.WebIdentityCredentials=e.util.inherit(e.Credentials,{constructor:function(i,t){e.Credentials.call(this),this.expired=!0,this.params=i,this.params.RoleSessionName=this.params.RoleSessionName||"web-identity",this.data=null,this._clientConfig=e.util.copy(t||{})},refresh:function(i){this.coalesceRefresh(i||e.util.fn.callback)},load:function(e){var i=this;i.createClients(),i.service.assumeRoleWithWebIdentity(function(t,s){i.data=null,t||(i.data=s,i.service.credentialsFrom(s,i)),e(t)})},createClients:function(){if(!this.service){var t=e.util.merge({},this._clientConfig);t.params=this.params,this.service=new i(t)}}});
},{"../core":"hd5g","../../clients/sts":"L5d6"}],"WU0Q":[function(require,module,exports) {
var e=require("../core");e.util.update(e.CognitoIdentity.prototype,{getOpenIdToken:function(e,t){return this.makeUnauthenticatedRequest("getOpenIdToken",e,t)},getId:function(e,t){return this.makeUnauthenticatedRequest("getId",e,t)},getCredentialsForIdentity:function(e,t){return this.makeUnauthenticatedRequest("getCredentialsForIdentity",e,t)}});
},{"../core":"hd5g"}],"d6Gv":[function(require,module,exports) {
module.exports={version:"2.0",metadata:{apiVersion:"2014-06-30",endpointPrefix:"cognito-identity",jsonVersion:"1.1",protocol:"json",serviceFullName:"Amazon Cognito Identity",serviceId:"Cognito Identity",signatureVersion:"v4",targetPrefix:"AWSCognitoIdentityService",uid:"cognito-identity-2014-06-30"},operations:{CreateIdentityPool:{input:{type:"structure",required:["IdentityPoolName","AllowUnauthenticatedIdentities"],members:{IdentityPoolName:{},AllowUnauthenticatedIdentities:{type:"boolean"},AllowClassicFlow:{type:"boolean"},SupportedLoginProviders:{shape:"S5"},DeveloperProviderName:{},OpenIdConnectProviderARNs:{shape:"S9"},CognitoIdentityProviders:{shape:"Sb"},SamlProviderARNs:{shape:"Sg"},IdentityPoolTags:{shape:"Sh"}}},output:{shape:"Sk"}},DeleteIdentities:{input:{type:"structure",required:["IdentityIdsToDelete"],members:{IdentityIdsToDelete:{type:"list",member:{}}}},output:{type:"structure",members:{UnprocessedIdentityIds:{type:"list",member:{type:"structure",members:{IdentityId:{},ErrorCode:{}}}}}}},DeleteIdentityPool:{input:{type:"structure",required:["IdentityPoolId"],members:{IdentityPoolId:{}}}},DescribeIdentity:{input:{type:"structure",required:["IdentityId"],members:{IdentityId:{}}},output:{shape:"Sv"}},DescribeIdentityPool:{input:{type:"structure",required:["IdentityPoolId"],members:{IdentityPoolId:{}}},output:{shape:"Sk"}},GetCredentialsForIdentity:{input:{type:"structure",required:["IdentityId"],members:{IdentityId:{},Logins:{shape:"S10"},CustomRoleArn:{}}},output:{type:"structure",members:{IdentityId:{},Credentials:{type:"structure",members:{AccessKeyId:{},SecretKey:{},SessionToken:{},Expiration:{type:"timestamp"}}}}}},GetId:{input:{type:"structure",required:["IdentityPoolId"],members:{AccountId:{},IdentityPoolId:{},Logins:{shape:"S10"}}},output:{type:"structure",members:{IdentityId:{}}}},GetIdentityPoolRoles:{input:{type:"structure",required:["IdentityPoolId"],members:{IdentityPoolId:{}}},output:{type:"structure",members:{IdentityPoolId:{},Roles:{shape:"S1c"},RoleMappings:{shape:"S1e"}}}},GetOpenIdToken:{input:{type:"structure",required:["IdentityId"],members:{IdentityId:{},Logins:{shape:"S10"}}},output:{type:"structure",members:{IdentityId:{},Token:{}}}},GetOpenIdTokenForDeveloperIdentity:{input:{type:"structure",required:["IdentityPoolId","Logins"],members:{IdentityPoolId:{},IdentityId:{},Logins:{shape:"S10"},TokenDuration:{type:"long"}}},output:{type:"structure",members:{IdentityId:{},Token:{}}}},ListIdentities:{input:{type:"structure",required:["IdentityPoolId","MaxResults"],members:{IdentityPoolId:{},MaxResults:{type:"integer"},NextToken:{},HideDisabled:{type:"boolean"}}},output:{type:"structure",members:{IdentityPoolId:{},Identities:{type:"list",member:{shape:"Sv"}},NextToken:{}}}},ListIdentityPools:{input:{type:"structure",required:["MaxResults"],members:{MaxResults:{type:"integer"},NextToken:{}}},output:{type:"structure",members:{IdentityPools:{type:"list",member:{type:"structure",members:{IdentityPoolId:{},IdentityPoolName:{}}}},NextToken:{}}}},ListTagsForResource:{input:{type:"structure",required:["ResourceArn"],members:{ResourceArn:{}}},output:{type:"structure",members:{Tags:{shape:"Sh"}}}},LookupDeveloperIdentity:{input:{type:"structure",required:["IdentityPoolId"],members:{IdentityPoolId:{},IdentityId:{},DeveloperUserIdentifier:{},MaxResults:{type:"integer"},NextToken:{}}},output:{type:"structure",members:{IdentityId:{},DeveloperUserIdentifierList:{type:"list",member:{}},NextToken:{}}}},MergeDeveloperIdentities:{input:{type:"structure",required:["SourceUserIdentifier","DestinationUserIdentifier","DeveloperProviderName","IdentityPoolId"],members:{SourceUserIdentifier:{},DestinationUserIdentifier:{},DeveloperProviderName:{},IdentityPoolId:{}}},output:{type:"structure",members:{IdentityId:{}}}},SetIdentityPoolRoles:{input:{type:"structure",required:["IdentityPoolId","Roles"],members:{IdentityPoolId:{},Roles:{shape:"S1c"},RoleMappings:{shape:"S1e"}}}},TagResource:{input:{type:"structure",required:["ResourceArn","Tags"],members:{ResourceArn:{},Tags:{shape:"Sh"}}},output:{type:"structure",members:{}}},UnlinkDeveloperIdentity:{input:{type:"structure",required:["IdentityId","IdentityPoolId","DeveloperProviderName","DeveloperUserIdentifier"],members:{IdentityId:{},IdentityPoolId:{},DeveloperProviderName:{},DeveloperUserIdentifier:{}}}},UnlinkIdentity:{input:{type:"structure",required:["IdentityId","Logins","LoginsToRemove"],members:{IdentityId:{},Logins:{shape:"S10"},LoginsToRemove:{shape:"Sw"}}}},UntagResource:{input:{type:"structure",required:["ResourceArn","TagKeys"],members:{ResourceArn:{},TagKeys:{type:"list",member:{}}}},output:{type:"structure",members:{}}},UpdateIdentityPool:{input:{shape:"Sk"},output:{shape:"Sk"}}},shapes:{S5:{type:"map",key:{},value:{}},S9:{type:"list",member:{}},Sb:{type:"list",member:{type:"structure",members:{ProviderName:{},ClientId:{},ServerSideTokenCheck:{type:"boolean"}}}},Sg:{type:"list",member:{}},Sh:{type:"map",key:{},value:{}},Sk:{type:"structure",required:["IdentityPoolId","IdentityPoolName","AllowUnauthenticatedIdentities"],members:{IdentityPoolId:{},IdentityPoolName:{},AllowUnauthenticatedIdentities:{type:"boolean"},AllowClassicFlow:{type:"boolean"},SupportedLoginProviders:{shape:"S5"},DeveloperProviderName:{},OpenIdConnectProviderARNs:{shape:"S9"},CognitoIdentityProviders:{shape:"Sb"},SamlProviderARNs:{shape:"Sg"},IdentityPoolTags:{shape:"Sh"}}},Sv:{type:"structure",members:{IdentityId:{},Logins:{shape:"Sw"},CreationDate:{type:"timestamp"},LastModifiedDate:{type:"timestamp"}}},Sw:{type:"list",member:{}},S10:{type:"map",key:{},value:{}},S1c:{type:"map",key:{},value:{}},S1e:{type:"map",key:{},value:{type:"structure",required:["Type"],members:{Type:{},AmbiguousRoleResolution:{},RulesConfiguration:{type:"structure",required:["Rules"],members:{Rules:{type:"list",member:{type:"structure",required:["Claim","MatchType","Value","RoleARN"],members:{Claim:{},MatchType:{},Value:{},RoleARN:{}}}}}}}}}}};
},{}],"mMAb":[function(require,module,exports) {
require("../lib/node_loader");var i=require("../lib/core"),e=i.Service,t=i.apiLoader;t.services.cognitoidentity={},i.CognitoIdentity=e.defineService("cognitoidentity",["2014-06-30"]),require("../lib/services/cognitoidentity"),Object.defineProperty(t.services.cognitoidentity,"2014-06-30",{get:function(){var i=require("../apis/cognito-identity-2014-06-30.min.json");return i.paginators=require("../apis/cognito-identity-2014-06-30.paginators.json").pagination,i},enumerable:!0,configurable:!0}),module.exports=i.CognitoIdentity;
},{"../lib/node_loader":"E3wu","../lib/core":"hd5g","../lib/services/cognitoidentity":"WU0Q","../apis/cognito-identity-2014-06-30.min.json":"d6Gv","../apis/cognito-identity-2014-06-30.paginators.json":"iqUf"}],"JKPn":[function(require,module,exports) {
var t=require("../core"),e=require("../../clients/cognitoidentity"),i=require("../../clients/sts");t.CognitoIdentityCredentials=t.util.inherit(t.Credentials,{localStorageKey:{id:"aws.cognito.identity-id.",providers:"aws.cognito.identity-providers."},constructor:function(e,i){t.Credentials.call(this),this.expired=!0,this.params=e,this.data=null,this._identityId=null,this._clientConfig=t.util.copy(i||{}),this.loadCachedId();var n=this;Object.defineProperty(this,"identityId",{get:function(){return n.loadCachedId(),n._identityId||n.params.IdentityId},set:function(t){n._identityId=t}})},refresh:function(e){this.coalesceRefresh(e||t.util.fn.callback)},load:function(t){var e=this;e.createClients(),e.data=null,e._identityId=null,e.getId(function(i){i?(e.clearIdOnNotAuthorized(i),t(i)):e.params.RoleArn?e.getCredentialsFromSTS(t):e.getCredentialsForIdentity(t)})},clearCachedId:function(){this._identityId=null,delete this.params.IdentityId;var t=this.params.IdentityPoolId,e=this.params.LoginId||"";delete this.storage[this.localStorageKey.id+t+e],delete this.storage[this.localStorageKey.providers+t+e]},clearIdOnNotAuthorized:function(t){"NotAuthorizedException"==t.code&&this.clearCachedId()},getId:function(t){var e=this;if("string"==typeof e.params.IdentityId)return t(null,e.params.IdentityId);e.cognito.getId(function(i,n){!i&&n.IdentityId?(e.params.IdentityId=n.IdentityId,t(null,n.IdentityId)):t(i)})},loadCredentials:function(t,e){t&&e&&(e.expired=!1,e.accessKeyId=t.Credentials.AccessKeyId,e.secretAccessKey=t.Credentials.SecretKey,e.sessionToken=t.Credentials.SessionToken,e.expireTime=t.Credentials.Expiration)},getCredentialsForIdentity:function(t){var e=this;e.cognito.getCredentialsForIdentity(function(i,n){i?e.clearIdOnNotAuthorized(i):(e.cacheId(n),e.data=n,e.loadCredentials(e.data,e)),t(i)})},getCredentialsFromSTS:function(t){var e=this;e.cognito.getOpenIdToken(function(i,n){i?(e.clearIdOnNotAuthorized(i),t(i)):(e.cacheId(n),e.params.WebIdentityToken=n.Token,e.webIdentityCredentials.refresh(function(i){i||(e.data=e.webIdentityCredentials.data,e.sts.credentialsFrom(e.data,e)),t(i)}))})},loadCachedId:function(){if(t.util.isBrowser()&&!this.params.IdentityId){var e=this.getStorage("id");if(e&&this.params.Logins){var i=Object.keys(this.params.Logins);0!==(this.getStorage("providers")||"").split(",").filter(function(t){return-1!==i.indexOf(t)}).length&&(this.params.IdentityId=e)}else e&&(this.params.IdentityId=e)}},createClients:function(){var n=this._clientConfig;if(this.webIdentityCredentials=this.webIdentityCredentials||new t.WebIdentityCredentials(this.params,n),!this.cognito){var s=t.util.merge({},n);s.params=this.params,this.cognito=new e(s)}this.sts=this.sts||new i(n)},cacheId:function(e){this._identityId=e.IdentityId,this.params.IdentityId=this._identityId,t.util.isBrowser()&&(this.setStorage("id",e.IdentityId),this.params.Logins&&this.setStorage("providers",Object.keys(this.params.Logins).join(",")))},getStorage:function(t){return this.storage[this.localStorageKey[t]+this.params.IdentityPoolId+(this.params.LoginId||"")]},setStorage:function(t,e){try{this.storage[this.localStorageKey[t]+this.params.IdentityPoolId+(this.params.LoginId||"")]=e}catch(i){}},storage:function(){try{var e=t.util.isBrowser()&&null!==window.localStorage&&"object"==typeof window.localStorage?window.localStorage:{};return e["aws.test-storage"]="foobar",delete e["aws.test-storage"],e}catch(i){return{}}}()});
},{"../core":"hd5g","../../clients/cognitoidentity":"mMAb","../../clients/sts":"L5d6"}],"GMBR":[function(require,module,exports) {
var e=require("../core"),i=require("../../clients/sts");e.SAMLCredentials=e.util.inherit(e.Credentials,{constructor:function(i){e.Credentials.call(this),this.expired=!0,this.params=i},refresh:function(i){this.coalesceRefresh(i||e.util.fn.callback)},load:function(e){var i=this;i.createClients(),i.service.assumeRoleWithSAML(function(s,t){s||i.service.credentialsFrom(t,i),e(s)})},createClients:function(){this.service=this.service||new i({params:this.params})}});
},{"../core":"hd5g","../../clients/sts":"L5d6"}],"BdFS":[function(require,module,exports) {
var e=require("../util"),r=require("../model/shape");function t(){}function n(e,r){for(var t=e.getElementsByTagName(r),n=0,a=t.length;n<a;n++)if(t[n].parentNode===e)return t[n]}function a(e,r){switch(r||(r={}),r.type){case"structure":return o(e,r);case"map":return l(e,r);case"list":return i(e,r);case void 0:case null:return u(e);default:return m(e,r)}}function o(r,t){var o={};return null===r?o:(e.each(t.members,function(e,l){if(l.isXmlAttribute){if(Object.prototype.hasOwnProperty.call(r.attributes,l.name)){var i=r.attributes[l.name].value;o[e]=a({textContent:i},l)}}else{var m=l.flattened?r:n(r,l.name);m?o[e]=a(m,l):l.flattened||"list"!==l.type||t.api.xmlNoDefaultLists||(o[e]=l.defaultValue)}}),o)}function l(e,r){for(var t={},o=r.key.name||"key",l=r.value.name||"value",i=r.flattened?r.name:"entry",m=e.firstElementChild;m;){if(m.nodeName===i){var u=n(m,o).textContent,s=n(m,l);t[u]=a(s,r.value)}m=m.nextElementSibling}return t}function i(e,r){for(var t=[],n=r.flattened?r.name:r.member.name||"member",o=e.firstElementChild;o;)o.nodeName===n&&t.push(a(o,r.member)),o=o.nextElementSibling;return t}function m(e,t){if(e.getAttribute){var n=e.getAttribute("encoding");"base64"===n&&(t=new r.create({type:n}))}var a=e.textContent;return""===a&&(a=null),"function"==typeof t.toType?t.toType(a):a}function u(e){if(null==e)return"";if(!e.firstElementChild)return null===e.parentNode.parentNode?{}:0===e.childNodes.length?"":e.textContent;for(var r={type:"structure",members:{}},t=e.firstElementChild;t;){var n=t.nodeName;Object.prototype.hasOwnProperty.call(r.members,n)?r.members[n].type="list":r.members[n]={name:n},t=t.nextElementSibling}return o(e,r)}t.prototype.parse=function(r,t){if(""===r.replace(/^\s+/,""))return{};var o,l;try{if(window.DOMParser){try{o=(new DOMParser).parseFromString(r,"text/xml")}catch(d){throw e.error(new Error("Parse error in document"),{originalError:d,code:"XMLParserError",retryable:!0})}if(null===o.documentElement)throw e.error(new Error("Cannot parse empty document."),{code:"XMLParserError",retryable:!0});var i=o.getElementsByTagName("parsererror")[0];if(i&&(i.parentNode===o||"body"===i.parentNode.nodeName||i.parentNode.parentNode===o||"body"===i.parentNode.parentNode.nodeName)){var m=i.getElementsByTagName("div")[0]||i;throw e.error(new Error(m.textContent||"Parser error in document"),{code:"XMLParserError",retryable:!0})}}else{if(!window.ActiveXObject)throw new Error("Cannot load XML parser");if((o=new window.ActiveXObject("Microsoft.XMLDOM")).async=!1,!o.loadXML(r))throw e.error(new Error("Parse error in document"),{code:"XMLParserError",retryable:!0})}}catch(c){l=c}if(o&&o.documentElement&&!l){var u=a(o.documentElement,t),s=n(o.documentElement,"ResponseMetadata");return s&&(u.ResponseMetadata=a(s,{})),u}if(l)throw e.error(l||new Error,{code:"XMLParserError",retryable:!0});return{}},module.exports=t;
},{"../util":"Srp3","../model/shape":"EeVB"}],"xVez":[function(require,module,exports) {
var e=require("../core"),t=require("events").EventEmitter;require("../http"),e.XHRClient=e.util.inherit({handleRequest:function(r,n,s,o){var i=this,a=r.endpoint,u=new t,d=a.protocol+"//"+a.hostname;80!==a.port&&443!==a.port&&(d+=":"+a.port),d+=r.path;var h=new XMLHttpRequest,p=!1;r.stream=h,h.addEventListener("readystatechange",function(){try{if(0===h.status)return}catch(e){return}this.readyState>=this.HEADERS_RECEIVED&&!p&&(u.statusCode=h.status,u.headers=i.parseHeaders(h.getAllResponseHeaders()),u.emit("headers",u.statusCode,u.headers,h.statusText),p=!0),this.readyState===this.DONE&&i.finishRequest(h,u)},!1),h.upload.addEventListener("progress",function(e){u.emit("sendProgress",e)}),h.addEventListener("progress",function(e){u.emit("receiveProgress",e)},!1),h.addEventListener("timeout",function(){o(e.util.error(new Error("Timeout"),{code:"TimeoutError"}))},!1),h.addEventListener("error",function(){o(e.util.error(new Error("Network Failure"),{code:"NetworkingError"}))},!1),h.addEventListener("abort",function(){o(e.util.error(new Error("Request aborted"),{code:"RequestAbortedError"}))},!1),s(u),h.open(r.method,d,!1!==n.xhrAsync),e.util.each(r.headers,function(e,t){"Content-Length"!==e&&"User-Agent"!==e&&"Host"!==e&&h.setRequestHeader(e,t)}),n.timeout&&!1!==n.xhrAsync&&(h.timeout=n.timeout),n.xhrWithCredentials&&(h.withCredentials=!0);try{h.responseType="arraybuffer"}catch(c){}try{r.body?h.send(r.body):h.send()}catch(f){if(!r.body||"object"!=typeof r.body.buffer)throw f;h.send(r.body.buffer)}return u},parseHeaders:function(t){var r={};return e.util.arrayEach(t.split(/\r?\n/),function(e){var t=e.split(":",1)[0],n=e.substring(t.length+2);t.length>0&&(r[t.toLowerCase()]=n)}),r},finishRequest:function(t,r){var n;if("arraybuffer"===t.responseType&&t.response){var s=t.response;n=new e.util.Buffer(s.byteLength);for(var o=new Uint8Array(s),i=0;i<n.length;++i)n[i]=o[i]}try{n||"string"!=typeof t.responseText||(n=new e.util.Buffer(t.responseText))}catch(a){}n&&r.emit("data",n),r.emit("end")}}),e.HttpClient.prototype=e.XHRClient.prototype,e.HttpClient.streamsApiVersion=1;
},{"../core":"hd5g","events":"K1mi","../http":"yHCU"}],"E3wu":[function(require,module,exports) {
var process = require("process");
var e=require("process"),r=require("./util");r.crypto.lib=require("./browserCryptoLib"),r.Buffer=require("buffer/").Buffer,r.url=require("url/"),r.querystring=require("querystring/"),r.realClock=require("./realclock/browserClock"),r.environment="js",r.createEventStream=require("./event-stream/buffered-create-event-stream").createEventStream,r.isBrowser=function(){return!0},r.isNode=function(){return!1};var i=require("./core");if(module.exports=i,require("./credentials"),require("./credentials/credential_provider_chain"),require("./credentials/temporary_credentials"),require("./credentials/chainable_temporary_credentials"),require("./credentials/web_identity_credentials"),require("./credentials/cognito_identity_credentials"),require("./credentials/saml_credentials"),i.XML.Parser=require("./xml/browser_parser"),require("./http/xhr"),void 0===e)e={browser:!0};
},{"./util":"Srp3","./browserCryptoLib":"jxQV","buffer/":"aMB2","url/":"j37I","querystring/":"CMHq","./realclock/browserClock":"U90Q","./event-stream/buffered-create-event-stream":"ci79","./core":"hd5g","./credentials":"Dp8z","./credentials/credential_provider_chain":"Q0mg","./credentials/temporary_credentials":"lTk7","./credentials/chainable_temporary_credentials":"PtXh","./credentials/web_identity_credentials":"kLPL","./credentials/cognito_identity_credentials":"JKPn","./credentials/saml_credentials":"GMBR","./xml/browser_parser":"BdFS","./http/xhr":"xVez","process":"g5IB"}],"pg2X":[function(require,module,exports) {
module.exports={version:"2.0",metadata:{apiVersion:"2017-09-30",endpointPrefix:"kinesisvideo",protocol:"rest-json",serviceAbbreviation:"Kinesis Video",serviceFullName:"Amazon Kinesis Video Streams",serviceId:"Kinesis Video",signatureVersion:"v4",uid:"kinesisvideo-2017-09-30"},operations:{CreateSignalingChannel:{http:{requestUri:"/createSignalingChannel"},input:{type:"structure",required:["ChannelName"],members:{ChannelName:{},ChannelType:{},SingleMasterConfiguration:{shape:"S4"},Tags:{type:"list",member:{shape:"S7"}}}},output:{type:"structure",members:{ChannelARN:{}}}},CreateStream:{http:{requestUri:"/createStream"},input:{type:"structure",required:["StreamName"],members:{DeviceName:{},StreamName:{},MediaType:{},KmsKeyId:{},DataRetentionInHours:{type:"integer"},Tags:{shape:"Si"}}},output:{type:"structure",members:{StreamARN:{}}}},DeleteSignalingChannel:{http:{requestUri:"/deleteSignalingChannel"},input:{type:"structure",required:["ChannelARN"],members:{ChannelARN:{},CurrentVersion:{}}},output:{type:"structure",members:{}}},DeleteStream:{http:{requestUri:"/deleteStream"},input:{type:"structure",required:["StreamARN"],members:{StreamARN:{},CurrentVersion:{}}},output:{type:"structure",members:{}}},DescribeSignalingChannel:{http:{requestUri:"/describeSignalingChannel"},input:{type:"structure",members:{ChannelName:{},ChannelARN:{}}},output:{type:"structure",members:{ChannelInfo:{shape:"Sr"}}}},DescribeStream:{http:{requestUri:"/describeStream"},input:{type:"structure",members:{StreamName:{},StreamARN:{}}},output:{type:"structure",members:{StreamInfo:{shape:"Sw"}}}},GetDataEndpoint:{http:{requestUri:"/getDataEndpoint"},input:{type:"structure",required:["APIName"],members:{StreamName:{},StreamARN:{},APIName:{}}},output:{type:"structure",members:{DataEndpoint:{}}}},GetSignalingChannelEndpoint:{http:{requestUri:"/getSignalingChannelEndpoint"},input:{type:"structure",required:["ChannelARN"],members:{ChannelARN:{},SingleMasterChannelEndpointConfiguration:{type:"structure",members:{Protocols:{type:"list",member:{}},Role:{}}}}},output:{type:"structure",members:{ResourceEndpointList:{type:"list",member:{type:"structure",members:{Protocol:{},ResourceEndpoint:{}}}}}}},ListSignalingChannels:{http:{requestUri:"/listSignalingChannels"},input:{type:"structure",members:{MaxResults:{type:"integer"},NextToken:{},ChannelNameCondition:{type:"structure",members:{ComparisonOperator:{},ComparisonValue:{}}}}},output:{type:"structure",members:{ChannelInfoList:{type:"list",member:{shape:"Sr"}},NextToken:{}}}},ListStreams:{http:{requestUri:"/listStreams"},input:{type:"structure",members:{MaxResults:{type:"integer"},NextToken:{},StreamNameCondition:{type:"structure",members:{ComparisonOperator:{},ComparisonValue:{}}}}},output:{type:"structure",members:{StreamInfoList:{type:"list",member:{shape:"Sw"}},NextToken:{}}}},ListTagsForResource:{http:{requestUri:"/ListTagsForResource"},input:{type:"structure",required:["ResourceARN"],members:{NextToken:{},ResourceARN:{}}},output:{type:"structure",members:{NextToken:{},Tags:{shape:"Si"}}}},ListTagsForStream:{http:{requestUri:"/listTagsForStream"},input:{type:"structure",members:{NextToken:{},StreamARN:{},StreamName:{}}},output:{type:"structure",members:{NextToken:{},Tags:{shape:"Si"}}}},TagResource:{http:{requestUri:"/TagResource"},input:{type:"structure",required:["ResourceARN","Tags"],members:{ResourceARN:{},Tags:{type:"list",member:{shape:"S7"}}}},output:{type:"structure",members:{}}},TagStream:{http:{requestUri:"/tagStream"},input:{type:"structure",required:["Tags"],members:{StreamARN:{},StreamName:{},Tags:{shape:"Si"}}},output:{type:"structure",members:{}}},UntagResource:{http:{requestUri:"/UntagResource"},input:{type:"structure",required:["ResourceARN","TagKeyList"],members:{ResourceARN:{},TagKeyList:{shape:"S1v"}}},output:{type:"structure",members:{}}},UntagStream:{http:{requestUri:"/untagStream"},input:{type:"structure",required:["TagKeyList"],members:{StreamARN:{},StreamName:{},TagKeyList:{shape:"S1v"}}},output:{type:"structure",members:{}}},UpdateDataRetention:{http:{requestUri:"/updateDataRetention"},input:{type:"structure",required:["CurrentVersion","Operation","DataRetentionChangeInHours"],members:{StreamName:{},StreamARN:{},CurrentVersion:{},Operation:{},DataRetentionChangeInHours:{type:"integer"}}},output:{type:"structure",members:{}}},UpdateSignalingChannel:{http:{requestUri:"/updateSignalingChannel"},input:{type:"structure",required:["ChannelARN","CurrentVersion"],members:{ChannelARN:{},CurrentVersion:{},SingleMasterConfiguration:{shape:"S4"}}},output:{type:"structure",members:{}}},UpdateStream:{http:{requestUri:"/updateStream"},input:{type:"structure",required:["CurrentVersion"],members:{StreamName:{},StreamARN:{},CurrentVersion:{},DeviceName:{},MediaType:{}}},output:{type:"structure",members:{}}}},shapes:{S4:{type:"structure",members:{MessageTtlSeconds:{type:"integer"}}},S7:{type:"structure",required:["Key","Value"],members:{Key:{},Value:{}}},Si:{type:"map",key:{},value:{}},Sr:{type:"structure",members:{ChannelName:{},ChannelARN:{},ChannelType:{},ChannelStatus:{},CreationTime:{type:"timestamp"},SingleMasterConfiguration:{shape:"S4"},Version:{}}},Sw:{type:"structure",members:{DeviceName:{},StreamName:{},StreamARN:{},MediaType:{},KmsKeyId:{},Version:{},Status:{},CreationTime:{type:"timestamp"},DataRetentionInHours:{type:"integer"}}},S1v:{type:"list",member:{}}}};
},{}],"ZkUS":[function(require,module,exports) {
module.exports={pagination:{ListSignalingChannels:{input_token:"NextToken",limit_key:"MaxResults",output_token:"NextToken",result_key:"ChannelInfoList"},ListStreams:{input_token:"NextToken",limit_key:"MaxResults",output_token:"NextToken",result_key:"StreamInfoList"}}};
},{}],"JTKG":[function(require,module,exports) {
require("../lib/node_loader");var e=require("../lib/core"),i=e.Service,r=e.apiLoader;r.services.kinesisvideo={},e.KinesisVideo=i.defineService("kinesisvideo",["2017-09-30"]),Object.defineProperty(r.services.kinesisvideo,"2017-09-30",{get:function(){var e=require("../apis/kinesisvideo-2017-09-30.min.json");return e.paginators=require("../apis/kinesisvideo-2017-09-30.paginators.json").pagination,e},enumerable:!0,configurable:!0}),module.exports=e.KinesisVideo;
},{"../lib/node_loader":"E3wu","../lib/core":"hd5g","../apis/kinesisvideo-2017-09-30.min.json":"pg2X","../apis/kinesisvideo-2017-09-30.paginators.json":"ZkUS"}],"Uair":[function(require,module,exports) {
module.exports={version:"2.0",metadata:{apiVersion:"2019-12-04",endpointPrefix:"kinesisvideo",protocol:"rest-json",serviceAbbreviation:"Amazon Kinesis Video Signaling Channels",serviceFullName:"Amazon Kinesis Video Signaling Channels",serviceId:"Kinesis Video Signaling",signatureVersion:"v4",uid:"kinesis-video-signaling-2019-12-04"},operations:{GetIceServerConfig:{http:{requestUri:"/v1/get-ice-server-config"},input:{type:"structure",required:["ChannelARN"],members:{ChannelARN:{},ClientId:{},Service:{},Username:{}}},output:{type:"structure",members:{IceServerList:{type:"list",member:{type:"structure",members:{Uris:{type:"list",member:{}},Username:{},Password:{},Ttl:{type:"integer"}}}}}}},SendAlexaOfferToMaster:{http:{requestUri:"/v1/send-alexa-offer-to-master"},input:{type:"structure",required:["ChannelARN","SenderClientId","MessagePayload"],members:{ChannelARN:{},SenderClientId:{},MessagePayload:{}}},output:{type:"structure",members:{Answer:{}}}}},shapes:{}};
},{}],"Uapf":[function(require,module,exports) {
require("../lib/node_loader");var i=require("../lib/core"),e=i.Service,n=i.apiLoader;n.services.kinesisvideosignalingchannels={},i.KinesisVideoSignalingChannels=e.defineService("kinesisvideosignalingchannels",["2019-12-04"]),Object.defineProperty(n.services.kinesisvideosignalingchannels,"2019-12-04",{get:function(){var i=require("../apis/kinesis-video-signaling-2019-12-04.min.json");return i.paginators=require("../apis/kinesis-video-signaling-2019-12-04.paginators.json").pagination,i},enumerable:!0,configurable:!0}),module.exports=i.KinesisVideoSignalingChannels;
},{"../lib/node_loader":"E3wu","../lib/core":"hd5g","../apis/kinesis-video-signaling-2019-12-04.min.json":"Uair","../apis/kinesis-video-signaling-2019-12-04.paginators.json":"iqUf"}],"z9pA":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),function(e){e.MASTER="MASTER",e.VIEWER="VIEWER"}(e=exports.Role||(exports.Role={}));
},{}],"CvJj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.__extends=e,exports.__rest=n,exports.__decorate=o,exports.__param=a,exports.__metadata=i,exports.__awaiter=u,exports.__generator=c,exports.__createBinding=f,exports.__exportStar=l,exports.__values=s,exports.__read=p,exports.__spread=y,exports.__spreadArrays=_,exports.__await=h,exports.__asyncGenerator=v,exports.__asyncDelegator=d,exports.__asyncValues=b,exports.__makeTemplateObject=w,exports.__importStar=x,exports.__importDefault=m,exports.__classPrivateFieldGet=O,exports.__classPrivateFieldSet=g,exports.__assign=void 0;var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};function e(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}var r=function(){return exports.__assign=r=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};function n(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r}function o(t,e,r,n){var o,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var u=t.length-1;u>=0;u--)(o=t[u])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i}function a(t,e){return function(r,n){e(r,n,t)}}function i(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function u(t,e,r,n){return new(r||(r=Promise))(function(o,a){function i(t){try{c(n.next(t))}catch(e){a(e)}}function u(t){try{c(n.throw(t))}catch(e){a(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(i,u)}c((n=n.apply(t,e||[])).next())})}function c(t,e){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(u){a=[6,u],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}function f(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}function l(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||(e[r]=t[r])}function s(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,a=r.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i}function y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}function _(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<r;e++)for(var a=arguments[e],i=0,u=a.length;i<u;i++,o++)n[o]=a[i];return n}function h(t){return this instanceof h?(this.v=t,this):new h(t)}function v(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(t,e||[]),a=[];return n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n;function i(t){o[t]&&(n[t]=function(e){return new Promise(function(r,n){a.push([t,e,r,n])>1||u(t,e)})})}function u(t,e){try{(r=o[t](e)).value instanceof h?Promise.resolve(r.value.v).then(c,f):l(a[0][2],r)}catch(n){l(a[0][3],n)}var r}function c(t){u("next",t)}function f(t){u("throw",t)}function l(t,e){t(e),a.shift(),a.length&&u(a[0][0],a[0][1])}}function d(t){var e,r;return e={},n("next"),n("throw",function(t){throw t}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(n,o){e[n]=t[n]?function(e){return(r=!r)?{value:h(t[n](e)),done:"return"===n}:o?o(e):e}:o}}function b(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"==typeof s?s(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise(function(n,o){(function(t,e,r,n){Promise.resolve(n).then(function(e){t({value:e,done:r})},e)})(n,o,(e=t[r](e)).done,e.value)})}}}function w(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function x(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function m(t){return t&&t.__esModule?t:{default:t}}function O(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function g(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}exports.__assign=r;
},{}],"Di66":[function(require,module,exports) {
var define;
var global = arguments[3];
var e,t=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,function(t,r){"function"==typeof e&&e.amd?e([],function(){return r(t)}):"object"==typeof module&&module.exports?module.exports=r(t):r(t)}("undefined"!=typeof self?self:void 0,function(e){"use strict";if("function"!=typeof Promise)throw"Promise support required";var t=e.crypto||e.msCrypto;if(t){var r=t.subtle||t.webkitSubtle;if(r){var n=e.Crypto||t.constructor||Object,a=e.SubtleCrypto||r.constructor||Object,o=(e.CryptoKey||e.Key||Object,e.navigator.userAgent.indexOf("Edge/")>-1),i=!!e.msCrypto&&!o,u=!t.subtle&&!!t.webkitSubtle;if(i||u){var s={KoZIhvcNAQEB:"1.2.840.113549.1.1.1"},p={"1.2.840.113549.1.1.1":"KoZIhvcNAQEB"};if(["generateKey","importKey","unwrapKey"].forEach(function(e){var n=r[e];r[e]=function(a,o,s){var p,c,w,k,K,E=[].slice.call(arguments);switch(e){case"generateKey":p=g(a),c=o,w=s;break;case"importKey":p=g(s),c=E[3],w=E[4],"jwk"===a&&((o=m(o)).alg||(o.alg=A(p)),o.key_ops||(o.key_ops="oct"!==o.kty?"d"in o?w.filter(v):w.filter(S):w.slice()),E[1]=(k=m(o),i&&(k.extractable=k.ext,delete k.ext),f(unescape(encodeURIComponent(JSON.stringify(k)))).buffer));break;case"unwrapKey":p=E[4],c=E[5],w=E[6],E[2]=s._key}if("generateKey"===e&&"HMAC"===p.name&&p.hash)return p.length=p.length||{"SHA-1":512,"SHA-256":512,"SHA-384":1024,"SHA-512":1024}[p.hash.name],r.importKey("raw",t.getRandomValues(new Uint8Array(p.length+7>>3)),p,c,w);if(u&&"generateKey"===e&&"RSASSA-PKCS1-v1_5"===p.name&&(!p.modulusLength||p.modulusLength>=2048))return(a=g(a)).name="RSAES-PKCS1-v1_5",delete a.hash,r.generateKey(a,!0,["encrypt","decrypt"]).then(function(e){return Promise.all([r.exportKey("jwk",e.publicKey),r.exportKey("jwk",e.privateKey)])}).then(function(e){return e[0].alg=e[1].alg=A(p),e[0].key_ops=w.filter(S),e[1].key_ops=w.filter(v),Promise.all([r.importKey("jwk",e[0],p,!0,e[0].key_ops),r.importKey("jwk",e[1],p,c,e[1].key_ops)])}).then(function(e){return{publicKey:e[0],privateKey:e[1]}});if((u||i&&"SHA-1"===(p.hash||{}).name)&&"importKey"===e&&"jwk"===a&&"HMAC"===p.name&&"oct"===o.kty)return r.importKey("raw",f(y(o.k)),s,E[3],E[4]);if(u&&"importKey"===e&&("spki"===a||"pkcs8"===a))return r.importKey("jwk",function(e){var t=b(e),r=!1;t.length>2&&(r=!0,t.shift());var n={ext:!0};switch(t[0][0]){case"1.2.840.113549.1.1.1":var a=["n","e","d","p","q","dp","dq","qi"],o=b(t[1]);r&&o.shift();for(var i=0;i<o.length;i++)o[i][0]||(o[i]=o[i].subarray(1)),n[a[i]]=l(h(o[i]));n.kty="RSA";break;default:throw new TypeError("Unsupported key type")}return n}(o),s,E[3],E[4]);if(i&&"unwrapKey"===e)return r.decrypt(E[3],s,o).then(function(e){return r.importKey(a,e,E[4],E[5],E[6])});try{K=n.apply(r,E)}catch(C){return Promise.reject(C)}return i&&(K=new Promise(function(e,t){K.onabort=K.onerror=function(e){t(e)},K.oncomplete=function(t){e(t.target.result)}})),K=K.then(function(e){return"HMAC"===p.name&&(p.length||(p.length=8*e.algorithm.length)),0==p.name.search("RSA")&&(p.modulusLength||(p.modulusLength=(e.publicKey||e).algorithm.modulusLength),p.publicExponent||(p.publicExponent=(e.publicKey||e).algorithm.publicExponent)),e=e.publicKey&&e.privateKey?{publicKey:new d(e.publicKey,p,c,w.filter(S)),privateKey:new d(e.privateKey,p,c,w.filter(v))}:new d(e,p,c,w)})}}),["exportKey","wrapKey"].forEach(function(e){var t=r[e];r[e]=function(n,a,o){var s,p=[].slice.call(arguments);switch(e){case"exportKey":p[1]=a._key;break;case"wrapKey":p[1]=a._key,p[2]=o._key}if((u||i&&"SHA-1"===(a.algorithm.hash||{}).name)&&"exportKey"===e&&"jwk"===n&&"HMAC"===a.algorithm.name&&(p[0]="raw"),!u||"exportKey"!==e||"spki"!==n&&"pkcs8"!==n||(p[0]="jwk"),i&&"wrapKey"===e)return r.exportKey(n,a).then(function(e){return"jwk"===n&&(e=f(unescape(encodeURIComponent(JSON.stringify(m(e)))))),r.encrypt(p[3],o,e)});try{s=t.apply(r,p)}catch(c){return Promise.reject(c)}return i&&(s=new Promise(function(e,t){s.onabort=s.onerror=function(e){t(e)},s.oncomplete=function(t){e(t.target.result)}})),"exportKey"===e&&"jwk"===n&&(s=s.then(function(e){return(u||i&&"SHA-1"===(a.algorithm.hash||{}).name)&&"HMAC"===a.algorithm.name?{kty:"oct",alg:A(a.algorithm),key_ops:a.usages.slice(),ext:!0,k:l(h(e))}:((e=m(e)).alg||(e.alg=A(a.algorithm)),e.key_ops||(e.key_ops="public"===a.type?a.usages.filter(S):"private"===a.type?a.usages.filter(v):a.usages.slice()),e)})),!u||"exportKey"!==e||"spki"!==n&&"pkcs8"!==n||(s=s.then(function(e){return e=function(e){var t,r=[["",null]],n=!1;switch(e.kty){case"RSA":for(var a=["n","e","d","p","q","dp","dq","qi"],o=[],i=0;i<a.length&&a[i]in e;i++){var u=o[i]=f(y(e[a[i]]));128&u[0]&&(o[i]=new Uint8Array(u.length+1),o[i].set(u,1))}o.length>2&&(n=!0,o.unshift(new Uint8Array([0]))),r[0][0]="1.2.840.113549.1.1.1",t=o;break;default:throw new TypeError("Unsupported key type")}return r.push(new Uint8Array(w(t)).buffer),n?r.unshift(new Uint8Array([0])):r[1]={tag:3,value:r[1]},new Uint8Array(w(r)).buffer}(m(e))})),s}}),["encrypt","decrypt","sign","verify"].forEach(function(e){var t=r[e];r[e]=function(n,a,o,u){if(i&&(!o.byteLength||u&&!u.byteLength))throw new Error("Empy input is not allowed");var s,p=[].slice.call(arguments),c=g(n);if(i&&"decrypt"===e&&"AES-GCM"===c.name){var l=n.tagLength>>3;p[2]=(o.buffer||o).slice(0,o.byteLength-l),n.tag=(o.buffer||o).slice(o.byteLength-l)}p[1]=a._key;try{s=t.apply(r,p)}catch(y){return Promise.reject(y)}return i&&(s=new Promise(function(t,r){s.onabort=s.onerror=function(e){r(e)},s.oncomplete=function(r){r=r.target.result;if("encrypt"===e&&r instanceof AesGcmEncryptResult){var n=r.ciphertext,a=r.tag;(r=new Uint8Array(n.byteLength+a.byteLength)).set(new Uint8Array(n),0),r.set(new Uint8Array(a),n.byteLength),r=r.buffer}t(r)}})),s}}),i){var c=r.digest;r.digest=function(e,t){if(!t.byteLength)throw new Error("Empy input is not allowed");var n;try{n=c.call(r,e,t)}catch(a){return Promise.reject(a)}return n=new Promise(function(e,t){n.onabort=n.onerror=function(e){t(e)},n.oncomplete=function(t){e(t.target.result)}})},e.crypto=Object.create(t,{getRandomValues:{value:function(e){return t.getRandomValues(e)}},subtle:{value:r}}),e.CryptoKey=d}u&&(t.subtle=r,e.Crypto=n,e.SubtleCrypto=a,e.CryptoKey=d)}}}function l(e){return btoa(e).replace(/\=+$/,"").replace(/\+/g,"-").replace(/\//g,"_")}function y(e){return e=(e+="===").slice(0,-e.length%4),atob(e.replace(/-/g,"+").replace(/_/g,"/"))}function f(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function h(e){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),String.fromCharCode.apply(String,e)}function g(e){var t={name:(e.name||e||"").toUpperCase().replace("V","v")};switch(t.name){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;case"AES-CBC":case"AES-GCM":case"AES-KW":e.length&&(t.length=e.length);break;case"HMAC":e.hash&&(t.hash=g(e.hash)),e.length&&(t.length=e.length);break;case"RSAES-PKCS1-v1_5":e.publicExponent&&(t.publicExponent=new Uint8Array(e.publicExponent)),e.modulusLength&&(t.modulusLength=e.modulusLength);break;case"RSASSA-PKCS1-v1_5":case"RSA-OAEP":e.hash&&(t.hash=g(e.hash)),e.publicExponent&&(t.publicExponent=new Uint8Array(e.publicExponent)),e.modulusLength&&(t.modulusLength=e.modulusLength);break;default:throw new SyntaxError("Bad algorithm name")}return t}function A(e){return{HMAC:{"SHA-1":"HS1","SHA-256":"HS256","SHA-384":"HS384","SHA-512":"HS512"},"RSASSA-PKCS1-v1_5":{"SHA-1":"RS1","SHA-256":"RS256","SHA-384":"RS384","SHA-512":"RS512"},"RSAES-PKCS1-v1_5":{"":"RSA1_5"},"RSA-OAEP":{"SHA-1":"RSA-OAEP","SHA-256":"RSA-OAEP-256"},"AES-KW":{128:"A128KW",192:"A192KW",256:"A256KW"},"AES-GCM":{128:"A128GCM",192:"A192GCM",256:"A256GCM"},"AES-CBC":{128:"A128CBC",192:"A192CBC",256:"A256CBC"}}[e.name][(e.hash||{}).name||e.length||""]}function m(e){(e instanceof ArrayBuffer||e instanceof Uint8Array)&&(e=JSON.parse(decodeURIComponent(escape(h(e)))));var t={kty:e.kty,alg:e.alg,ext:e.ext||e.extractable};switch(t.kty){case"oct":t.k=e.k;case"RSA":["n","e","d","p","q","dp","dq","qi","oth"].forEach(function(r){r in e&&(t[r]=e[r])});break;default:throw new TypeError("Unsupported key type")}return t}function b(e,t){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),t||(t={pos:0,end:e.length}),t.end-t.pos<2||t.end>e.length)throw new RangeError("Malformed DER");var r,n=e[t.pos++],a=e[t.pos++];if(a>=128){if(a&=127,t.end-t.pos<a)throw new RangeError("Malformed DER");for(var o=0;a--;)o<<=8,o|=e[t.pos++];a=o}if(t.end-t.pos<a)throw new RangeError("Malformed DER");switch(n){case 2:r=e.subarray(t.pos,t.pos+=a);break;case 3:if(e[t.pos++])throw new Error("Unsupported bit string");a--;case 4:r=new Uint8Array(e.subarray(t.pos,t.pos+=a)).buffer;break;case 5:r=null;break;case 6:var i=btoa(h(e.subarray(t.pos,t.pos+=a)));if(!(i in s))throw new Error("Unsupported OBJECT ID "+i);r=s[i];break;case 48:r=[];for(var u=t.pos+a;t.pos<u;)r.push(b(e,t));break;default:throw new Error("Unsupported DER tag 0x"+n.toString(16))}return r}function w(e,t){t||(t=[]);var r=0,n=0,a=t.length+2;if(t.push(0,0),e instanceof Uint8Array){r=2,n=e.length;for(var o=0;o<n;o++)t.push(e[o])}else if(e instanceof ArrayBuffer){r=4,n=e.byteLength,e=new Uint8Array(e);for(o=0;o<n;o++)t.push(e[o])}else if(null===e)r=5,n=0;else if("string"==typeof e&&e in p){var i=f(atob(p[e]));r=6,n=i.length;for(o=0;o<n;o++)t.push(i[o])}else if(e instanceof Array){for(o=0;o<e.length;o++)w(e[o],t);r=48,n=t.length-a}else{if(!("object"==typeof e&&3===e.tag&&e.value instanceof ArrayBuffer))throw new Error("Unsupported DER value "+e);r=3,n=(e=new Uint8Array(e.value)).byteLength,t.push(0);for(o=0;o<n;o++)t.push(e[o]);n++}if(n>=128){var u=n;n=4;for(t.splice(a,0,u>>24&255,u>>16&255,u>>8&255,255&u);n>1&&!(u>>24);)u<<=8,n--;n<4&&t.splice(a,4-n),n|=128}return t.splice(a-2,2,r,n),t}function d(e,t,r,n){Object.defineProperties(this,{_key:{value:e},type:{value:e.type,enumerable:!0},extractable:{value:void 0===r?e.extractable:r,enumerable:!0},algorithm:{value:void 0===t?e.algorithm:t,enumerable:!0},usages:{value:void 0===n?e.usages:n,enumerable:!0}})}function S(e){return"verify"===e||"encrypt"===e||"wrapKey"===e}function v(e){return"sign"===e||"decrypt"===e||"unwrapKey"===e}});var r={};exports.default=r;
},{}],"hREG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("./webcrypto-shim.mjs");var e=window.crypto;exports.default=e;
},{"./webcrypto-shim.mjs":"Di66"}],"QQIu":[function(require,module,exports) {
"use strict";function e(e,n){if(null===e)throw new Error(n+" cannot be null");if(void 0===e)throw new Error(n+" cannot be undefined");if(""===e)throw new Error(n+" cannot be empty")}function n(e,n){if(null!=e&&""!==e)throw new Error(n+" should be null")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateValueNonNil=e,exports.validateValueNil=n;
},{}],"MJwu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),t=e.__importDefault(require("isomorphic-webcrypto")),r=require("./internal/utils"),n=function(){function n(e,t,r){void 0===r&&(r=n.DEFAULT_SERVICE),this.region=e,this.credentials=t,this.service=r}return n.prototype.getSignedURL=function(t,i,s){return void 0===s&&(s=new Date),e.__awaiter(this,void 0,void 0,function(){var a,c,o,u,h,g,l,d,f,A,m,y,S,p,_,b,v,w,H,E,T,D,U;return e.__generator(this,function(e){switch(e.label){case 0:return"function"!=typeof this.credentials.getPromise?[3,2]:[4,this.credentials.getPromise()];case 1:e.sent(),e.label=2;case 2:if(r.validateValueNonNil(this.credentials.accessKeyId,"credentials.accessKeyId"),r.validateValueNonNil(this.credentials.secretAccessKey,"credentials.secretAccessKey"),a=n.getDateTimeString(s),c=n.getDateString(s),u=(o="wss")+"://",!t.startsWith(u))throw new Error("Endpoint '"+t+"' is not a secure WebSocket endpoint. It should start with '"+u+"'.");if(t.includes("?"))throw new Error("Endpoint '"+t+"' should not contain any query parameters.");return(h=t.indexOf("/",u.length))<0?(g=t.substring(u.length),l="/"):(g=t.substring(u.length,h),l=t.substring(h)),d=["host"].join(";"),f="GET",A=c+"/"+this.region+"/"+this.service+"/aws4_request",m=Object.assign({},i,{"X-Amz-Algorithm":n.DEFAULT_ALGORITHM,"X-Amz-Credential":this.credentials.accessKeyId+"/"+A,"X-Amz-Date":a,"X-Amz-Expires":"299","X-Amz-SignedHeaders":d}),this.credentials.sessionToken&&Object.assign(m,{"X-Amz-Security-Token":this.credentials.sessionToken}),y=n.createQueryString(m),S={host:g},p=n.createHeadersString(S),[4,n.sha256("")];case 3:return _=e.sent(),b=[f,l,y,p,d,_].join("\n"),[4,n.sha256(b)];case 4:return v=e.sent(),w=[n.DEFAULT_ALGORITHM,a,A,v].join("\n"),[4,this.getSignatureKey(c)];case 5:return H=e.sent(),D=(T=n).toHex,[4,n.hmac(H,w)];case 6:return[4,D.apply(T,[e.sent()])];case 7:return E=e.sent(),U=Object.assign({},m,{"X-Amz-Signature":E}),[2,o+"://"+g+l+"?"+n.createQueryString(U)]}})})},n.prototype.getSignatureKey=function(t){return e.__awaiter(this,void 0,void 0,function(){var r,i,s;return e.__generator(this,function(e){switch(e.label){case 0:return[4,n.hmac("AWS4"+this.credentials.secretAccessKey,t)];case 1:return r=e.sent(),[4,n.hmac(r,this.region)];case 2:return i=e.sent(),[4,n.hmac(i,this.service)];case 3:return s=e.sent(),[4,n.hmac(s,"aws4_request")];case 4:return[2,e.sent()]}})})},n.createHeadersString=function(e){return Object.keys(e).map(function(t){return t+":"+e[t]+"\n"}).join()},n.createQueryString=function(e){return Object.keys(e).sort().map(function(t){return t+"="+encodeURIComponent(e[t])}).join("&")},n.getDateTimeString=function(e){return e.toISOString().replace(/\.\d{3}Z$/,"Z").replace(/[:\-]/g,"")},n.getDateString=function(e){return this.getDateTimeString(e).substring(0,8)},n.sha256=function(r){return e.__awaiter(this,void 0,void 0,function(){var n;return e.__generator(this,function(e){switch(e.label){case 0:return[4,t.default.subtle.digest({name:"SHA-256"},this.toUint8Array(r))];case 1:return n=e.sent(),[2,this.toHex(n)]}})})},n.hmac=function(r,n){return e.__awaiter(this,void 0,void 0,function(){var i,s,a;return e.__generator(this,function(e){switch(e.label){case 0:return i="string"==typeof r?this.toUint8Array(r).buffer:r,s=this.toUint8Array(n).buffer,[4,t.default.subtle.importKey("raw",i,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"])];case 1:return a=e.sent(),[4,t.default.subtle.sign({name:"HMAC",hash:{name:"SHA-256"}},a,s)];case 2:return[2,e.sent()]}})})},n.toUint8Array=function(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0,i=e.length;n<i;n++)r[n]=e.charCodeAt(n);return r},n.toHex=function(e){return Array.from(new Uint8Array(e)).map(function(e){return e.toString(16).padStart(2,"0")}).join("")},n.DEFAULT_ALGORITHM="AWS4-HMAC-SHA256",n.DEFAULT_SERVICE="kinesisvideo",n}();exports.SigV4RequestSigner=n;
},{"tslib":"CvJj","isomorphic-webcrypto":"hREG","./internal/utils":"QQIu"}],"mqkU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t){this.clockOffsetMs=t}return t.prototype.getDate=function(){return new Date(Date.now()+this.clockOffsetMs)},t}();exports.default=t;
},{}],"uP7a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t,n=require("tslib"),i=require("events"),s=require("./Role"),o=require("./SigV4RequestSigner"),r=n.__importDefault(require("./internal/DateProvider")),a=require("./internal/utils");!function(e){e.SDP_ANSWER="SDP_ANSWER",e.SDP_OFFER="SDP_OFFER",e.ICE_CANDIDATE="ICE_CANDIDATE"}(e||(e={})),function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(t||(t={}));var d=function(i){function d(e){var d=i.call(this)||this;return d.websocket=null,d.readyState=t.CLOSED,d.pendingIceCandidatesByClientId={},d.hasReceivedRemoteSDPByClientId={},a.validateValueNonNil(e,"SignalingClientConfig"),a.validateValueNonNil(e.role,"role"),e.role===s.Role.VIEWER?a.validateValueNonNil(e.clientId,"clientId"):a.validateValueNil(e.clientId,"clientId"),a.validateValueNonNil(e.channelARN,"channelARN"),a.validateValueNonNil(e.region,"region"),a.validateValueNonNil(e.channelEndpoint,"channelEndpoint"),d.config=n.__assign({},e),e.requestSigner?d.requestSigner=e.requestSigner:(a.validateValueNonNil(e.credentials,"credentials"),d.requestSigner=new o.SigV4RequestSigner(e.region,e.credentials)),d.dateProvider=new r.default(e.systemClockOffset||0),d.onOpen=d.onOpen.bind(d),d.onMessage=d.onMessage.bind(d),d.onError=d.onError.bind(d),d.onClose=d.onClose.bind(d),d}return n.__extends(d,i),d.prototype.open=function(){var e=this;if(this.readyState!==t.CLOSED)throw new Error("Client is already open, opening, or closing");this.readyState=t.CONNECTING,this.asyncOpen().then().catch(function(t){return e.onError(t)})},d.prototype.asyncOpen=function(){return n.__awaiter(this,void 0,void 0,function(){var e,i;return n.__generator(this,function(n){switch(n.label){case 0:return e={"X-Amz-ChannelARN":this.config.channelARN},this.config.role===s.Role.VIEWER&&(e["X-Amz-ClientId"]=this.config.clientId),[4,this.requestSigner.getSignedURL(this.config.channelEndpoint,e,this.dateProvider.getDate())];case 1:return i=n.sent(),this.readyState!==t.CONNECTING?[2]:(this.websocket=new WebSocket(i),this.websocket.addEventListener("open",this.onOpen),this.websocket.addEventListener("message",this.onMessage),this.websocket.addEventListener("error",this.onError),this.websocket.addEventListener("close",this.onClose),[2])}})})},d.prototype.close=function(){null!==this.websocket?(this.readyState=t.CLOSING,this.websocket.close()):this.readyState!==t.CLOSED&&this.onClose()},d.prototype.sendSdpOffer=function(t,n){this.sendMessage(e.SDP_OFFER,t.toJSON(),n)},d.prototype.sendSdpAnswer=function(t,n){this.sendMessage(e.SDP_ANSWER,t.toJSON(),n)},d.prototype.sendIceCandidate=function(t,n){this.sendMessage(e.ICE_CANDIDATE,t.toJSON(),n)},d.prototype.sendMessage=function(e,n,i){if(this.readyState!==t.OPEN)throw new Error("Could not send message because the connection to the signaling service is not open.");this.validateRecipientClientId(i),this.websocket.send(JSON.stringify({action:e,messagePayload:d.serializeJSONObjectAsBase64String(n),recipientClientId:i||void 0}))},d.prototype.cleanupWebSocket=function(){null!==this.websocket&&(this.websocket.removeEventListener("open",this.onOpen),this.websocket.removeEventListener("message",this.onMessage),this.websocket.removeEventListener("error",this.onError),this.websocket.removeEventListener("close",this.onClose),this.websocket=null)},d.prototype.onOpen=function(){this.readyState=t.OPEN,this.emit("open")},d.prototype.onMessage=function(t){var n,i;try{n=JSON.parse(t.data),i=d.parseJSONObjectFromBase64String(n.messagePayload)}catch(r){return}var s=n.messageType,o=n.senderClientId;switch(s){case e.SDP_OFFER:return this.emit("sdpOffer",i,o),void this.emitPendingIceCandidates(o);case e.SDP_ANSWER:return this.emit("sdpAnswer",i,o),void this.emitPendingIceCandidates(o);case e.ICE_CANDIDATE:return void this.emitOrQueueIceCandidate(i,o)}},d.parseJSONObjectFromBase64String=function(e){return JSON.parse(atob(e))},d.serializeJSONObjectAsBase64String=function(e){return btoa(JSON.stringify(e))},d.prototype.emitOrQueueIceCandidate=function(e,t){var n=t||d.DEFAULT_CLIENT_ID;this.hasReceivedRemoteSDPByClientId[n]?this.emit("iceCandidate",e,t):(this.pendingIceCandidatesByClientId[n]||(this.pendingIceCandidatesByClientId[n]=[]),this.pendingIceCandidatesByClientId[n].push(e))},d.prototype.emitPendingIceCandidates=function(e){var t=this,n=e||d.DEFAULT_CLIENT_ID;this.hasReceivedRemoteSDPByClientId[n]=!0;var i=this.pendingIceCandidatesByClientId[n];i&&(delete this.pendingIceCandidatesByClientId[n],i.forEach(function(n){t.emit("iceCandidate",n,e)}))},d.prototype.validateRecipientClientId=function(e){if(this.config.role===s.Role.MASTER&&!e)throw new Error("Missing recipient client id. As the MASTER, all messages must be sent with a recipient client id.");if(this.config.role===s.Role.VIEWER&&e)throw new Error("Unexpected recipient client id. As the VIEWER, messages must not be sent with a recipient client id.")},d.prototype.onError=function(e){this.emit("error",e)},d.prototype.onClose=function(){this.readyState=t.CLOSED,this.cleanupWebSocket(),this.emit("close")},d.DEFAULT_CLIENT_ID="MASTER",d}(i.EventEmitter);exports.SignalingClient=d;
},{"tslib":"CvJj","events":"K1mi","./Role":"z9pA","./SigV4RequestSigner":"MJwu","./internal/DateProvider":"mqkU","./internal/utils":"QQIu"}],"uH65":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./Role");exports.Role=e.Role;var i=require("./SignalingClient");exports.SignalingClient=i.SignalingClient;var r=require("./SigV4RequestSigner");exports.SigV4RequestSigner=r.SigV4RequestSigner,exports.VERSION=void 0;
},{"./Role":"z9pA","./SignalingClient":"uP7a","./SigV4RequestSigner":"MJwu"}],"gKk3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),t=new Uint8Array(16);function o(){if(!e)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(t)}
},{}],"Wq06":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;exports.default=e;
},{}],"p9l8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./regex.js"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t){return"string"==typeof t&&e.default.test(t)}var u=r;exports.default=u;
},{"./regex.js":"Wq06"}],"vDjk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./validate.js"));function r(e){return e&&e.__esModule?e:{default:e}}for(var t=[],i=0;i<256;++i)t.push((i+256).toString(16).substr(1));function o(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=(t[r[i+0]]+t[r[i+1]]+t[r[i+2]]+t[r[i+3]]+"-"+t[r[i+4]]+t[r[i+5]]+"-"+t[r[i+6]]+t[r[i+7]]+"-"+t[r[i+8]]+t[r[i+9]]+"-"+t[r[i+10]]+t[r[i+11]]+t[r[i+12]]+t[r[i+13]]+t[r[i+14]]+t[r[i+15]]).toLowerCase();if(!(0,e.default)(o))throw TypeError("Stringified UUID is invalid");return o}var u=o;exports.default=u;
},{"./validate.js":"p9l8"}],"qgnI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r,s=o(require("./rng.js")),n=o(require("./stringify.js"));function o(e){return e&&e.__esModule?e:{default:e}}var u=0,t=0;function a(o,a,l){var d=a&&l||0,i=a||new Array(16),c=(o=o||{}).node||e,v=void 0!==o.clockseq?o.clockseq:r;if(null==c||null==v){var f=o.random||(o.rng||s.default)();null==c&&(c=e=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==v&&(v=r=16383&(f[6]<<8|f[7]))}var q=void 0!==o.msecs?o.msecs:Date.now(),m=void 0!==o.nsecs?o.nsecs:t+1,p=q-u+(m-t)/1e4;if(p<0&&void 0===o.clockseq&&(v=v+1&16383),(p<0||q>u)&&void 0===o.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=q,t=m,r=v;var w=(1e4*(268435455&(q+=122192928e5))+m)%4294967296;i[d++]=w>>>24&255,i[d++]=w>>>16&255,i[d++]=w>>>8&255,i[d++]=255&w;var _=q/4294967296*1e4&268435455;i[d++]=_>>>8&255,i[d++]=255&_,i[d++]=_>>>24&15|16,i[d++]=_>>>16&255,i[d++]=v>>>8|128,i[d++]=255&v;for(var g=0;g<6;++g)i[d+g]=c[g];return a||(0,n.default)(i)}var l=a;exports.default=l;
},{"./rng.js":"gKk3","./stringify.js":"vDjk"}],"rtKa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./validate.js"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r){if(!(0,e.default)(r))throw TypeError("Invalid UUID");var t,s=new Uint8Array(16);return s[0]=(t=parseInt(r.slice(0,8),16))>>>24,s[1]=t>>>16&255,s[2]=t>>>8&255,s[3]=255&t,s[4]=(t=parseInt(r.slice(9,13),16))>>>8,s[5]=255&t,s[6]=(t=parseInt(r.slice(14,18),16))>>>8,s[7]=255&t,s[8]=(t=parseInt(r.slice(19,23),16))>>>8,s[9]=255&t,s[10]=(t=parseInt(r.slice(24,36),16))/1099511627776&255,s[11]=t/4294967296&255,s[12]=t>>>24&255,s[13]=t>>>16&255,s[14]=t>>>8&255,s[15]=255&t,s}var s=t;exports.default=s;
},{"./validate.js":"p9l8"}],"Y6ie":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s,exports.URL=exports.DNS=void 0;var e=t(require("./stringify.js")),r=t(require("./parse.js"));function t(e){return e&&e.__esModule?e:{default:e}}function n(e){e=unescape(encodeURIComponent(e));for(var r=[],t=0;t<e.length;++t)r.push(e.charCodeAt(t));return r}var a="6ba7b810-9dad-11d1-80b4-00c04fd430c8";exports.DNS=a;var o="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function s(t,s,u){function i(t,a,o,i){if("string"==typeof t&&(t=n(t)),"string"==typeof a&&(a=(0,r.default)(a)),16!==a.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var d=new Uint8Array(16+t.length);if(d.set(a),d.set(t,a.length),(d=u(d))[6]=15&d[6]|s,d[8]=63&d[8]|128,o){i=i||0;for(var f=0;f<16;++f)o[i+f]=d[f];return o}return(0,e.default)(d)}try{i.name=t}catch(d){}return i.DNS=a,i.URL=o,i}exports.URL=o;
},{"./stringify.js":"vDjk","./parse.js":"rtKa"}],"bGV3":[function(require,module,exports) {
"use strict";function n(n){if("string"==typeof n){var t=unescape(encodeURIComponent(n));n=new Uint8Array(t.length);for(var o=0;o<t.length;++o)n[o]=t.charCodeAt(o)}return r(e(u(n),8*n.length))}function r(n){for(var r=[],t=32*n.length,e=0;e<t;e+=8){var u=n[e>>5]>>>e%32&255,o=parseInt("0123456789abcdef".charAt(u>>>4&15)+"0123456789abcdef".charAt(15&u),16);r.push(o)}return r}function t(n){return 14+(n+64>>>9<<4)+1}function e(n,r){n[r>>5]|=128<<r%32,n[t(r)-1]=r;for(var e=1732584193,u=-271733879,f=-1732584194,a=271733878,v=0;v<n.length;v+=16){var s=e,d=u,p=f,g=a;e=c(e,u,f,a,n[v],7,-680876936),a=c(a,e,u,f,n[v+1],12,-389564586),f=c(f,a,e,u,n[v+2],17,606105819),u=c(u,f,a,e,n[v+3],22,-1044525330),e=c(e,u,f,a,n[v+4],7,-176418897),a=c(a,e,u,f,n[v+5],12,1200080426),f=c(f,a,e,u,n[v+6],17,-1473231341),u=c(u,f,a,e,n[v+7],22,-45705983),e=c(e,u,f,a,n[v+8],7,1770035416),a=c(a,e,u,f,n[v+9],12,-1958414417),f=c(f,a,e,u,n[v+10],17,-42063),u=c(u,f,a,e,n[v+11],22,-1990404162),e=c(e,u,f,a,n[v+12],7,1804603682),a=c(a,e,u,f,n[v+13],12,-40341101),f=c(f,a,e,u,n[v+14],17,-1502002290),e=i(e,u=c(u,f,a,e,n[v+15],22,1236535329),f,a,n[v+1],5,-165796510),a=i(a,e,u,f,n[v+6],9,-1069501632),f=i(f,a,e,u,n[v+11],14,643717713),u=i(u,f,a,e,n[v],20,-373897302),e=i(e,u,f,a,n[v+5],5,-701558691),a=i(a,e,u,f,n[v+10],9,38016083),f=i(f,a,e,u,n[v+15],14,-660478335),u=i(u,f,a,e,n[v+4],20,-405537848),e=i(e,u,f,a,n[v+9],5,568446438),a=i(a,e,u,f,n[v+14],9,-1019803690),f=i(f,a,e,u,n[v+3],14,-187363961),u=i(u,f,a,e,n[v+8],20,1163531501),e=i(e,u,f,a,n[v+13],5,-1444681467),a=i(a,e,u,f,n[v+2],9,-51403784),f=i(f,a,e,u,n[v+7],14,1735328473),e=h(e,u=i(u,f,a,e,n[v+12],20,-1926607734),f,a,n[v+5],4,-378558),a=h(a,e,u,f,n[v+8],11,-2022574463),f=h(f,a,e,u,n[v+11],16,1839030562),u=h(u,f,a,e,n[v+14],23,-35309556),e=h(e,u,f,a,n[v+1],4,-1530992060),a=h(a,e,u,f,n[v+4],11,1272893353),f=h(f,a,e,u,n[v+7],16,-155497632),u=h(u,f,a,e,n[v+10],23,-1094730640),e=h(e,u,f,a,n[v+13],4,681279174),a=h(a,e,u,f,n[v],11,-358537222),f=h(f,a,e,u,n[v+3],16,-722521979),u=h(u,f,a,e,n[v+6],23,76029189),e=h(e,u,f,a,n[v+9],4,-640364487),a=h(a,e,u,f,n[v+12],11,-421815835),f=h(f,a,e,u,n[v+15],16,530742520),e=l(e,u=h(u,f,a,e,n[v+2],23,-995338651),f,a,n[v],6,-198630844),a=l(a,e,u,f,n[v+7],10,1126891415),f=l(f,a,e,u,n[v+14],15,-1416354905),u=l(u,f,a,e,n[v+5],21,-57434055),e=l(e,u,f,a,n[v+12],6,1700485571),a=l(a,e,u,f,n[v+3],10,-1894986606),f=l(f,a,e,u,n[v+10],15,-1051523),u=l(u,f,a,e,n[v+1],21,-2054922799),e=l(e,u,f,a,n[v+8],6,1873313359),a=l(a,e,u,f,n[v+15],10,-30611744),f=l(f,a,e,u,n[v+6],15,-1560198380),u=l(u,f,a,e,n[v+13],21,1309151649),e=l(e,u,f,a,n[v+4],6,-145523070),a=l(a,e,u,f,n[v+11],10,-1120210379),f=l(f,a,e,u,n[v+2],15,718787259),u=l(u,f,a,e,n[v+9],21,-343485551),e=o(e,s),u=o(u,d),f=o(f,p),a=o(a,g)}return[e,u,f,a]}function u(n){if(0===n.length)return[];for(var r=8*n.length,e=new Uint32Array(t(r)),u=0;u<r;u+=8)e[u>>5]|=(255&n[u/8])<<u%32;return e}function o(n,r){var t=(65535&n)+(65535&r);return(n>>16)+(r>>16)+(t>>16)<<16|65535&t}function f(n,r){return n<<r|n>>>32-r}function a(n,r,t,e,u,a){return o(f(o(o(r,n),o(e,a)),u),t)}function c(n,r,t,e,u,o,f){return a(r&t|~r&e,n,r,u,o,f)}function i(n,r,t,e,u,o,f){return a(r&e|t&~e,n,r,u,o,f)}function h(n,r,t,e,u,o,f){return a(r^t^e,n,r,u,o,f)}function l(n,r,t,e,u,o,f){return a(t^(r|~e),n,r,u,o,f)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var v=n;exports.default=v;
},{}],"vJdu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./v35.js")),r=t(require("./md5.js"));function t(e){return e&&e.__esModule?e:{default:e}}var u=(0,e.default)("v3",48,r.default),d=u;exports.default=d;
},{"./v35.js":"Y6ie","./md5.js":"bGV3"}],"K7Zs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./rng.js")),r=t(require("./stringify.js"));function t(e){return e&&e.__esModule?e:{default:e}}function u(t,u,n){var a=(t=t||{}).random||(t.rng||e.default)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,u){n=n||0;for(var f=0;f<16;++f)u[n+f]=a[f];return u}return(0,r.default)(a)}var n=u;exports.default=n;
},{"./rng.js":"gKk3","./stringify.js":"vDjk"}],"MvYZ":[function(require,module,exports) {
"use strict";function r(r,e,t,a){switch(r){case 0:return e&t^~e&a;case 1:return e^t^a;case 2:return e&t^e&a^t&a;case 3:return e^t^a}}function e(r,e){return r<<e|r>>>32-e}function t(t){var a=[1518500249,1859775393,2400959708,3395469782],o=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){var n=unescape(encodeURIComponent(t));t=[];for(var s=0;s<n.length;++s)t.push(n.charCodeAt(s))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var f=t.length/4+2,u=Math.ceil(f/16),c=new Array(u),l=0;l<u;++l){for(var i=new Uint32Array(16),v=0;v<16;++v)i[v]=t[64*l+4*v]<<24|t[64*l+4*v+1]<<16|t[64*l+4*v+2]<<8|t[64*l+4*v+3];c[l]=i}c[u-1][14]=8*(t.length-1)/Math.pow(2,32),c[u-1][14]=Math.floor(c[u-1][14]),c[u-1][15]=8*(t.length-1)&4294967295;for(var h=0;h<u;++h){for(var p=new Uint32Array(80),y=0;y<16;++y)p[y]=c[h][y];for(var d=16;d<80;++d)p[d]=e(p[d-3]^p[d-8]^p[d-14]^p[d-16],1);for(var A=o[0],g=o[1],w=o[2],M=o[3],x=o[4],U=0;U<80;++U){var C=Math.floor(U/20),_=e(A,5)+r(C,g,w,M)+x+a[C]+p[U]>>>0;x=M,M=w,w=e(g,30)>>>0,g=A,A=_}o[0]=o[0]+A>>>0,o[1]=o[1]+g>>>0,o[2]=o[2]+w>>>0,o[3]=o[3]+M>>>0,o[4]=o[4]+x>>>0}return[o[0]>>24&255,o[0]>>16&255,o[0]>>8&255,255&o[0],o[1]>>24&255,o[1]>>16&255,o[1]>>8&255,255&o[1],o[2]>>24&255,o[2]>>16&255,o[2]>>8&255,255&o[2],o[3]>>24&255,o[3]>>16&255,o[3]>>8&255,255&o[3],o[4]>>24&255,o[4]>>16&255,o[4]>>8&255,255&o[4]]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=t;exports.default=a;
},{}],"K2oB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./v35.js")),r=t(require("./sha1.js"));function t(e){return e&&e.__esModule?e:{default:e}}var u=(0,e.default)("v5",80,r.default),s=u;exports.default=s;
},{"./v35.js":"Y6ie","./sha1.js":"MvYZ"}],"loGb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="00000000-0000-0000-0000-000000000000";exports.default=e;
},{}],"GRom":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./validate.js"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r){if(!(0,e.default)(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}var u=t;exports.default=u;
},{"./validate.js":"p9l8"}],"UeUD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"v1",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"v4",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"v5",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"NIL",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"version",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"validate",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"stringify",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"parse",{enumerable:!0,get:function(){return s.default}});var e=a(require("./v1.js")),r=a(require("./v3.js")),t=a(require("./v4.js")),n=a(require("./v5.js")),u=a(require("./nil.js")),i=a(require("./version.js")),o=a(require("./validate.js")),f=a(require("./stringify.js")),s=a(require("./parse.js"));function a(e){return e&&e.__esModule?e:{default:e}}
},{"./v1.js":"qgnI","./v3.js":"vJdu","./v4.js":"K7Zs","./v5.js":"K2oB","./nil.js":"loGb","./version.js":"GRom","./validate.js":"p9l8","./stringify.js":"vDjk","./parse.js":"rtKa"}],"xu5g":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(n,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(n,t)};return function(n,t){function o(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e}).apply(this,arguments)},t=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(i,s){function r(e){try{a(o.next(e))}catch(n){s(n)}}function c(e){try{a(o.throw(e))}catch(n){s(n)}}function a(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(r,c)}a((o=o.apply(e,n||[])).next())})},o=this&&this.__generator||function(e,n){var t,o,i,s,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(s){return function(c){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;r;)try{if(t=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=n.call(e,r)}catch(c){s=[6,c],o=0}finally{t=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),require("webrtc-adapter");var s=i(require("events")),r=i(require("aws-sdk/clients/kinesisvideo")),c=i(require("aws-sdk/clients/kinesisvideosignalingchannels")),a=require("amazon-kinesis-video-streams-webrtc"),l=require("uuid"),u=function(i){function s(e){void 0===e&&(e={});var t=i.call(this)||this;return t.clientId=l.v4(),t.options=n({region:null,channelName:null,openDataChannel:!1,useTrickleICE:!0,natTraversalDisabled:!1,forceTURN:!1,accessKeyId:null,secretAccessKey:null},e),t.remoteView=null,t.signalingClient=null,t.peerConnection=null,t.dataChannel=null,t.peerConnectionStatsInterval=null,t.remoteStream=null,t}return e(s,i),s.prototype.start=function(e){return t(this,void 0,void 0,function(){var n,i,s,l,u,h,p,d,f=this;return o(this,function(g){switch(g.label){case 0:return this.remoteView=e,[4,(n=new r.default({region:this.options.region,accessKeyId:this.options.accessKeyId,secretAccessKey:this.options.secretAccessKey,sessionToken:this.options.sessionToken,endpoint:this.options.endpoint,correctClockSkew:!0})).describeSignalingChannel({ChannelName:this.options.channelName}).promise()];case 1:return i=g.sent(),s=i.ChannelInfo.ChannelARN,console.log("[VIEWER] Channel ARN: ",s),[4,n.getSignalingChannelEndpoint({ChannelARN:s,SingleMasterChannelEndpointConfiguration:{Protocols:["WSS","HTTPS"],Role:a.Role.VIEWER}}).promise()];case 2:return l=g.sent(),u=l.ResourceEndpointList.reduce(function(e,n){return e[n.Protocol]=n.ResourceEndpoint,e},{}),console.log("[VIEWER] Endpoints: ",u),[4,new c.default({region:this.options.region,accessKeyId:this.options.accessKeyId,secretAccessKey:this.options.secretAccessKey,sessionToken:this.options.sessionToken,endpoint:u.HTTPS,correctClockSkew:!0}).getIceServerConfig({ChannelARN:s}).promise()];case 3:return h=g.sent(),p=[],this.options.natTraversalDisabled||this.options.forceTURN||p.push({urls:"stun:stun.kinesisvideo."+this.options.region+".amazonaws.com:443"}),this.options.natTraversalDisabled||h.IceServerList.forEach(function(e){return p.push({urls:e.Uris,username:e.Username,credential:e.Password})}),console.log("[VIEWER] ICE servers: ",p),this.signalingClient=new a.SignalingClient({channelARN:s,channelEndpoint:u.WSS,clientId:this.clientId,role:a.Role.VIEWER,region:this.options.region,credentials:{accessKeyId:this.options.accessKeyId,secretAccessKey:this.options.secretAccessKey,sessionToken:this.options.sessionToken},systemClockOffset:n.config.systemClockOffset}),d={iceServers:p,iceTransportPolicy:this.options.forceTURN?"relay":"all"},this.peerConnection=new RTCPeerConnection(d),this.options.openDataChannel&&(this.dataChannel=this.peerConnection.createDataChannel("kvsDataChannel"),this.peerConnection.ondatachannel=function(e){e.channel.onmessage=function(e){return f.emit("message",e)}}),this.peerConnectionStatsInterval=setInterval(function(){return f.peerConnection.getStats().then(function(e){return f.emit("stats",e)})},1e3),this.signalingClient.on("open",function(){return t(f,void 0,void 0,function(){var e,n;return o(this,function(t){switch(t.label){case 0:return console.log("[VIEWER] Connected to signaling service"),console.log("[VIEWER] Creating SDP offer"),n=(e=this.peerConnection).setLocalDescription,[4,this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0})];case 1:return[4,n.apply(e,[t.sent()])];case 2:return t.sent(),this.options.useTrickleICE&&(console.log("[VIEWER] Sending SDP offer"),this.signalingClient.sendSdpOffer(this.peerConnection.localDescription)),console.log("[VIEWER] Generating ICE candidates"),[2]}})})}),this.signalingClient.on("sdpAnswer",function(e){return t(f,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return console.log("[VIEWER] Received SDP answer"),[4,this.peerConnection.setRemoteDescription(e)];case 1:return n.sent(),[2]}})})}),this.signalingClient.on("iceCandidate",function(e){console.log("[VIEWER] Received ICE candidate"),f.peerConnection.addIceCandidate(e)}),this.signalingClient.on("close",function(){console.log("[VIEWER] Disconnected from signaling channel")}),this.signalingClient.on("error",function(e){console.error("[VIEWER] Signaling client error: ",e)}),this.peerConnection.addEventListener("icecandidate",function(e){var n=e.candidate;n?(console.log("[VIEWER] Generated ICE candidate"),f.options.useTrickleICE&&(console.log("[VIEWER] Sending ICE candidate"),f.signalingClient.sendIceCandidate(n))):(console.log("[VIEWER] All ICE candidates have been generated"),f.options.useTrickleICE||(console.log("[VIEWER] Sending SDP offer"),f.signalingClient.sendSdpOffer(f.peerConnection.localDescription)))}),this.peerConnection.addEventListener("track",function(n){console.log("[VIEWER] Received remote track"),e.srcObject||(f.remoteStream=n.streams[0],e.srcObject=f.remoteStream)}),console.log("[VIEWER] Starting viewer connection"),this.signalingClient.open(),[2]}})})},s.prototype.stop=function(){console.log("[VIEWER] Stopping viewer connection"),this.signalingClient&&(this.signalingClient.close(),this.signalingClient=null),this.peerConnection&&(this.peerConnection.close(),this.peerConnection=null),this.remoteStream&&(this.remoteStream.getTracks().forEach(function(e){return e.stop()}),this.remoteStream=null),this.peerConnectionStatsInterval&&(clearInterval(this.peerConnectionStatsInterval),this.peerConnectionStatsInterval=null),this.remoteView&&(this.remoteView.srcObject=null),this.dataChannel&&(this.dataChannel=null)},s.prototype.sendMessage=function(e){if(this.dataChannel)try{this.dataChannel.send(e)}catch(n){console.error("[VIEWER] Send DataChannel: ",n.toString())}},s}(s.default);"undefined"!=typeof window&&(window.Viewer=u);
},{"webrtc-adapter":"WzOL","events":"K1mi","aws-sdk/clients/kinesisvideo":"JTKG","aws-sdk/clients/kinesisvideosignalingchannels":"Uapf","amazon-kinesis-video-streams-webrtc":"uH65","uuid":"UeUD"}]},{},["xu5g"], null)